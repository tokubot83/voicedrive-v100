# アカウントレベル定義変更提案書

**文書番号**: ALCP-YYYY-MMDD-XXX
**提案日**: YYYY-MM-DD
**提案者**: [医療チーム / VoiceDriveチーム]
**緊急度**: [🔴 高（Level 1） / 🟡 中（Level 2） / 🟢 低（Level 3）]
**変更種別**: [新規追加 / 既存修正 / 削除]

---

## エグゼクティブサマリー

【3行で変更内容を要約】

---

## 1. 変更内容

### 1.1 追加レベル（新規追加の場合）

| 項目 | 内容 |
|------|------|
| **レベル番号** | XX.X（例: 5.5） |
| **コード** | `XXX_XXX`（例: `SENIOR_CHIEF`） |
| **日本語名** | XXX（例: 上級主任） |
| **カテゴリ** | [一般職員 / 役職層 / 施設経営層 / 法人人事部 / 最高経営層 / 特別権限] |
| **説明** | XXX |
| **職種制約** | [なし / nursing / medical / administrative / etc.] |
| **特別フラグ** | [なし / canPerformLeaderDuty / etc.] |

### 1.2 変更レベル（既存修正の場合）

| 項目 | 変更前 | 変更後 | 理由 |
|------|--------|--------|------|
| **レベル番号** | XX | YY | XXX |
| **コード** | `OLD_CODE` | `NEW_CODE` | XXX |
| **日本語名** | XXX | YYY | XXX |
| **説明** | XXX | YYY | XXX |

### 1.3 削除レベル（削除の場合）

| 項目 | 内容 |
|------|------|
| **削除レベル** | XX.X |
| **削除コード** | `XXX_XXX` |
| **削除理由** | XXX |
| **代替レベル** | YY.Y（`YYY_YYY`） |

---

## 2. 変更理由

### 2.1 背景

【なぜこの変更が必要か】

### 2.2 ビジネス要件

【どのような業務要件を満たすためか】

### 2.3 技術的必要性

【技術的にどのような課題を解決するか】

### 2.4 代替案の検討

【他にどのような方法を検討したか、なぜこの案を選んだか】

---

## 3. 影響範囲分析

### 3.1 医療システム側

#### 影響ファイル

| ファイル | 変更内容 | 工数見積 |
|---------|---------|---------|
| `src/services/accountLevelCalculator.ts` | XXX | X時間 |
| `src/config/accessControl.ts` | XXX | X時間 |
| `src/types/staff.ts` | XXX | X時間 |
| `mcp-shared/config/unified-account-level-definition.json` | XXX | X時間 |

#### 影響API

| API | 変更内容 | 互換性 |
|-----|---------|--------|
| `POST /api/v1/calculate-level` | XXX | [後方互換あり / 破壊的変更] |
| `GET /api/v1/staff/:id` | XXX | [後方互換あり / 破壊的変更] |

#### 影響データベース

| テーブル | 変更内容 | マイグレーション |
|---------|---------|-----------------|
| `unified_staff_master` | XXX | [要 / 不要] |
| `account_integration` | XXX | [要 / 不要] |

### 3.2 VoiceDriveシステム側

#### 影響ファイル

| ファイル | 変更内容 | 工数見積 |
|---------|---------|---------|
| `src/types/accountLevel.ts` | XXX | X時間 |
| `src/lib/accountLevelHelpers.ts` | XXX | X時間 |
| `src/permissions/config/projectModePermissions.ts` | XXX | X時間 |
| `src/permissions/config/agendaModePermissions.ts` | XXX | X時間 |
| `mcp-shared/config/unified-account-level-definition.json` | XXX | X時間 |

#### 影響UI

| ページ/コンポーネント | 変更内容 | 工数見積 |
|-------------------|---------|---------|
| XXX | XXX | X時間 |

#### 影響ロジック

| 機能 | 変更内容 | 工数見積 |
|------|---------|---------|
| 権限チェック | XXX | X時間 |
| 投票ロジック | XXX | X時間 |
| メニュー表示 | XXX | X時間 |

### 3.3 影響サマリー

| 項目 | 医療システム | VoiceDrive | 合計 |
|------|------------|-----------|------|
| **影響ファイル数** | X | Y | X+Y |
| **工数見積（時間）** | X | Y | X+Y |
| **影響ユーザー数** | X | Y | X+Y |
| **影響度** | [高/中/低] | [高/中/低] | [高/中/低] |

---

## 4. リスク分析

### 4.1 技術的リスク

| リスク | 発生確率 | 影響度 | 対策 |
|--------|---------|--------|------|
| XXX | [高/中/低] | [高/中/低] | XXX |

### 4.2 ビジネスリスク

| リスク | 発生確率 | 影響度 | 対策 |
|--------|---------|--------|------|
| XXX | [高/中/低] | [高/中/低] | XXX |

### 4.3 ロールバック計画

【変更実装後に問題が発生した場合の戻し手順】

```
1. XXX
2. XXX
3. XXX
```

---

## 5. 実装スケジュール

### 5.1 フェーズ別スケジュール

| Phase | 期間 | 担当 | 成果物 |
|-------|------|------|--------|
| **Phase 1: 設計** | YYYY-MM-DD ~ YYYY-MM-DD | 両チーム | 詳細設計書 |
| **Phase 2: 実装** | YYYY-MM-DD ~ YYYY-MM-DD | 両チーム | 実装完了 |
| **Phase 3: テスト** | YYYY-MM-DD ~ YYYY-MM-DD | 両チーム | テスト結果レポート |
| **Phase 4: 本番反映** | YYYY-MM-DD | 両チーム | 本番リリース |

### 5.2 マイルストーン

- [ ] YYYY-MM-DD: 変更提案書提出
- [ ] YYYY-MM-DD: 影響範囲調査完了
- [ ] YYYY-MM-DD: 統合ミーティング開催
- [ ] YYYY-MM-DD: 両チーム合意
- [ ] YYYY-MM-DD: 実装開始
- [ ] YYYY-MM-DD: 統合テスト完了
- [ ] YYYY-MM-DD: 本番反映

---

## 6. テスト計画

### 6.1 テストケース

| # | テスト内容 | 期待結果 | 担当 |
|---|----------|---------|------|
| T001 | XXX | XXX | 医療チーム |
| T002 | XXX | XXX | VDチーム |

### 6.2 統合テスト項目

- [ ] 新レベルのマッピング検証
- [ ] 既存レベルへの影響確認
- [ ] SSO認証フロー確認
- [ ] 権限チェックロジック検証
- [ ] UI表示確認

### 6.3 パフォーマンステスト

| 指標 | 目標値 | 測定方法 |
|------|--------|---------|
| XXX | XXX | XXX |

---

## 7. ドキュメント更新

### 7.1 更新対象ドキュメント

- [ ] `mcp-shared/config/unified-account-level-definition.json`
- [ ] マスタープラン Phase 0.5セクション
- [ ] API仕様書
- [ ] ユーザーガイド
- [ ] その他: XXX

---

## 8. 承認

### 8.1 承認プロセス

| ステップ | 承認者 | 承認日 | ステータス |
|---------|--------|--------|----------|
| 1. 変更提案書レビュー | 医療チームリーダー | YYYY-MM-DD | [承認待ち / 承認 / 却下] |
| 2. 変更提案書レビュー | VDチームリーダー | YYYY-MM-DD | [承認待ち / 承認 / 却下] |
| 3. 統合ミーティング | 両チーム | YYYY-MM-DD | [開催待ち / 完了] |
| 4. 実装承認 | 両チームリーダー | YYYY-MM-DD | [承認待ち / 承認 / 却下] |
| 5. 本番反映承認 | 両チームリーダー | YYYY-MM-DD | [承認待ち / 承認 / 却下] |

### 8.2 承認署名

| チーム | 承認者 | 署名 | 日付 |
|--------|--------|------|------|
| 医療チーム | XXX | ___________ | YYYY-MM-DD |
| VoiceDriveチーム | XXX | ___________ | YYYY-MM-DD |

---

## 9. 連絡先

### 9.1 担当者

| チーム | 担当者 | メール | Slack |
|--------|--------|--------|-------|
| 医療チーム | XXX | XXX@example.com | @xxx |
| VoiceDriveチーム | YYY | YYY@example.com | @yyy |

### 9.2 緊急連絡先

- 医療チームリーダー: XXX
- VoiceDriveチームリーダー: YYY
- Slack: #account-level-sync

---

## Appendix: 関連資料

1. 影響範囲調査報告書: `XXX.md`
2. 統合テスト結果: `XXX.md`
3. その他: XXX

---

**提案者署名**

氏名: ___________
所属: ___________
日付: YYYY-MM-DD
