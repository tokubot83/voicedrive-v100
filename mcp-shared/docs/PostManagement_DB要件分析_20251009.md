# VoiceDrive æŠ•ç¨¿ç®¡ç†DBè¦ä»¶åˆ†æ
**ä½œæˆæ—¥**: 2025å¹´10æœˆ9æ—¥
**å¯¾è±¡æ©Ÿèƒ½**: æŠ•ç¨¿ç®¡ç†ï¼ˆ6æ®µéšè­°é¡ŒåŒ–ã‚·ã‚¹ãƒ†ãƒ ãƒ»æ¨©é™åˆ¥ç®¡ç†ãƒ•ãƒ­ãƒ¼ï¼‰
**åˆ†æç¯„å›²**: ProposalManagementPage, CommitteeManagementPage, CommitteeSubmission, æ‰¿èªãƒ•ãƒ­ãƒ¼

---

## ğŸ“‹ ç›®æ¬¡
1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [6æ®µéšè­°é¡ŒåŒ–ãƒ¬ãƒ™ãƒ«å®šç¾©](#6æ®µéšè­°é¡ŒåŒ–ãƒ¬ãƒ™ãƒ«å®šç¾©)
3. [æ¨©é™ãƒ¬ãƒ™ãƒ«åˆ¥è²¬ä»»ç¯„å›²](#æ¨©é™ãƒ¬ãƒ™ãƒ«åˆ¥è²¬ä»»ç¯„å›²)
4. [æŠ•ç¨¿ç®¡ç†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼](#æŠ•ç¨¿ç®¡ç†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼)
5. [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹](#ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹)
6. [ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ](#ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ)
7. [APIè¨­è¨ˆ](#apiè¨­è¨ˆ)
8. [å®Ÿè£…å„ªå…ˆåº¦](#å®Ÿè£…å„ªå…ˆåº¦)

---

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### æŠ•ç¨¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å½¹å‰²
VoiceDriveã®æŠ•ç¨¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¯ã€è·å“¡ã®æ”¹å–„ææ¡ˆã‚’ **6æ®µéšã®è­°é¡Œãƒ¬ãƒ™ãƒ«** ã§è‡ªå‹•æ˜‡æ ¼ã•ã›ã€å„æ¨©é™ãƒ¬ãƒ™ãƒ«ã®è²¬ä»»è€…ãŒé©åˆ‡ã«ç®¡ç†ãƒ»åˆ¤æ–­ã§ãã‚‹ä»•çµ„ã¿ã§ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½
1. **è‡ªå‹•è­°é¡Œãƒ¬ãƒ™ãƒ«åˆ¤å®š**: æŠ•ç¥¨ã‚¹ã‚³ã‚¢ã«åŸºã¥ã„ã¦6æ®µéšã®ãƒ¬ãƒ™ãƒ«ã«è‡ªå‹•æ˜‡æ ¼
2. **æ¨©é™åˆ¥ç®¡ç†ç”»é¢**: Level 5-13ã®å„è²¬ä»»è€…ã«å¿œã˜ãŸç®¡ç†æ©Ÿèƒ½
3. **è²¬ä»»è€…åˆ¤æ–­ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æ‰¿èªã€å´ä¸‹ã€ä¿ç•™ã€éƒ¨ç½²æ¡ˆä»¶åŒ–
4. **å§”å“¡ä¼šæå‡ºãƒ•ãƒ­ãƒ¼**: Level 7+ãŒæº–å‚™ â†’ Level 8+ãŒæ‰¿èª â†’ å§”å“¡ä¼šæå‡º
5. **è­°é¡Œææ¡ˆæ›¸ç”Ÿæˆ**: æŠ•ç¥¨åˆ†æãƒ»ã‚³ãƒ¡ãƒ³ãƒˆåˆ†æã‚’åŸºã«è‡ªå‹•ç”Ÿæˆ
6. **æœŸé™ç®¡ç†**: æŠ•ç¥¨æœŸé™ãƒ»å»¶é•·ç®¡ç†ãƒ»æœŸé™åˆ‡ã‚Œæ™‚ã®è²¬ä»»è€…åˆ¤æ–­ä¿ƒé€²

---

## 6æ®µéšè­°é¡ŒåŒ–ãƒ¬ãƒ™ãƒ«å®šç¾©

| ãƒ¬ãƒ™ãƒ« | ç‚¹æ•°ç¯„å›² | ãƒ¬ãƒ™ãƒ«å | è²¬ä»»è€… (Level) | æå‡ºå…ˆ | èª¬æ˜ |
|--------|----------|----------|----------------|--------|------|
| **PENDING** | 0-29ç‚¹ | æ¤œè¨ä¸­ | å‰¯ä¸»ä»»ä»¥ä¸Š (5+) | ãªã—ï¼ˆæ§˜å­è¦‹ï¼‰ | æŠ•ç¥¨ç¶™ç¶šä¸­ã€æ§˜å­è¦‹æ®µéš |
| **DEPT_REVIEW** | 30-49ç‚¹ | éƒ¨ç½²æ¤œè¨ | ä¸»ä»» (6+) | éƒ¨ç½²ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚° | éƒ¨ç½²å†…ã§è­°è«–ã™ã‚‹ãŸã‚ã®ææ¡ˆæ›¸ä½œæˆ |
| **DEPT_AGENDA** | 50-99ç‚¹ | éƒ¨ç½²è­°é¡Œ | å¸«é•· (8+) | æ–½è¨­é‹å–¶å§”å“¡ä¼š | æ–½è¨­ãƒ¬ãƒ™ãƒ«ã§æ¤œè¨ã™ã‚‹ãŸã‚ã®ææ¡ˆæ›¸ä½œæˆ |
| **FACILITY_AGENDA** | 100-299ç‚¹ | æ–½è¨­è­°é¡Œ | éƒ¨é•· (10+) | æ³•äººé‹å–¶å§”å“¡ä¼š | æ³•äººãƒ¬ãƒ™ãƒ«ã§æ¤œè¨ã™ã‚‹ãŸã‚ã®ææ¡ˆæ›¸ä½œæˆ |
| **CORP_REVIEW** | 300-599ç‚¹ | æ³•äººæ¤œè¨ | å‰¯é™¢é•· (12+) | æ³•äººç†äº‹ä¼š | ç†äº‹ä¼šã§æ¤œè¨ã™ã‚‹ãŸã‚ã®ææ¡ˆæ›¸ä½œæˆ |
| **CORP_AGENDA** | 600ç‚¹ä»¥ä¸Š | æ³•äººè­°é¡Œ | é™¢é•· (13+) | æœ€çµ‚æ±ºå®šæ©Ÿé–¢ï¼ˆç†äº‹ä¼šï¼‰ | æœ€çµ‚æ±ºå®šæ©Ÿé–¢ã§ã®å¯©è­°ã®ãŸã‚ã®ææ¡ˆæ›¸ä½œæˆ |

### ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
```typescript
// æŠ•ç¥¨é‡ã¿ä»˜ã‘
const VOTE_WEIGHTS = {
  'strongly-support': +5,
  'support': +3,
  'neutral': 0,
  'oppose': -3,
  'strongly-oppose': -5
};

// æ¨©é™ãƒ¬ãƒ™ãƒ«ã«ã‚ˆã‚‹é‡ã¿è£œæ­£
const PERMISSION_WEIGHT = {
  1-4: 1.0,   // ä¸€èˆ¬è·å“¡
  5-7: 1.5,   // ä¸»ä»»ãƒ»å‰¯ä¸»ä»»
  8-10: 2.0,  // å¸«é•·ãƒ»éƒ¨é•·
  11-13: 3.0  // å‰¯é™¢é•·ãƒ»é™¢é•·
};

// æœ€çµ‚ã‚¹ã‚³ã‚¢ = Î£(æŠ•ç¥¨é‡ã¿ Ã— æ¨©é™é‡ã¿)
```

---

## æ¨©é™ãƒ¬ãƒ™ãƒ«åˆ¥è²¬ä»»ç¯„å›²

### è²¬ä»»ç¯„å›²ãƒãƒˆãƒªã‚¯ã‚¹

| æ¨©é™Level | å½¹è· | ç®¡è½„ãƒ¬ãƒ™ãƒ« | ç·¨é›†å¯ | é–²è¦§å¯ | ä¸»è¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|-----------|------|------------|--------|--------|----------------|
| **5** | å‰¯ä¸»ä»» | PENDING | âœ… | âœ… | æ§˜å­è¦‹ãƒ»æŠ•ç¥¨ä¿ƒé€² |
| **6** | ä¸»ä»» | DEPT_REVIEW | âœ… | âœ… PENDING, DEPT_AGENDA | éƒ¨ç½²æ¤œè¨ææ¡ˆæ›¸ä½œæˆãƒ»ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æ‰¿èª |
| **7** | - | - | - | âœ… DEPT_REVIEW - DEPT_AGENDA | å§”å“¡ä¼šæå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ |
| **8** | å¸«é•· | DEPT_AGENDA | âœ… | âœ… DEPT_REVIEW - FACILITY_AGENDA | å§”å“¡ä¼šæå‡ºæ‰¿èªãƒ»æ–½è¨­è­°é¡ŒåŒ– |
| **10** | éƒ¨é•· | FACILITY_AGENDA | âœ… | âœ… DEPT_AGENDA - CORP_REVIEW | æ³•äººè­°é¡ŒåŒ–åˆ¤æ–­ |
| **12** | å‰¯é™¢é•· | CORP_REVIEW | âœ… | âœ… FACILITY_AGENDA - CORP_AGENDA | ç†äº‹ä¼šæå‡ºåˆ¤æ–­ |
| **13** | é™¢é•· | CORP_AGENDA | âœ… | âœ… å…¨ãƒ¬ãƒ™ãƒ« | æœ€çµ‚æ±ºå®šãƒ»å…¨ä½“ç›£ç£ |

### æ¨©é™ãƒ«ãƒ¼ãƒ«
```typescript
// ProposalPermissionService.ts ã‚ˆã‚Š

// 1. å°‚ä»»æ‹…å½“è€…ï¼ˆç·¨é›†å¯ï¼‰
if (userLevel === targetLevel) {
  return { canEdit: true, role: 'owner' };
}

// 2. ä¸Šä½ç›£ç£è€…ï¼ˆ1-2æ®µéšä¸Šï¼šã‚¢ãƒ‰ãƒã‚¤ã‚¹å¯ï¼‰
if (userLevel - targetLevel <= 2) {
  return { canEdit: false, canComment: true, canEmergencyOverride: true };
}

// 3. ä¸Šä½ç›£ç£è€…ï¼ˆ3æ®µéšä»¥ä¸Šä¸Šï¼šé–²è¦§ã®ã¿ï¼‰
if (userLevel > targetLevel) {
  return { canEdit: false, canComment: false, canEmergencyOverride: true };
}

// 4. ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆä¸‹ä½æ‹…å½“è€…ä¸åœ¨æ™‚ï¼‰
if (userLevel >= minLevel && userLevel < targetLevel) {
  return { canEdit: true, role: 'owner (ä»£è¡Œ)' };
}

// 5. ä¸‹ä½é–²è¦§ï¼ˆå­¦ç¿’ç›®çš„ï¼‰
if (userLevel >= minLevel - 2) {
  return { canView: true, role: 'observer' };
}
```

---

## æŠ•ç¨¿ç®¡ç†ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### Phase 1: æŠ•ç¥¨æœŸé–“ï¼ˆè‡ªå‹•æ˜‡æ ¼ï¼‰

```mermaid
graph TD
    A[æŠ•ç¨¿ä½œæˆ] --> B[æŠ•ç¥¨é–‹å§‹]
    B --> C{ã‚¹ã‚³ã‚¢ç¢ºèª}
    C -->|0-29ç‚¹| D[PENDING]
    C -->|30-49ç‚¹| E[DEPT_REVIEW]
    C -->|50-99ç‚¹| F[DEPT_AGENDA]
    C -->|100-299ç‚¹| G[FACILITY_AGENDA]
    C -->|300-599ç‚¹| H[CORP_REVIEW]
    C -->|600ç‚¹ä»¥ä¸Š| I[CORP_AGENDA]

    D --> J{æŠ•ç¥¨æœŸé™}
    E --> J
    F --> J
    G --> J
    H --> J
    I --> J

    J -->|æœŸé™å†…| B
    J -->|æœŸé™åˆ‡ã‚Œ| K[è²¬ä»»è€…åˆ¤æ–­å¾…ã¡]
```

### Phase 2: è²¬ä»»è€…åˆ¤æ–­ï¼ˆæœŸé™å¾Œï¼‰

```mermaid
graph TD
    A[æŠ•ç¥¨æœŸé™çµ‚äº†] --> B{è²¬ä»»è€…æ¨©é™ç¢ºèª}

    B --> C[Level 5+: PENDINGæ‹…å½“]
    B --> D[Level 6+: DEPT_REVIEWæ‹…å½“]
    B --> E[Level 8+: DEPT_AGENDAæ‹…å½“]
    B --> F[Level 10+: FACILITY_AGENDAæ‹…å½“]

    C --> G{åˆ¤æ–­}
    D --> G
    E --> G
    F --> G

    G -->|æ‰¿èª| H[ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—]
    G -->|å´ä¸‹| I[å´ä¸‹ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯]
    G -->|ä¿ç•™| J[ä¿ç•™ãƒ»å»¶é•·]
    G -->|éƒ¨ç½²æ¡ˆä»¶åŒ–| K[éƒ¨ç½²ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ¡ˆä»¶]

    H --> L[ä¸Šä½ãƒ¬ãƒ™ãƒ«ã¸æ˜‡æ ¼]
    I --> M[ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–]
    J --> N[æŠ•ç¥¨æœŸé™å»¶é•·]
    K --> O[éƒ¨ç½²ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ç™»éŒ²]
```

### Phase 3: å§”å“¡ä¼šæå‡ºãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[DEPT_AGENDAä»¥ä¸Šã«åˆ°é”] --> B[Level 7+: è­°é¡Œææ¡ˆæ›¸ä½œæˆ]
    B --> C[Level 7+: å§”å“¡ä¼šæå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆ]

    C --> D[Level 8+: æå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆç¢ºèª]

    D --> E{æ‰¿èªåˆ¤æ–­}
    E -->|æ‰¿èª| F[å§”å“¡ä¼šã¸æå‡º]
    E -->|å´ä¸‹| G[å·®ã—æˆ»ã—]

    F --> H[12ã®å§”å“¡ä¼šã„ãšã‚Œã‹ã«æå‡º]
    G --> I[ä¿®æ­£ãƒ»å†æå‡º]

    H --> J{å§”å“¡ä¼šæ±ºè­°}
    J -->|æ¡æŠ| K[å®Ÿæ–½æ±ºå®š]
    J -->|è¦æ”¹å–„| L[æ”¹å–„è¦æ±‚]
    J -->|å´ä¸‹| M[å´ä¸‹]
```

### å§”å“¡ä¼šä¸€è¦§ï¼ˆ12ç¨®é¡ï¼‰

#### åŒ»ç™‚å®‰å…¨ãƒ»å“è³ª
1. **åŒ»ç™‚å®‰å…¨å§”å“¡ä¼š**ï¼ˆåŒ»ç™‚äº‹æ•…é˜²æ­¢ãƒ»ãƒªã‚¹ã‚¯ç®¡ç†ï¼‰
2. **æ„ŸæŸ“å¯¾ç­–å§”å“¡ä¼š**ï¼ˆé™¢å†…æ„ŸæŸ“é˜²æ­¢ï¼‰
3. **åŒ»è–¬å“å§”å“¡ä¼š**ï¼ˆåŒ»è–¬å“ã®é©æ­£ä½¿ç”¨ãƒ»ç®¡ç†ï¼‰
4. **åŒ»ç™‚æ©Ÿå™¨å®‰å…¨ç®¡ç†å§”å“¡ä¼š**ï¼ˆåŒ»ç™‚æ©Ÿå™¨ã®å®‰å…¨ç®¡ç†ï¼‰

#### æ¥­å‹™æ”¹å–„
5. **æ¥­å‹™æ”¹å–„å§”å“¡ä¼š**ï¼ˆæ¥­å‹™åŠ¹ç‡åŒ–ãƒ»ãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„ï¼‰
6. **ICTæ´»ç”¨å§”å“¡ä¼š**ï¼ˆæƒ…å ±ã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ï¼‰

#### äººäº‹ãƒ»åŠ´å‹™
7. **åŠ´åƒå®‰å…¨è¡›ç”Ÿå§”å“¡ä¼š**ï¼ˆè·å“¡ã®å®‰å…¨è¡›ç”Ÿï¼‰
8. **æ•™è‚²ãƒ»ç ”ä¿®å§”å“¡ä¼š**ï¼ˆè·å“¡æ•™è‚²ãƒ»ã‚­ãƒ£ãƒªã‚¢é–‹ç™ºï¼‰

#### çµŒå–¶ãƒ»é‹å–¶
9. **çµŒå–¶ä¼ç”»å§”å“¡ä¼š**ï¼ˆçµŒå–¶æˆ¦ç•¥ãƒ»ä¸­é•·æœŸè¨ˆç”»ï¼‰
10. **æ–½è¨­é‹å–¶å§”å“¡ä¼š**ï¼ˆæ–½è¨­ç®¡ç†ãƒ»é‹å–¶æ”¹å–„ï¼‰

#### ãã®ä»–
11. **å€«ç†å§”å“¡ä¼š**ï¼ˆåŒ»ç™‚å€«ç†ãƒ»ç ”ç©¶å€«ç†ï¼‰
12. **åœ°åŸŸé€£æºå§”å“¡ä¼š**ï¼ˆåœ°åŸŸåŒ»ç™‚é€£æºãƒ»æ‚£è€…ã‚µãƒ¼ãƒ“ã‚¹ï¼‰

---

## ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹

### VoiceDriveç®¡è½„ï¼ˆA: å®Œå…¨ç®¡ç†ï¼‰
| ã‚«ãƒ†ã‚´ãƒª | ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | ç†ç”± |
|----------|------------|------|
| **æŠ•ç¨¿ç®¡ç†ãƒ‡ãƒ¼ã‚¿** | Postæ‹¡å¼µæƒ…å ±ï¼ˆè­°é¡Œãƒ¬ãƒ™ãƒ«ã€æœŸé™ã€è²¬ä»»è€…åˆ¤æ–­å±¥æ­´ï¼‰ | æŠ•ç¨¿è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ ã®ã‚³ã‚¢æ©Ÿèƒ½ |
| **è­°é¡Œææ¡ˆæ›¸** | ProposalDocumentï¼ˆè‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸææ¡ˆæ›¸ï¼‰ | VoiceDriveç‹¬è‡ªæ©Ÿèƒ½ |
| **å§”å“¡ä¼šæå‡º** | SubmissionRequestï¼ˆæå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ»æ‰¿èªè¨˜éŒ²ï¼‰ | VoiceDriveç‹¬è‡ªãƒ•ãƒ­ãƒ¼ |
| **è²¬ä»»è€…åˆ¤æ–­å±¥æ­´** | ResponsibilityActionï¼ˆãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æ‰¿èªãƒ»å´ä¸‹ãƒ»ä¿ç•™ï¼‰ | VoiceDriveç‹¬è‡ªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ |
| **ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³** | PostManagementTimelineï¼ˆæŠ•ç¨¿ç®¡ç†ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ï¼‰ | VoiceDriveç‹¬è‡ªè¿½è·¡ |

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å‚ç…§ï¼ˆB: APIçµŒç”±å–å¾—ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
| ã‚«ãƒ†ã‚´ãƒª | ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | å–å¾—æ–¹æ³• |
|----------|------------|----------|
| **è·å“¡åŸºæœ¬æƒ…å ±** | employeeId, name, department, permissionLevel | GET /api/employees/:employeeId |
| **éƒ¨ç½²æ§‹æˆ** | éƒ¨ç½²ãƒ¡ãƒ³ãƒãƒ¼ãƒªã‚¹ãƒˆ | GET /api/departments/:departmentId/members |
| **çµ„ç¹”éšå±¤** | facilityId, è¦ªéƒ¨ç½²ID | GET /api/organization/structure |

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ï¼ˆC: Webhooké€ä¿¡ï¼‰
| ã‚¤ãƒ™ãƒ³ãƒˆ | ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ãƒ‡ãƒ¼ã‚¿å†…å®¹ |
|----------|-----------|-----------|
| **å§”å“¡ä¼šæå‡ºé€šçŸ¥** | Level 8+ãŒå§”å“¡ä¼šæå‡ºæ‰¿èªæ™‚ | ææ¡ˆæ›¸IDã€å§”å“¡ä¼šåã€æå‡ºè€…æƒ…å ± |
| **æœ€çµ‚æ±ºå®šé€šçŸ¥** | å§”å“¡ä¼šã§å®Ÿæ–½æ±ºå®šæ™‚ | æ±ºå®šå†…å®¹ã€å®Ÿæ–½äºˆå®šã€æ‹…å½“éƒ¨ç½² |

### å®Œå…¨ç‹¬ç«‹ï¼ˆD: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ä¸è¦ï¼‰
- **æŠ•ç¥¨ãƒ‡ãƒ¼ã‚¿**: Vote, VoteHistoryï¼ˆVoiceDriveå®Œå…¨ç®¡ç†ï¼‰
- **ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿**: Commentï¼ˆVoiceDriveå®Œå…¨ç®¡ç†ï¼‰
- **è­°é¡Œãƒ¬ãƒ™ãƒ«è‡ªå‹•åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯**: ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ»ãƒ¬ãƒ™ãƒ«æ˜‡æ ¼ï¼ˆVoiceDriveå†…éƒ¨å‡¦ç†ï¼‰
- **æœŸé™ç®¡ç†**: æŠ•ç¥¨æœŸé™ãƒ»å»¶é•·å‡¦ç†ï¼ˆVoiceDriveå†…éƒ¨å‡¦ç†ï¼‰

---

## ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

### 1. Postæ‹¡å¼µï¼ˆè­°é¡Œãƒ¬ãƒ™ãƒ«ãƒ»æœŸé™æƒ…å ±ï¼‰

```prisma
model Post {
  id                    String    @id @default(cuid())
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ...

  // ===== è­°é¡Œãƒ¬ãƒ™ãƒ«ç®¡ç† =====
  agendaScore           Int?      @default(0)
  agendaLevel           String?   // 'PENDING' | 'DEPT_REVIEW' | 'DEPT_AGENDA' | 'FACILITY_AGENDA' | 'CORP_REVIEW' | 'CORP_AGENDA'
  agendaDeadline        DateTime? // æŠ•ç¥¨æœŸé™
  agendaDeadlineExtensions Int?   @default(0) // å»¶é•·å›æ•°

  // ===== è²¬ä»»è€…åˆ¤æ–­çŠ¶æ…‹ =====
  responsibilityStatus  String?   @default("voting") // 'voting' | 'awaiting_decision' | 'approved' | 'rejected' | 'on_hold' | 'dept_matter'
  responsibleLevel      Int?      // ç¾åœ¨ã®è²¬ä»»è€…Levelï¼ˆ6, 8, 10, 12, 13ï¼‰
  lastActionBy          String?   // æœ€å¾Œã«ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã—ãŸè²¬ä»»è€…ã®employeeId
  lastActionAt          DateTime? // æœ€å¾Œã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ—¥æ™‚

  // ===== å§”å“¡ä¼šæå‡ºçŠ¶æ…‹ =====
  committeeStatus       String?   // 'not_submitted' | 'request_pending' | 'approved_for_submission' | 'submitted' | 'decided'
  targetCommittee       String?   // æå‡ºå…ˆå§”å“¡ä¼šå
  submittedAt           DateTime? // å§”å“¡ä¼šæå‡ºæ—¥æ™‚
  committeeDecision     String?   // 'adopted' | 'requires_improvement' | 'rejected'

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  responsibilityActions ResponsibilityAction[]
  proposalDocuments     ProposalDocument[]
  submissionRequests    SubmissionRequest[]
  managementTimeline    PostManagementTimeline[]
}
```

### 2. è²¬ä»»è€…åˆ¤æ–­ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å±¥æ­´

```prisma
model ResponsibilityAction {
  id              String    @id @default(cuid())
  postId          String

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±
  actionType      String    // 'approve_levelup' | 'reject' | 'hold' | 'department_matter' | 'extend_deadline'
  actionBy        String    // è²¬ä»»è€…ã®employeeId
  actionByName    String?   // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  actionByLevel   Int       // è²¬ä»»è€…ã®æ¨©é™Level

  // å¯¾è±¡ãƒ¬ãƒ™ãƒ«
  fromLevel       String?   // å¤‰æ›´å‰ãƒ¬ãƒ™ãƒ«ï¼ˆãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã®å ´åˆï¼‰
  toLevel         String?   // å¤‰æ›´å¾Œãƒ¬ãƒ™ãƒ«ï¼ˆãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã®å ´åˆï¼‰

  // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
  feedback        String?   // å´ä¸‹ç†ç”±ãƒ»ä¿ç•™ç†ç”±ãƒ»éƒ¨ç½²æ¡ˆä»¶åŒ–ç†ç”±

  // æœŸé™æƒ…å ±ï¼ˆå»¶é•·ã®å ´åˆï¼‰
  newDeadline     DateTime? // æ–°ã—ã„æœŸé™
  extensionReason String?   // å»¶é•·ç†ç”±

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  actionAt        DateTime  @default(now())

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  post            Post      @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@index([postId])
  @@index([actionBy])
  @@index([actionType])
  @@index([actionAt])
}
```

### 3. è­°é¡Œææ¡ˆæ›¸

```prisma
model ProposalDocument {
  id                   String    @id @default(cuid())
  postId               String

  // åŸºæœ¬æƒ…å ±
  title                String
  summary              String    // ææ¡ˆæ¦‚è¦ï¼ˆ100-300å­—ï¼‰
  agendaLevel          String    // å¯¾è±¡ã¨ãªã‚‹è­°é¡Œãƒ¬ãƒ™ãƒ«
  targetCommittee      String?   // æå‡ºå…ˆå§”å“¡ä¼š

  // è‡ªå‹•ç”Ÿæˆãƒ‡ãƒ¼ã‚¿
  voteAnalysis         Json      // VoteAnalysiså‹ï¼ˆç·æŠ•ç¥¨æ•°ã€æ”¯æŒç‡ã€éƒ¨ç½²åˆ¥åˆ†æï¼‰
  commentAnalysis      Json      // CommentAnalysiså‹ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆåˆ†é¡ã€ä¸»è¦æ„è¦‹ï¼‰

  // ææ¡ˆæ›¸å†…å®¹
  background           String?   // èƒŒæ™¯ãƒ»ç¾çŠ¶èª²é¡Œ
  proposal             String?   // ææ¡ˆå†…å®¹
  expectedOutcome      String?   // æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ
  implementationPlan   String?   // å®Ÿæ–½è¨ˆç”»
  budgetEstimate       Float?    // äºˆç®—è¦‹ç©ã‚‚ã‚Š
  risks                String?   // ãƒªã‚¹ã‚¯ãƒ»æ‡¸å¿µäº‹é …

  // æ¨å¥¨ãƒ¬ãƒ™ãƒ«
  recommendationLevel  String?   // 'strongly_recommend' | 'recommend' | 'neutral' | 'not_recommend'
  recommendationReason String?   // æ¨å¥¨ç†ç”±

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status               String    @default("draft") // 'draft' | 'under_review' | 'ready' | 'submitted' | 'approved' | 'rejected'

  // ä½œæˆè€…ãƒ»æ—¥æ™‚
  createdBy            String    // employeeId
  createdByName        String?   // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  createdDate          DateTime  @default(now())
  updatedDate          DateTime  @updatedAt
  submittedDate        DateTime? // å§”å“¡ä¼šæå‡ºæ—¥

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  post                 Post      @relation(fields: [postId], references: [id], onDelete: Cascade)
  submissionRequests   SubmissionRequest[]

  @@index([postId])
  @@index([status])
  @@index([agendaLevel])
}
```

### 4. å§”å“¡ä¼šæå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆ

```prisma
model SubmissionRequest {
  id              String    @id @default(cuid())
  documentId      String
  postId          String    // è¿½è·¡ç”¨

  // ãƒªã‚¯ã‚¨ã‚¹ãƒˆæƒ…å ±
  requestedBy     String    // Level 7+ ã®employeeId
  requestedByName String?   // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  requestedByLevel Int      // Level 7+
  requestedDate   DateTime  @default(now())
  targetCommittee String    // æå‡ºå…ˆå§”å“¡ä¼šå

  // æ‰¿èªæƒ…å ±
  status          String    @default("pending") // 'pending' | 'approved' | 'rejected'
  reviewedBy      String?   // Level 8+ ã®employeeId
  reviewedByName  String?   // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  reviewedByLevel Int?      // Level 8+
  reviewedDate    DateTime?
  reviewNotes     String?   // æ‰¿èªã‚³ãƒ¡ãƒ³ãƒˆ or å´ä¸‹ç†ç”±

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  document        ProposalDocument @relation(fields: [documentId], references: [id], onDelete: Cascade)
  post            Post             @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@index([documentId])
  @@index([postId])
  @@index([status])
  @@index([requestedBy])
  @@index([reviewedBy])
}
```

### 5. æŠ•ç¨¿ç®¡ç†ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

```prisma
model PostManagementTimeline {
  id          String    @id @default(cuid())
  postId      String

  // ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±
  eventType   String    // 'level_upgraded' | 'deadline_set' | 'deadline_extended' | 'responsibility_action' | 'document_created' | 'committee_submitted' | 'decision_made'
  title       String    // ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒˆãƒ«
  description String?   // è©³ç´°èª¬æ˜

  // ã‚¢ã‚¯ã‚¿ãƒ¼æƒ…å ±
  actorId     String?   // employeeIdï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
  actorName   String?   // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  actorLevel  Int?      // æ¨©é™Level

  // ãƒ¬ãƒ™ãƒ«æƒ…å ±ï¼ˆãƒ¬ãƒ™ãƒ«æ˜‡æ ¼ã®å ´åˆï¼‰
  fromLevel   String?
  toLevel     String?

  // ãã®ä»–ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata    Json?     // ã‚¤ãƒ™ãƒ³ãƒˆå›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  eventAt     DateTime  @default(now())

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  post        Post      @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@index([postId])
  @@index([eventType])
  @@index([eventAt])
}
```

### 6. å§”å“¡ä¼šãƒã‚¹ã‚¿ãƒ¼ï¼ˆå‚ç…§ç”¨ï¼‰

```prisma
model Committee {
  id          String    @id @default(cuid())

  // å§”å“¡ä¼šæƒ…å ±
  name        String    @unique // "åŒ»ç™‚å®‰å…¨å§”å“¡ä¼š"
  category    String    // "åŒ»ç™‚å®‰å…¨ãƒ»å“è³ª" | "æ¥­å‹™æ”¹å–„" | "äººäº‹ãƒ»åŠ´å‹™" | "çµŒå–¶ãƒ»é‹å–¶" | "ãã®ä»–"
  description String?   // å§”å“¡ä¼šã®èª¬æ˜

  // æ¨©é™è¨­å®š
  minLevel    Int       @default(7)  // æå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆæœ€ä½Level
  approvalLevel Int     @default(8)  // æ‰¿èªå¿…è¦Level

  // é–‹å‚¬æƒ…å ±
  meetingFrequency String? // "æœˆ1å›" | "éš”é€±" | "éšæ™‚"
  nextMeetingDate  DateTime?

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  isActive    Boolean   @default(true)

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([category])
  @@index([isActive])
}
```

---

## APIè¨­è¨ˆ

### VoiceDriveå†…éƒ¨APIï¼ˆ8å€‹ï¼‰

#### 1. POST /api/proposal-management/actions
**è²¬ä»»è€…åˆ¤æ–­ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "postId": "post-123",
  "actionType": "approve_levelup" | "reject" | "hold" | "department_matter" | "extend_deadline",
  "actionBy": "OH-NS-2024-001",
  "actionByLevel": 8,
  "feedback": "æ‰¿èªç†ç”±ãƒ»å´ä¸‹ç†ç”±ãƒ»ä¿ç•™ç†ç”±",
  "newDeadline": "2025-10-15T23:59:59Z",  // å»¶é•·ã®å ´åˆ
  "extensionReason": "ã•ã‚‰ãªã‚‹æ„è¦‹åé›†ã®ãŸã‚"  // å»¶é•·ã®å ´åˆ
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "action": {
    "id": "action-456",
    "postId": "post-123",
    "actionType": "approve_levelup",
    "fromLevel": "DEPT_REVIEW",
    "toLevel": "DEPT_AGENDA",
    "actionBy": "OH-NS-2024-001",
    "actionAt": "2025-10-09T14:30:00Z"
  },
  "updatedPost": {
    "id": "post-123",
    "agendaLevel": "DEPT_AGENDA",
    "agendaScore": 75,
    "responsibleLevel": 8
  }
}
```

#### 2. GET /api/proposal-management/posts
**ç®¡è½„æŠ•ç¨¿ä¸€è¦§å–å¾—ï¼ˆæ¨©é™åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ï¼‰**

ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
```
?userLevel=8
&filter=managed | viewable
&agendaLevel=DEPT_AGENDA
&status=awaiting_decision | voting | approved
&limit=50
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "posts": [
    {
      "id": "post-123",
      "content": "å¤œå‹¤å¼•ç¶™ãæ™‚é–“ã®å»¶é•·ææ¡ˆ",
      "agendaLevel": "DEPT_AGENDA",
      "agendaScore": 75,
      "responsibilityStatus": "awaiting_decision",
      "responsibleLevel": 8,
      "deadline": "2025-10-05T23:59:59Z",
      "isDeadlinePassed": true,
      "author": {
        "employeeId": "OH-NS-2024-005",
        "name": "å±±ç”°èŠ±å­",
        "department": "çœ‹è­·éƒ¨"
      },
      "voteStats": {
        "totalVotes": 34,
        "supportRate": 85
      },
      "permission": {
        "canEdit": true,
        "canComment": true,
        "role": "owner"
      }
    }
  ],
  "total": 120,
  "managedCount": 15,
  "viewableCount": 120
}
```

#### 3. POST /api/proposal-documents/generate
**è­°é¡Œææ¡ˆæ›¸è‡ªå‹•ç”Ÿæˆ**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "postId": "post-123",
  "createdBy": "OH-NS-2024-010",
  "agendaLevel": "DEPT_AGENDA",
  "targetCommittee": "æ–½è¨­é‹å–¶å§”å“¡ä¼š"
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "document": {
    "id": "doc-789",
    "postId": "post-123",
    "title": "å¤œå‹¤å¼•ç¶™ãæ™‚é–“å»¶é•·ã«é–¢ã™ã‚‹ææ¡ˆ",
    "summary": "å¤œå‹¤å¼•ç¶™ãæ™‚é–“ã‚’15åˆ†å»¶é•·ã—ã€æ‚£è€…æƒ…å ±ã®è©³ç´°å…±æœ‰ã‚’å®Ÿç¾ã™ã‚‹ææ¡ˆ",
    "voteAnalysis": {
      "totalVotes": 34,
      "supportRate": 85,
      "byDepartment": [...]
    },
    "commentAnalysis": {
      "totalComments": 12,
      "supportComments": 8,
      "concernComments": 4,
      "keyComments": [...]
    },
    "background": "ç¾çŠ¶ã®å¼•ç¶™ãæ™‚é–“ã§ã¯æƒ…å ±å…±æœ‰ãŒä¸ååˆ†...",
    "proposal": "å¼•ç¶™ãæ™‚é–“ã‚’15åˆ†å»¶é•·ã—ã€ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’å°å…¥...",
    "expectedOutcome": "åŒ»ç™‚å®‰å…¨æ€§ã®å‘ä¸Šã€è·å“¡ã®è² æ‹…è»½æ¸›...",
    "recommendationLevel": "recommend",
    "status": "draft"
  }
}
```

#### 4. GET /api/proposal-documents/:documentId
**è­°é¡Œææ¡ˆæ›¸å–å¾—**

ãƒ¬ã‚¹ãƒãƒ³ã‚¹: ä¸Šè¨˜documentæ§‹é€ ã¨åŒæ§˜

#### 5. PUT /api/proposal-documents/:documentId
**è­°é¡Œææ¡ˆæ›¸ç·¨é›†**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "background": "æ›´æ–°ã•ã‚ŒãŸèƒŒæ™¯èª¬æ˜...",
  "proposal": "æ›´æ–°ã•ã‚ŒãŸææ¡ˆå†…å®¹...",
  "budgetEstimate": 500000,
  "status": "ready"
}
```

#### 6. POST /api/committee-submissions/requests
**å§”å“¡ä¼šæå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆï¼ˆLevel 7+ï¼‰**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "documentId": "doc-789",
  "postId": "post-123",
  "requestedBy": "OH-NS-2024-015",
  "requestedByLevel": 7,
  "targetCommittee": "æ¥­å‹™æ”¹å–„å§”å“¡ä¼š"
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "request": {
    "id": "req-101",
    "documentId": "doc-789",
    "status": "pending",
    "requestedBy": "OH-NS-2024-015",
    "requestedDate": "2025-10-09T15:00:00Z",
    "targetCommittee": "æ¥­å‹™æ”¹å–„å§”å“¡ä¼š"
  }
}
```

#### 7. POST /api/committee-submissions/requests/:requestId/approve
**æå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆæ‰¿èªï¼ˆLevel 8+ï¼‰**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "reviewedBy": "OH-NS-2024-020",
  "reviewedByLevel": 8,
  "reviewNotes": "æ‰¿èªã—ã¾ã™ã€‚å§”å“¡ä¼šã§å¯©è­°ã—ã¦ãã ã•ã„ã€‚"
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "request": {
    "id": "req-101",
    "status": "approved",
    "reviewedBy": "OH-NS-2024-020",
    "reviewedDate": "2025-10-09T16:00:00Z"
  },
  "committeeSubmission": {
    "postId": "post-123",
    "committeeStatus": "submitted",
    "targetCommittee": "æ¥­å‹™æ”¹å–„å§”å“¡ä¼š",
    "submittedAt": "2025-10-09T16:00:00Z"
  }
}
```

#### 8. GET /api/post-management/timeline/:postId
**æŠ•ç¨¿ç®¡ç†ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å–å¾—**

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "timeline": [
    {
      "id": "timeline-1",
      "eventType": "level_upgraded",
      "title": "éƒ¨ç½²æ¤œè¨ã«æ˜‡æ ¼",
      "description": "ã‚¹ã‚³ã‚¢30ç‚¹ã‚’é”æˆ",
      "fromLevel": "PENDING",
      "toLevel": "DEPT_REVIEW",
      "eventAt": "2025-10-05T10:00:00Z"
    },
    {
      "id": "timeline-2",
      "eventType": "deadline_extended",
      "title": "æŠ•ç¥¨æœŸé™å»¶é•·",
      "description": "ã•ã‚‰ãªã‚‹æ„è¦‹åé›†ã®ãŸã‚æœŸé™ã‚’3æ—¥å»¶é•·",
      "actorName": "ä½è—¤ä¸»ä»»",
      "actorLevel": 6,
      "eventAt": "2025-10-06T14:00:00Z"
    },
    {
      "id": "timeline-3",
      "eventType": "responsibility_action",
      "title": "ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—æ‰¿èª",
      "description": "éƒ¨ç½²è­°é¡Œã¸ã®æ˜‡æ ¼ã‚’æ‰¿èª",
      "actorName": "ç”°ä¸­å¸«é•·",
      "actorLevel": 8,
      "fromLevel": "DEPT_REVIEW",
      "toLevel": "DEPT_AGENDA",
      "eventAt": "2025-10-08T11:00:00Z"
    },
    {
      "id": "timeline-4",
      "eventType": "document_created",
      "title": "è­°é¡Œææ¡ˆæ›¸ä½œæˆ",
      "description": "æ–½è¨­é‹å–¶å§”å“¡ä¼šå‘ã‘ææ¡ˆæ›¸ã‚’ä½œæˆ",
      "actorName": "éˆ´æœ¨å‰¯ä¸»ä»»",
      "actorLevel": 7,
      "eventAt": "2025-10-08T15:00:00Z"
    }
  ]
}
```

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é€£æºAPIï¼ˆ2å€‹ï¼‰

#### API-PM-M-1: GET /api/employees/:employeeId
**è·å“¡åŸºæœ¬æƒ…å ±å–å¾—**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```
GET /api/employees/OH-NS-2024-001
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "employeeId": "OH-NS-2024-001",
  "name": "å±±ç”°å¤ªéƒ",
  "department": "çœ‹è­·éƒ¨",
  "facilityId": "tategami_hospital",
  "permissionLevel": 8,
  "position": "å¸«é•·",
  "hierarchyLevel": 5
}
```

**Phase**: 1
**å„ªå…ˆåº¦**: é«˜
**è¦‹ç©å·¥æ•°**: 2æ—¥
**è¦‹ç©é‡‘é¡**: Â¥160,000

#### API-PM-M-2: GET /api/organization/structure
**çµ„ç¹”éšå±¤æ§‹é€ å–å¾—**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```
GET /api/organization/structure?facilityId=tategami_hospital
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "facilityId": "tategami_hospital",
  "facilityName": "ãŸã¦ãŒã¿ç—…é™¢",
  "departments": [
    {
      "departmentId": "nursing",
      "departmentName": "çœ‹è­·éƒ¨",
      "parentDepartmentId": null,
      "level": 1,
      "responsibleLevel": 8
    },
    {
      "departmentId": "nursing_ward_a",
      "departmentName": "çœ‹è­·éƒ¨Aç—…æ£Ÿ",
      "parentDepartmentId": "nursing",
      "level": 2,
      "responsibleLevel": 6
    }
  ]
}
```

**Phase**: 2
**å„ªå…ˆåº¦**: ä¸­
**è¦‹ç©å·¥æ•°**: 3æ—¥
**è¦‹ç©é‡‘é¡**: Â¥240,000

### Webhooké€šçŸ¥ï¼ˆ1å€‹ï¼‰

#### WH-PM-M-1: POST /webhook/committee-submission
**å§”å“¡ä¼šæå‡ºé€šçŸ¥**

åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸ã®é€šçŸ¥:
```json
{
  "event": "committee_submission",
  "timestamp": "2025-10-09T16:00:00Z",
  "data": {
    "postId": "post-123",
    "documentId": "doc-789",
    "title": "å¤œå‹¤å¼•ç¶™ãæ™‚é–“å»¶é•·ã«é–¢ã™ã‚‹ææ¡ˆ",
    "targetCommittee": "æ¥­å‹™æ”¹å–„å§”å“¡ä¼š",
    "submittedBy": "OH-NS-2024-020",
    "submittedByName": "ç”°ä¸­å¸«é•·",
    "agendaLevel": "DEPT_AGENDA",
    "supportRate": 85,
    "totalVotes": 34,
    "documentUrl": "https://voicedrive.app/proposal-document/doc-789",
    "urgency": "medium"
  },
  "signature": "HMAC-SHA256-SIGNATURE"
}
```

**Phase**: 2
**å„ªå…ˆåº¦**: é«˜
**è¦‹ç©å·¥æ•°**: 5æ—¥
**è¦‹ç©é‡‘é¡**: Â¥400,000

---

## å®Ÿè£…å„ªå…ˆåº¦

### Phase 1: ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆ2é€±é–“ï¼‰- Â¥1,280,000

#### Week 1-2: åŸºæœ¬æŠ•ç¨¿ç®¡ç†æ©Ÿèƒ½
1. **Postæ‹¡å¼µãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ** (2æ—¥)
   - agendaScore, agendaLevel, agendaDeadlineè¿½åŠ 
   - responsibilityStatus, responsibleLevelè¿½åŠ 
   - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

2. **ResponsibilityActionå®Ÿè£…** (2æ—¥)
   - ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
   - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨˜éŒ²APIå®Ÿè£…

3. **ProposalManagementPageçµ±åˆ** (3æ—¥)
   - æ¨©é™åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…
   - ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ¢ãƒ¼ãƒ‰ãƒ»è­°é¡Œææ¡ˆæ›¸ãƒ¢ãƒ¼ãƒ‰å®Ÿè£…
   - ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å®Ÿãƒ‡ãƒ¼ã‚¿ã¸ç§»è¡Œ

4. **æœŸé™ç®¡ç†å®Ÿè£…** (2æ—¥)
   - æŠ•ç¥¨æœŸé™è¨­å®šãƒ»å»¶é•·æ©Ÿèƒ½
   - æœŸé™åˆ‡ã‚Œæ¤œçŸ¥ãƒ»é€šçŸ¥

5. **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ è·å“¡æƒ…å ±APIé€£æº** (3æ—¥)
   - API-PM-M-1å®Ÿè£…ä¾é ¼ãƒ»ãƒ†ã‚¹ãƒˆ
   - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹å®Ÿè£…

**æˆæœç‰©**:
- Level 5-13ã®è²¬ä»»è€…ãŒæŠ•ç¨¿ã‚’ç®¡ç†ã§ãã‚‹
- æœŸé™ç®¡ç†ãƒ»å»¶é•·æ©Ÿèƒ½å‹•ä½œ
- è²¬ä»»è€…åˆ¤æ–­ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œå¯èƒ½

### Phase 2: è­°é¡Œææ¡ˆæ›¸ãƒ»å§”å“¡ä¼šæå‡ºï¼ˆ2é€±é–“ï¼‰- Â¥1,440,000

#### Week 3-4: ææ¡ˆæ›¸ç”Ÿæˆãƒ»å§”å“¡ä¼šãƒ•ãƒ­ãƒ¼
1. **ProposalDocumentå®Ÿè£…** (3æ—¥)
   - ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
   - è‡ªå‹•ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
   - æŠ•ç¥¨åˆ†æãƒ»ã‚³ãƒ¡ãƒ³ãƒˆåˆ†æçµ±åˆ

2. **SubmissionRequestå®Ÿè£…** (3æ—¥)
   - Level 7+ æå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆæ©Ÿèƒ½
   - Level 8+ æ‰¿èªæ©Ÿèƒ½

3. **CommitteeManagementPageçµ±åˆ** (2æ—¥)
   - æå‡ºãƒªã‚¯ã‚¨ã‚¹ãƒˆä¸€è¦§è¡¨ç¤º
   - æ‰¿èªãƒ»å´ä¸‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

4. **Committee ãƒã‚¹ã‚¿ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«** (1æ—¥)
   - 12å§”å“¡ä¼šãƒ‡ãƒ¼ã‚¿ç™»éŒ²
   - å§”å“¡ä¼šæƒ…å ±ç®¡ç†

5. **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ çµ„ç¹”æ§‹é€ APIé€£æº** (2æ—¥)
   - API-PM-M-2å®Ÿè£…ä¾é ¼ãƒ»ãƒ†ã‚¹ãƒˆ

6. **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ Webhookå®Ÿè£…** (3æ—¥)
   - WH-PM-M-1å®Ÿè£…ä¾é ¼ãƒ»ãƒ†ã‚¹ãƒˆ
   - HMACç½²åæ¤œè¨¼

**æˆæœç‰©**:
- è­°é¡Œææ¡ˆæ›¸è‡ªå‹•ç”Ÿæˆæ©Ÿèƒ½å‹•ä½œ
- Level 7+ â†’ Level 8+ å§”å“¡ä¼šæå‡ºãƒ•ãƒ­ãƒ¼å‹•ä½œ
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸å§”å“¡ä¼šæå‡ºé€šçŸ¥

### Phase 3: ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ»é«˜åº¦æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰- Â¥560,000

#### Week 5: å±¥æ­´ç®¡ç†ãƒ»åˆ†ææ©Ÿèƒ½
1. **PostManagementTimelineå®Ÿè£…** (2æ—¥)
   - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆè¨˜éŒ²
   - UIçµ±åˆï¼ˆProposalAnalysisCardï¼‰

2. **çµ±è¨ˆãƒ»åˆ†ææ©Ÿèƒ½** (2æ—¥)
   - éƒ¨ç½²åˆ¥æ”¯æŒç‡åˆ†æ
   - ãƒ¬ãƒ™ãƒ«åˆ¥æ»ç•™æ™‚é–“åˆ†æ
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰çµ±åˆ

3. **é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ** (1æ—¥)
   - æœŸé™åˆ‡ã‚Œé€šçŸ¥
   - è²¬ä»»è€…åˆ¤æ–­å¾…ã¡é€šçŸ¥
   - å§”å“¡ä¼šæå‡ºé€šçŸ¥

4. **ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°** (2æ—¥)
   - çµ±åˆãƒ†ã‚¹ãƒˆ
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

**æˆæœç‰©**:
- å®Œå…¨ãªæŠ•ç¨¿ç®¡ç†è¿½è·¡
- çµ±è¨ˆãƒ»åˆ†ææ©Ÿèƒ½
- é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ é€£æº

---

## è¦‹ç©ã‚‚ã‚Šã‚µãƒãƒªãƒ¼

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | å†…å®¹ | VoiceDriveå·¥æ•° | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å·¥æ•° | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é‡‘é¡ |
|---------|------|------|----------------|-----------------|----------------|
| **Phase 1** | 2é€±é–“ | åŸºæœ¬æŠ•ç¨¿ç®¡ç† | 12æ—¥ | 2æ—¥ | Â¥160,000 |
| **Phase 2** | 2é€±é–“ | ææ¡ˆæ›¸ãƒ»å§”å“¡ä¼š | 14æ—¥ | 8æ—¥ | Â¥640,000 |
| **Phase 3** | 1é€±é–“ | ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãƒ»åˆ†æ | 7æ—¥ | 0æ—¥ | Â¥0 |
| **åˆè¨ˆ** | **5é€±é–“** | **å…¨æ©Ÿèƒ½** | **33æ—¥** | **10æ—¥** | **Â¥800,000** |

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ å¿…è¦å·¥æ•°**: 10æ—¥ï¼ˆ2 APIs + 1 Webhookï¼‰
**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ è¦‹ç©é‡‘é¡**: Â¥800,000
**VoiceDriveãƒãƒ¼ãƒ å·¥æ•°**: 33æ—¥

**ç‰¹è¨˜äº‹é …**:
- PostTrackingã¨æ¯”è¼ƒã—ã¦åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜åº¦ãŒé«˜ã„ï¼ˆAPI 2å€‹ + Webhook 1å€‹ï¼‰
- å§”å“¡ä¼šæå‡ºWebhookã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å§”å“¡ä¼šç®¡ç†æ©Ÿèƒ½ã¨ã®é€£æºãŒå¿…è¦
- çµ„ç¹”éšå±¤APIã¯è¤‡é›‘ãªéšå±¤æ§‹é€ ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šå·¥æ•°ãŒå¤§ãã„

---

## ç¢ºèªäº‹é …ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¸ï¼‰

### æŠ€è¡“çš„ç¢ºèª
1. **çµ„ç¹”éšå±¤æ§‹é€ API**: ç¾åœ¨ã®åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«çµ„ç¹”éšå±¤ãƒ‡ãƒ¼ã‚¿ã¯å­˜åœ¨ã—ã¾ã™ã‹ï¼Ÿ
2. **å§”å“¡ä¼šãƒã‚¹ã‚¿ãƒ¼**: 12ã®å§”å“¡ä¼šæƒ…å ±ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ
3. **å§”å“¡ä¼šæå‡ºWebhook**: å§”å“¡ä¼šæå‡ºé€šçŸ¥ã‚’å—ã‘å–ã‚‹åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯å®Ÿè£…å¯èƒ½ã§ã™ã‹ï¼Ÿ
4. **éšå±¤ãƒ¬ãƒ™ãƒ«å®šç¾©**: departmentéšå±¤ãƒ¬ãƒ™ãƒ«ã¨è²¬ä»»è€…permissionLevelã®å¯¾å¿œé–¢ä¿‚ã¯æ˜ç¢ºã§ã™ã‹ï¼Ÿ
5. **å§”å“¡ä¼šæ±ºè­°ãƒ‡ãƒ¼ã‚¿**: å§”å“¡ä¼šã§ã®å¯©è­°çµæœï¼ˆæ¡æŠãƒ»è¦æ”¹å–„ãƒ»å´ä¸‹ï¼‰ã‚’VoiceDriveã«è¿”ã™ä»•çµ„ã¿ã¯å¿…è¦ã§ã™ã‹ï¼Ÿ

### é‹ç”¨çš„ç¢ºèª
6. **æ¨©é™ãƒ¬ãƒ™ãƒ«å¤‰æ›´**: è·å“¡ã®æ¨©é™Levelå¤‰æ›´æ™‚ã€VoiceDriveã¸ã®é€šçŸ¥ã¯å¿…è¦ã§ã™ã‹ï¼Ÿ
7. **çµ„ç¹”æ”¹ç·¨**: éƒ¨ç½²çµ±å»ƒåˆæ™‚ã€VoiceDriveã®è­°é¡Œç®¡ç†ã«ã©ã†å½±éŸ¿ã—ã¾ã™ã‹ï¼Ÿ
8. **å§”å“¡ä¼šé–‹å‚¬é »åº¦**: å„å§”å“¡ä¼šã®é–‹å‚¬é »åº¦ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯VoiceDriveã§ç®¡ç†ã™ã¹ãã§ã™ã‹ï¼Ÿ
9. **æå‡ºæ›¸é¡å½¢å¼**: è­°é¡Œææ¡ˆæ›¸ã®PDFå‡ºåŠ›æ©Ÿèƒ½ã¯å¿…è¦ã§ã™ã‹ï¼Ÿ
10. **æ±ºè£ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã«æ—¢å­˜ã®æ±ºè£ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒã‚ã‚‹å ´åˆã€çµ±åˆã¯å¿…è¦ã§ã™ã‹ï¼Ÿ

### ãƒ‡ãƒ¼ã‚¿é€£æºç¢ºèª
11. **è·å“¡æƒ…å ±åŒæœŸ**: employeeId, permissionLevelã®å¤‰æ›´ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§VoiceDriveã«åæ˜ ã™ã‚‹ä»•çµ„ã¿ã¯å¿…è¦ã§ã™ã‹ï¼Ÿ
12. **éƒ¨ç½²ã‚³ãƒ¼ãƒ‰ä½“ç³»**: departmentIdã¨departmentNameã®å¯¾å¿œè¡¨ã¯å…±æœ‰ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ
13. **æ–½è¨­ID**: facilityIdã®å‘½åè¦å‰‡ãƒ»ä¸€è¦§ã¯å…±æœ‰ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ
14. **æ¨©é™Levelå®šç¾©**: Level 1-13ã®è©³ç´°ãªå®šç¾©ãƒ»å½¹è·å¯¾å¿œè¡¨ã¯æ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ
15. **å§”å“¡ä¼šãƒ¡ãƒ³ãƒãƒ¼**: å„å§”å“¡ä¼šã®å§”å“¡ãƒªã‚¹ãƒˆã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ

---

## æ·»ä»˜è³‡æ–™

### A. è²¬ä»»è€…åˆ¤æ–­ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆè©³ç´°
ï¼ˆProposalAnalysisCard.tsx ã®è²¬ä»»è€…ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯å›³ï¼‰

### B. å§”å“¡ä¼šæå‡ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼è©³ç´°
ï¼ˆCommitteeSubmission.tsx ã®æå‡ºãƒ•ãƒ­ãƒ¼å›³ï¼‰

### C. æ¨©é™ãƒãƒˆãƒªã‚¯ã‚¹è©³ç´°è¡¨
ï¼ˆProposalPermissionService.ts ã®æ¨©é™åˆ¤å®šãƒ«ãƒ¼ãƒ«ï¼‰

### D. ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆç¨®åˆ¥ä¸€è¦§
ï¼ˆPostManagementTimeline ã® eventType å®šç¾©ï¼‰

---

**ä½œæˆè€…**: Claude (AI Assistant)
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: VoiceDriveé–‹ç™ºãƒãƒ¼ãƒ 
**æ‰¿èª**: åŒ»ç™‚è·å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ 

**æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:
1. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¸ç¢ºèªäº‹é …å›ç­”ä¾é ¼
2. Phase 1å®Ÿè£…è¨ˆç”»è©³ç´°åŒ–
3. ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ä¼šè­°è¨­å®š
