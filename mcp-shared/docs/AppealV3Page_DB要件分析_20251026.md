# AppealV3Page DBè¦ä»¶åˆ†æ

**ä½œæˆæ—¥**: 2025å¹´10æœˆ26æ—¥
**å¯¾è±¡ãƒšãƒ¼ã‚¸**: AppealV3Page (è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ç•°è­°ç”³ã—ç«‹ã¦ãƒšãƒ¼ã‚¸)
**URL**: https://voicedrive-v100.vercel.app/appeal-v3

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒšãƒ¼ã‚¸æ¦‚è¦](#ãƒšãƒ¼ã‚¸æ¦‚è¦)
2. [ä¸»è¦æ©Ÿèƒ½](#ä¸»è¦æ©Ÿèƒ½)
3. [ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼](#ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼)
4. [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹](#ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹)
5. [ç¾åœ¨ã®DBå®Ÿè£…çŠ¶æ³](#ç¾åœ¨ã®dbå®Ÿè£…çŠ¶æ³)
6. [ä¸è¶³é …ç›®ã®æ´—ã„å‡ºã—](#ä¸è¶³é …ç›®ã®æ´—ã„å‡ºã—)
7. [APIè¦ä»¶](#apiè¦ä»¶)
8. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶)
9. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶](#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶)

---

## ãƒšãƒ¼ã‚¸æ¦‚è¦

### ç›®çš„
åŒ»ç™‚è·å“¡ãŒè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ100ç‚¹æº€ç‚¹ãƒ»7æ®µéšã‚°ãƒ¬ãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ï¼‰ã«ã‚ˆã‚‹è©•ä¾¡çµæœã«å¯¾ã—ã¦ç•°è­°ç”³ã—ç«‹ã¦ã‚’è¡Œã„ã€ãã®é€²æ—çŠ¶æ³ã‚’ç¢ºèªã™ã‚‹ãƒšãƒ¼ã‚¸ã€‚

### è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜
- **è©•ä¾¡æ–¹å¼**: 100ç‚¹æº€ç‚¹ï¼ˆ0-100ç‚¹ï¼‰
- **ã‚°ãƒ¬ãƒ¼ãƒ‰**: 7æ®µéšï¼ˆS, A+, A, B+, B, C, Dï¼‰
- **ã‚°ãƒ¬ãƒ¼ãƒ‰åŸºæº–**:
  - S: 90-100ç‚¹ï¼ˆæœ€å„ªç§€ï¼‰
  - A+: 80-89ç‚¹ï¼ˆå„ªç§€+ï¼‰
  - A: 70-79ç‚¹ï¼ˆå„ªç§€ï¼‰
  - B+: 60-69ç‚¹ï¼ˆè‰¯å¥½+ï¼‰
  - B: 50-59ç‚¹ï¼ˆè‰¯å¥½ï¼‰
  - C: 40-49ç‚¹ï¼ˆå¯ï¼‰
  - D: 0-39ç‚¹ï¼ˆè¦æ”¹å–„ï¼‰

### ãƒ¦ãƒ¼ã‚¶ãƒ¼
- **å¯¾è±¡**: å…¨åŒ»ç™‚è·å“¡ï¼ˆè©•ä¾¡ã‚’å—ã‘ã‚‹ã™ã¹ã¦ã®è·å“¡ï¼‰
- **æ¨©é™**: è‡ªåˆ†è‡ªèº«ã®è©•ä¾¡ã«å¯¾ã™ã‚‹ç•°è­°ç”³ã—ç«‹ã¦ã®ã¿å¯èƒ½
- **ã‚¢ã‚¯ã‚»ã‚¹**: è©•ä¾¡é–‹ç¤ºå¾Œ14æ—¥ä»¥å†…

### ãƒšãƒ¼ã‚¸æ§‹æˆ
```
AppealV3Page
â”œâ”€â”€ æ–°è¦ç”³ã—ç«‹ã¦ã‚¿ãƒ–ï¼ˆAppealFormV3ï¼‰
â”‚   â”œâ”€â”€ åŸºæœ¬æƒ…å ±å…¥åŠ›ï¼ˆè·å“¡IDã€è·å“¡åï¼‰
â”‚   â”œâ”€â”€ è©•ä¾¡æœŸé–“é¸æŠ
â”‚   â”œâ”€â”€ ã‚¹ã‚³ã‚¢å…¥åŠ›ï¼ˆç¾åœ¨/å¸Œæœ›ï¼‰
â”‚   â”œâ”€â”€ ã‚°ãƒ¬ãƒ¼ãƒ‰è‡ªå‹•è¨ˆç®—ãƒ»è¡¨ç¤º
â”‚   â”œâ”€â”€ ç”³ã—ç«‹ã¦ã‚«ãƒ†ã‚´ãƒªé¸æŠ
â”‚   â”œâ”€â”€ ç”³ã—ç«‹ã¦ç†ç”±å…¥åŠ›ï¼ˆ100-2000æ–‡å­—ï¼‰
â”‚   â”œâ”€â”€ è¨¼æ‹ æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆæœ€å¤§5ãƒ•ã‚¡ã‚¤ãƒ«ã€15MBï¼‰
â”‚   â”œâ”€â”€ å¤‰æ›´ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆã‚¹ã‚³ã‚¢å·®ã€ã‚°ãƒ¬ãƒ¼ãƒ‰å¤‰æ›´ã€å„ªå…ˆåº¦ï¼‰
â”‚   â””â”€â”€ ä¸‹æ›¸ãæ©Ÿèƒ½ï¼ˆ30ç§’è‡ªå‹•ä¿å­˜ï¼‰
â””â”€â”€ ç”³ã—ç«‹ã¦çŠ¶æ³ã‚¿ãƒ–ï¼ˆAppealStatusListV3ï¼‰
    â”œâ”€â”€ ç•°è­°ç”³ã—ç«‹ã¦ä¸€è¦§è¡¨ç¤º
    â”œâ”€â”€ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆå—ä»˜ä¸­ã€å¯©æŸ»ä¸­ã€è¿½åŠ æƒ…å ±è¦è«‹ã€è§£æ±ºæ¸ˆã¿ç­‰ï¼‰
    â”œâ”€â”€ å„ªå…ˆåº¦è¡¨ç¤ºï¼ˆHIGH/MEDIUM/LOWï¼‰
    â”œâ”€â”€ ã‚¹ã‚³ã‚¢ãƒ»ã‚°ãƒ¬ãƒ¼ãƒ‰å¤‰æ›´è¡¨ç¤º
    â””â”€â”€ è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
```

---

## ä¸»è¦æ©Ÿèƒ½

### 1. æ–°è¦ç•°è­°ç”³ã—ç«‹ã¦ï¼ˆAppealFormV3ï¼‰

#### 1.1 åŸºæœ¬æƒ…å ±å…¥åŠ›
- **è·å“¡ID**: è‡ªå‹•å…¥åŠ›ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ä¸­ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã¾ãŸã¯æ‰‹å‹•å…¥åŠ›
- **è·å“¡å**: è‡ªå‹•å…¥åŠ›ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ä¸­ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã¾ãŸã¯æ‰‹å‹•å…¥åŠ›
- **è©•ä¾¡æœŸé–“é¸æŠ**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å–å¾—ã—ãŸç”³ç«‹å¯èƒ½æœŸé–“ã®ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**:
- `useAuth()` hook: ç¾åœ¨ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
- `GET /api/v3/evaluation/periods`: è©•ä¾¡æœŸé–“ä¸€è¦§ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIï¼‰

#### 1.2 è©•ä¾¡æœŸé–“å–å¾—
- **API**: `GET http://localhost:8080/api/v3/evaluation/periods`
- **å®Ÿè£…**: AppealFormV3.tsx Line 137-152
- **ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**:
  - `status === 'active'`
  - `new Date(appealDeadline) > new Date()` (ç”³ç«‹æœŸé™å†…ã®ã¿)

#### 1.3 ã‚¹ã‚³ã‚¢ãƒ»ã‚°ãƒ¬ãƒ¼ãƒ‰å…¥åŠ›
- **ç¾åœ¨ã®ã‚¹ã‚³ã‚¢**: 0-100ã®æ•´æ•°
- **å¸Œæœ›ã™ã‚‹ã‚¹ã‚³ã‚¢**: 0-100ã®æ•´æ•°
- **ã‚°ãƒ¬ãƒ¼ãƒ‰è‡ªå‹•è¨ˆç®—**: ã‚¹ã‚³ã‚¢å¤‰æ›´æ™‚ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—ï¼ˆV3GradeUtils.getGradeFromScore()ï¼‰

**å¤‰æ›´ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**:
- ã‚¹ã‚³ã‚¢å·®: Math.abs(requestedScore - originalScore)
- ã‚°ãƒ¬ãƒ¼ãƒ‰å¤‰æ›´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ã€Œã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ—ã‚’å¸Œæœ›ï¼ˆA â†’ Sï¼‰ã€
- æ¨å®šå„ªå…ˆåº¦: ã‚¹ã‚³ã‚¢å·®15ç‚¹ä»¥ä¸Š â†’ HIGHã€8-14ç‚¹ â†’ MEDIUMã€1-7ç‚¹ â†’ LOW

#### 1.4 ç”³ã—ç«‹ã¦ã‚«ãƒ†ã‚´ãƒªé¸æŠ
- ç‚¹æ•°è¨ˆç®—ã®èª¤ã‚Šï¼ˆæœ€å„ªå…ˆï¼‰
- æˆæœã®è¦‹è½ã¨ã—ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰
- è©•ä¾¡åŸºæº–ã®ä¸æ˜ç­
- æ‰‹ç¶šãã®èª¤ã‚Š
- ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒŸã‚¹
- ãã®ä»–

#### 1.5 ç”³ã—ç«‹ã¦ç†ç”±å…¥åŠ›
- **æœ€å°æ–‡å­—æ•°**: 100æ–‡å­—
- **æœ€å¤§æ–‡å­—æ•°**: 2000æ–‡å­—
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ**: è¡¨ç¤º

#### 1.6 è¨¼æ‹ æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«æ•°**: 5ãƒ•ã‚¡ã‚¤ãƒ«
- **æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º**: 15MB
- **è¨±å¯å½¢å¼**: PDF, JPEG, PNG, GIF
- **ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰API**: `POST /api/v3/appeals/upload`

#### 1.7 ä¸‹æ›¸ãæ©Ÿèƒ½
- **è‡ªå‹•ä¿å­˜**: 30ç§’ã”ã¨
- **ä¿å­˜å…ˆ**: LocalStorageï¼ˆ`v3_appeal_draft` keyï¼‰
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: æœ€æ–°10ä»¶ä¿æŒ
- **å‰Šé™¤**: é€ä¿¡æˆåŠŸæ™‚ã«è‡ªå‹•å‰Šé™¤

#### 1.8 ç•°è­°ç”³ã—ç«‹ã¦é€ä¿¡
- **API**: `POST /api/v3/appeals/submit`
- **å®Ÿè£…**: appealServiceV3.submitAppealV3()
- **ãƒªãƒˆãƒ©ã‚¤**: æœ€å¤§3å›ã€æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼ˆ1ç§’ã€2ç§’ã€4ç§’ï¼‰

### 2. ç”³ã—ç«‹ã¦çŠ¶æ³ç¢ºèªï¼ˆAppealStatusListV3ï¼‰

#### 2.1 ç•°è­°ç”³ã—ç«‹ã¦ä¸€è¦§å–å¾—
- **API**: `GET /api/v3/appeals?employeeId={employeeId}`
- **è¡¨ç¤ºå†…å®¹**: ç”³ã—ç«‹ã¦IDã€è·å“¡æƒ…å ±ã€ã‚¹ã‚³ã‚¢ãƒ»ã‚°ãƒ¬ãƒ¼ãƒ‰ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€å„ªå…ˆåº¦ã€ç”³ã—ç«‹ã¦æ—¥

#### 2.2 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¨®åˆ¥
- SUBMITTED: å—ä»˜å®Œäº†
- UNDER_REVIEW: å¯©æŸ»ä¸­
- ADDITIONAL_INFO: è¿½åŠ æƒ…å ±è¦è«‹
- APPROVED: æ‰¿èª
- PARTIALLY_APPROVED: ä¸€éƒ¨æ‰¿èª
- REJECTED: å´ä¸‹
- WITHDRAWN: å–ã‚Šä¸‹ã’
- RESOLVED: è§£æ±ºæ¸ˆã¿

#### 2.3 è©³ç´°è¡¨ç¤º
- **API**: `GET /api/v3/appeals/:appealId/status`
- **è¡¨ç¤º**: æ‹…å½“å¯©æŸ»è€…ã€äºˆå®šå›ç­”æ—¥ã€è©³ç´°æƒ…å ±

### 3. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯å¯¾å¿œ

#### 3.1 URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `?period=2025-H1-V3`: è©•ä¾¡æœŸé–“IDè‡ªå‹•å…¥åŠ›
- `?employee=V3-TEST-E001`: è·å“¡IDè‡ªå‹•å…¥åŠ›
- `?from=medical`: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®é·ç§»ãƒ•ãƒ©ã‚°

---

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### å…¨ä½“ãƒ•ãƒ­ãƒ¼

```
è·å“¡ â†’ VoiceDrive AppealV3Page
  â†“
  1. è©•ä¾¡æœŸé–“å–å¾—ï¼ˆGET /api/v3/evaluation/periodsï¼‰
  2. ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ï¼ˆã‚¹ã‚³ã‚¢ã€ç†ç”±ç­‰ï¼‰
  3. ä¸‹æ›¸ãè‡ªå‹•ä¿å­˜ï¼ˆLocalStorageã€30ç§’ã”ã¨ï¼‰
  4. è¨¼æ‹ æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆPOST /api/v3/appeals/uploadï¼‰
  5. ç•°è­°ç”³ã—ç«‹ã¦é€ä¿¡ï¼ˆPOST /api/v3/appeals/submitï¼‰
  â†“
åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ API
  â†“
  6. ç”³ã—ç«‹ã¦IDç”Ÿæˆï¼ˆV3-APPEAL-XXXXXï¼‰
  7. å„ªå…ˆåº¦åˆ¤å®šã€æ‹…å½“å¯©æŸ»è€…å‰²ã‚Šå½“ã¦
  8. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†é–‹å§‹
  â†“
è·å“¡ â†’ ç”³ã—ç«‹ã¦çŠ¶æ³ç¢ºèª
  â†“
  9. ä¸€è¦§å–å¾—ï¼ˆGET /api/v3/appealsï¼‰
  10. è©³ç´°å–å¾—ï¼ˆGET /api/v3/appeals/:appealId/statusï¼‰
```

---

## ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ãƒ‡ãƒ¼ã‚¿ï¼ˆ100%ï¼‰

#### 1. è©•ä¾¡ãƒ‡ãƒ¼ã‚¿
- è©•ä¾¡æœŸé–“ãƒã‚¹ã‚¿
- è©•ä¾¡ã‚¹ã‚³ã‚¢ï¼ˆè·å“¡ã”ã¨ã®0-100ç‚¹ï¼‰
- è©•ä¾¡ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆS, A+, A, B+, B, C, Dï¼‰
- è©•ä¾¡è€…æƒ…å ±

#### 2. ç•°è­°ç”³ã—ç«‹ã¦ãƒã‚¹ã‚¿
- ç”³ã—ç«‹ã¦IDç”Ÿæˆï¼ˆV3-APPEAL-XXXXXï¼‰
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†
- å„ªå…ˆåº¦åˆ¤å®š
- æ‹…å½“å¯©æŸ»è€…å‰²ã‚Šå½“ã¦

#### 3. å¯©æŸ»ãƒ—ãƒ­ã‚»ã‚¹
- å¯©æŸ»å±¥æ­´
- å¯©æŸ»ã‚³ãƒ¡ãƒ³ãƒˆ
- ã‚¹ã‚³ã‚¢å¤‰æ›´çµæœ
- äºˆå®šå›ç­”æ—¥

#### 4. è¨¼æ‹ æ›¸é¡ç®¡ç†
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
- ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

### VoiceDriveç®¡ç†ãƒ‡ãƒ¼ã‚¿ï¼ˆä¸€æ™‚ä¿å­˜ã®ã¿ï¼‰

#### 1. ä¸‹æ›¸ããƒ‡ãƒ¼ã‚¿ï¼ˆLocalStorageï¼‰
- ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›å†…å®¹
- ä¿å­˜æ—¥æ™‚
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å±¥æ­´ï¼ˆæœ€æ–°10ä»¶ï¼‰

#### 2. UIã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ï¼ˆãƒ¡ãƒ¢ãƒªï¼‰
- ç¾åœ¨ã®ã‚¿ãƒ–ï¼ˆform/statusï¼‰
- ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›çŠ¶æ…‹
- ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹
- é€ä¿¡ä¸­ãƒ•ãƒ©ã‚°

#### 3. APIã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆãƒ¡ãƒ¢ãƒªï¼‰
- è©•ä¾¡æœŸé–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ã¾ã§ï¼‰
- ç”³ã—ç«‹ã¦ä¸€è¦§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆrefreshTriggerã¾ã§ï¼‰

### ãƒ‡ãƒ¼ã‚¿åŒæœŸä¸è¦

**ç†ç”±**:
- ãƒ‡ãƒ¼ã‚¿ã¯ã™ã¹ã¦åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ï¼ˆSingle Source of Truthï¼‰
- VoiceDriveå´ã¯ä¸‹æ›¸ãæ©Ÿèƒ½ã®ã¿æä¾›ï¼ˆLocalStorageï¼‰
- é€ä¿¡æˆåŠŸå¾Œã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãŒå”¯ä¸€ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

---

## ç¾åœ¨ã®DBå®Ÿè£…çŠ¶æ³

### VoiceDriveå´ãƒ†ãƒ¼ãƒ–ãƒ«

#### âŒ Appealãƒ†ãƒ¼ãƒ–ãƒ«: **å­˜åœ¨ã—ãªã„**

**æ¤œè¨¼çµæœ**:
- `prisma/schema.prisma`ã‚’æ¤œç´¢ â†’ Appealãƒ¢ãƒ‡ãƒ«è¦‹ã¤ã‹ã‚‰ãš
- ç•°è­°ç”³ã—ç«‹ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„

**å½±éŸ¿**:
- VoiceDriveå´ã§ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ç•°è­°ç”³ã—ç«‹ã¦ã‚’ä¿å­˜ã—ã¦ã„ãªã„
- ã™ã¹ã¦åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIã«ç›´æ¥é€ä¿¡ãƒ»å–å¾—ã—ã¦ã„ã‚‹
- LocalStorageã®ä¸‹æ›¸ãæ©Ÿèƒ½ã®ã¿æä¾›

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ¨å®šï¼‰

#### V3Appealï¼ˆæ¨å®šï¼‰
- appeal_id (PK)
- employee_id
- employee_name
- evaluation_period_id
- appeal_category
- appeal_reason
- original_score (0-100)
- requested_score (0-100)
- original_grade
- requested_grade
- status
- priority
- assigned_reviewer_id
- created_at
- updated_at

#### V3AppealAttachmentï¼ˆæ¨å®šï¼‰
- attachment_id (PK)
- appeal_id (FK)
- file_id
- filename
- size
- uploaded_at

---

## ä¸è¶³é …ç›®ã®æ´—ã„å‡ºã—

### 1. VoiceDriveå´ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«

#### âŒ æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«ä¸è¦ï¼ˆæ¨å¥¨ï¼‰

**ç†ç”±**:
- ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹ã®åŸå‰‡ã«å¾“ã†
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãŒSingle Source of Truth
- VoiceDriveã¯è¡¨ç¤ºãƒ»é€ä¿¡ã®UIãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã¿
- ä¸‹æ›¸ãæ©Ÿèƒ½ã¯LocalStorageã§ååˆ†

### 2. APIå®Ÿè£…

#### âœ… ã™ã¹ã¦å®Ÿè£…æ¸ˆã¿

**ç¾çŠ¶**: ã™ã¹ã¦åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹
- `appealServiceV3.submitAppealV3()` â†’ `POST /api/v3/appeals/submit`
- `appealServiceV3.getV3Appeals()` â†’ `GET /api/v3/appeals`
- `appealServiceV3.getV3AppealStatus()` â†’ `GET /api/v3/appeals/:appealId/status`
- `appealServiceV3.uploadV3Evidence()` â†’ `POST /api/v3/appeals/upload`

**VoiceDriveå´ãƒ—ãƒ­ã‚­ã‚·API**: ä¸è¦ï¼ˆç›´æ¥åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIã‚’å‘¼ã³å‡ºã—ï¼‰

### 3. å‹å®šç¾©

#### âœ… æ—¢å­˜å‹å®šç¾©ï¼ˆå®Œå…¨å®Ÿè£…æ¸ˆã¿ï¼‰
- V3EvaluationSystem
- V3EvaluationPeriod
- V3AppealRequest
- V3AppealResponse
- V3GradeUtils
- V3_APPEAL_VALIDATION_RULES
- V3AppealFormData

#### âš ï¸ éƒ¨åˆ†çš„ã«ä¸è¶³
```typescript
// src/types/appeal-v3.ts ã«è¿½åŠ æ¨å¥¨

export interface V3AppealRecord {
  appealId: string;
  employeeId: string;
  employeeName: string;
  evaluationPeriod: string;
  appealCategory: string;
  status: AppealStatus;
  priority: 'high' | 'medium' | 'low';
  createdAt: string;
  expectedResponseDate?: string;
  details?: {
    originalScore: number;
    requestedScore: number;
    originalGrade: string;
    requestedGrade: string;
    scoreDifference: number;
    evaluationSystem: string;
    gradingSystem: string;
  };
  assignedReviewer?: {
    id: string;
    name: string;
    role: string;
  };
}

export interface V3AppealStatus {
  appealId: string;
  status: AppealStatus;
  priority: 'high' | 'medium' | 'low';
  assignedReviewer?: {
    id: string;
    name: string;
    role: string;
  };
  expectedResponseDate?: string;
  lastUpdatedAt: string;
  lastUpdatedBy: string;
}
```

---

## APIè¦ä»¶

### 1. GET /api/v3/evaluation/periods

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **URL**: `http://localhost:8080/api/v3/evaluation/periods`
- **Method**: GET
- **èªè¨¼**: Bearer Token

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```typescript
{
  success: true,
  version: "v3.0.0",
  systemType: "100-point-7-tier",
  periods: V3EvaluationPeriod[]
}
```

#### å®Ÿè£…çŠ¶æ³
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: å®Ÿè£…æ¸ˆã¿
- âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´: å®Ÿè£…æ¸ˆã¿ï¼ˆæƒ³å®šï¼‰

---

### 2. POST /api/v3/appeals/submit

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **URL**: `http://localhost:8080/api/v3/appeals/submit`
- **Method**: POST
- **èªè¨¼**: Bearer Token
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: 10ç§’

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```typescript
{
  employeeId: string,
  employeeName: string,
  evaluationPeriod: string,
  appealCategory: AppealCategory,
  appealReason: string,
  originalScore: number,  // 0-100
  requestedScore: number, // 0-100
  evidenceDocuments: [...],
  scores: {...},
  relativeEvaluation: {...},
  voiceDriveUserId: string,
  deviceInfo: {...},
  submittedAt: string,
  apiVersion: "v3.0.0"
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```typescript
{
  success: true,
  appealId: "V3-APPEAL-XXXXX",
  version: "v3.0.0",
  message: "V3ç•°è­°ç”³ã—ç«‹ã¦ã‚’å—ç†ã—ã¾ã—ãŸ",
  details: {
    status: "submitted",
    priority: "high" | "medium" | "low",
    processedAt: string,
    assignedTo: string,
    evaluationSystem: "100-point",
    gradingSystem: "7-tier",
    scoreDifference: number,
    grade: {
      current: string,
      requested: string
    }
  }
}
```

#### å®Ÿè£…çŠ¶æ³
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: å®Ÿè£…æ¸ˆã¿ï¼ˆappealServiceV3.tsï¼‰
- âœ… ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½: å®Ÿè£…æ¸ˆã¿ï¼ˆæœ€å¤§3å›ï¼‰
- âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´: å®Ÿè£…æ¸ˆã¿ï¼ˆæƒ³å®šï¼‰

---

### 3. GET /api/v3/appeals

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **URL**: `http://localhost:8080/api/v3/appeals?employeeId={employeeId}`
- **Method**: GET
- **èªè¨¼**: Bearer Token

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```typescript
{
  success: true,
  data: V3AppealRecord[]
}
```

#### å®Ÿè£…çŠ¶æ³
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: å®Ÿè£…æ¸ˆã¿
- âš ï¸ AppealStatusListV3: ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ä¸­ï¼ˆè¦å®ŸAPIã¸åˆ‡ã‚Šæ›¿ãˆï¼‰
- âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´: å®Ÿè£…æ¸ˆã¿ï¼ˆæƒ³å®šï¼‰

---

### 4. GET /api/v3/appeals/:appealId/status

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **URL**: `http://localhost:8080/api/v3/appeals/:appealId/status`
- **Method**: GET
- **èªè¨¼**: Bearer Token

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```typescript
{
  success: true,
  status: V3AppealStatus,
  message?: string
}
```

#### å®Ÿè£…çŠ¶æ³
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: å®Ÿè£…æ¸ˆã¿
- âœ… AppealStatusListV3: å®Ÿè£…æ¸ˆã¿
- âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´: å®Ÿè£…æ¸ˆã¿ï¼ˆæƒ³å®šï¼‰

---

### 5. POST /api/v3/appeals/upload

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **URL**: `http://localhost:8080/api/v3/appeals/upload`
- **Method**: POST
- **èªè¨¼**: Bearer Token
- **Content-Type**: multipart/form-data

#### ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```typescript
FormData {
  file: File,  // æœ€å¤§15MB
  apiVersion: "v3.0.0",
  appealId?: string
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹
```typescript
{
  success: true,
  fileId: "FILE-V3-XXXXX",
  url: "https://storage.example.com/appeals/v3/..."
}
```

#### å®Ÿè£…çŠ¶æ³
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: å®Ÿè£…æ¸ˆã¿ï¼ˆappealServiceV3.tsï¼‰
- âŒ AppealFormV3: UIãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½æœªå®Ÿè£…
- âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´: å®Ÿè£…æ¸ˆã¿ï¼ˆæƒ³å®šï¼‰

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### 1. èªè¨¼ãƒ»èªå¯
- **èªè¨¼**: JWT Bearer Token
- **èªå¯**: è‡ªåˆ†è‡ªèº«ã®ç•°è­°ç”³ã—ç«‹ã¦ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

### 2. ãƒ‡ãƒ¼ã‚¿ä¿è­·
- **è»¢é€ä¸­**: HTTPSï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- **ä¿å­˜ä¸­**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§æš—å·åŒ–
- **ä¸‹æ›¸ããƒ‡ãƒ¼ã‚¿**: LocalStorageï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ï¼‰

### 3. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **æœ€å¤§ã‚µã‚¤ã‚º**: 15MB
- **è¨±å¯å½¢å¼**: PDF, JPEG, PNG, GIF
- **ã‚¦ã‚¤ãƒ«ã‚¹ã‚¹ã‚­ãƒ£ãƒ³**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§å®Ÿæ–½ï¼ˆæ¨å¥¨ï¼‰

### 4. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ»ãƒªãƒˆãƒ©ã‚¤
- **APIã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: 10ç§’
- **ãƒªãƒˆãƒ©ã‚¤å›æ•°**: æœ€å¤§3å›
- **ãƒªãƒˆãƒ©ã‚¤é–“éš”**: æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•ï¼ˆ1ç§’ã€2ç§’ã€4ç§’ï¼‰

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

### 1. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ 
- **åˆæœŸãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: < 3ç§’
- **é€ä¿¡å®Œäº†**: < 10ç§’ï¼ˆãƒªãƒˆãƒ©ã‚¤å«ã‚€ï¼‰
- **ä¸€è¦§è¡¨ç¤º**: < 2ç§’

### 2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- **è©•ä¾¡æœŸé–“**: ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ã¾ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **ç”³ã—ç«‹ã¦ä¸€è¦§**: refreshTriggerã¾ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **ä¸‹æ›¸ããƒ‡ãƒ¼ã‚¿**: æ°¸ç¶šåŒ–ï¼ˆLocalStorageï¼‰

### 3. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
- **ä¸‹æ›¸ãè‡ªå‹•ä¿å­˜**: 30ç§’é–“éš”
- **æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 
- **ã‚°ãƒ¬ãƒ¼ãƒ‰è¨ˆç®—**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 

---

## ã¾ã¨ã‚

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»
| ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | ç®¡ç†è€… | VoiceDriveå½¹å‰² |
|---------|-------|---------------|
| è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | è¡¨ç¤ºã®ã¿ |
| ç•°è­°ç”³ã—ç«‹ã¦ãƒ‡ãƒ¼ã‚¿ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | é€ä¿¡ãƒ»å–å¾—ãƒ»è¡¨ç¤º |
| å¯©æŸ»ãƒ—ãƒ­ã‚»ã‚¹ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | è¡¨ç¤ºã®ã¿ |
| è¨¼æ‹ æ›¸é¡ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»è¡¨ç¤º |
| ä¸‹æ›¸ããƒ‡ãƒ¼ã‚¿ | VoiceDrive | LocalStorageç®¡ç† |
| UIçŠ¶æ…‹ | VoiceDrive | ãƒ¡ãƒ¢ãƒªå†…ç®¡ç† |

### å®Ÿè£…å„ªå…ˆåº¦

#### ğŸ”´ é«˜å„ªå…ˆåº¦ï¼ˆå¿…é ˆï¼‰
1. âœ… è©•ä¾¡æœŸé–“å–å¾—APIçµ±åˆï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
2. âœ… ç•°è­°ç”³ã—ç«‹ã¦é€ä¿¡APIçµ±åˆï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
3. âœ… ç•°è­°ç”³ã—ç«‹ã¦ä¸€è¦§APIçµ±åˆï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
4. âœ… ä¸‹æ›¸ãæ©Ÿèƒ½ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰
5. âœ… ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ï¼ˆå®Ÿè£…æ¸ˆã¿ï¼‰

#### ğŸŸ¡ ä¸­å„ªå…ˆåº¦ï¼ˆæ¨å¥¨ï¼‰
6. âŒ **ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰UIå®Ÿè£…**ï¼ˆAppealFormV3.tsxï¼‰
7. âŒ **ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å®ŸAPIã¸åˆ‡ã‚Šæ›¿ãˆ**ï¼ˆAppealStatusListV3.tsxï¼‰
8. âŒ **V3AppealRecordã€V3AppealStatuså‹å®šç¾©è¿½åŠ **

#### ğŸŸ¢ ä½å„ªå…ˆåº¦ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
9. VoiceDriveå´ãƒ—ãƒ­ã‚­ã‚·APIå®Ÿè£…ï¼ˆç¾çŠ¶ä¸è¦ï¼‰
10. VoiceDriveå´DBãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆç¾çŠ¶ä¸è¦ï¼‰

---

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: AppealV3Pageæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆä½œæˆ
