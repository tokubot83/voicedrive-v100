# InterviewBookingPage DBè¦ä»¶åˆ†æ

**æ–‡æ›¸ç•ªå·**: VD-DB-ANALYSIS-2025-1013-002
**ä½œæˆæ—¥**: 2025å¹´10æœˆ13æ—¥
**å¯¾è±¡ãƒšãƒ¼ã‚¸**: InterviewBookingPage
**URL**: https://voicedrive-v100.vercel.app/InterviewBookingPage
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸŸ¡ DBæ§‹ç¯‰å‰åˆ†æå®Œäº†ãƒ»å®Ÿè£…å¾…ã¡

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ãƒšãƒ¼ã‚¸æ¦‚è¦
InterviewBookingPageã¯ã€è·å“¡ãŒäººè²¡çµ±æ‹¬æœ¬éƒ¨ã¨ã®é¢è«‡äºˆç´„ã‚’ç”³è«‹ãƒ»ç¢ºèªã™ã‚‹ãƒšãƒ¼ã‚¸ã§ã™ã€‚åŒ»ç™‚å¾“äº‹è€…å‘ã‘ã®10ç¨®é¡ã®é¢è«‡ã‚¿ã‚¤ãƒ—ï¼ˆæ–°å…¥è·å“¡æœˆæ¬¡ã€å¹´æ¬¡å®šæœŸã€ç®¡ç†è·åŠå¹´é¢è«‡ã€å¾©è·é¢è«‡ç­‰ï¼‰ã«å¯¾å¿œã—ã€äºˆç´„ç®¡ç†ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½
1. âœ… **é¢è«‡äºˆç´„ç”³è«‹** - æ—¥æ™‚é¸æŠã€é¢è«‡ã‚¿ã‚¤ãƒ—ãƒ»ã‚«ãƒ†ã‚´ãƒªé¸æŠã€å¸Œæœ›äº‹é …å…¥åŠ›
2. âœ… **äºˆç´„æƒ…å ±ç¢ºèª** - äºˆç´„ä¸­ã®é¢è«‡ä¸€è¦§è¡¨ç¤ºã€éå»ã®é¢è«‡å±¥æ­´è¡¨ç¤º
3. âœ… **äºˆç´„ã‚­ãƒ£ãƒ³ã‚»ãƒ«** - é¢è«‡2æ™‚é–“å‰ã¾ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯èƒ½
4. âœ… **äºˆç´„å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** - é¢è«‡1æ—¥å‰ã¾ã§å¤‰æ›´ç”³è«‹å¯èƒ½ï¼ˆæ‰¿èªåˆ¶ï¼‰
5. âœ… **æœˆæ¬¡åˆ©ç”¨çŠ¶æ³è¡¨ç¤º** - ä»Šæœˆã®äºˆç´„å›æ•°ãƒ»ä¸Šé™è¡¨ç¤º

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»
- **VoiceDriveï¼ˆãƒã‚¹ã‚¿ï¼‰**: é¢è«‡äºˆç´„ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°æƒ…å ±
- **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒã‚¹ã‚¿ï¼‰**: é¢è«‡å®Ÿæ–½è¨˜éŒ²ãƒ»è©³ç´°å†…å®¹ãƒ»AIåˆ†æçµæœ
- **é€£æºæ–¹å¼**: WebhookåŒæ–¹å‘é€£æº

### ç¾çŠ¶ã®èª²é¡Œ
- âŒ `Interview`ãƒ†ãƒ¼ãƒ–ãƒ«ã«äºˆç´„ç®¡ç†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒä¸è¶³ï¼ˆ20+ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰
- âŒ é¢è«‡è€…ï¼ˆInterviewerï¼‰æƒ…å ±ã‚’ãƒ¡ãƒ¢ãƒªç®¡ç†ï¼ˆDBåŒ–å¿…è¦ï¼‰
- âŒ æ™‚é–“æ ï¼ˆTimeSlotï¼‰ç®¡ç†ãŒãƒ¡ãƒ¢ãƒªãƒ™ãƒ¼ã‚¹ï¼ˆDBåŒ–å¿…è¦ï¼‰
- âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å¤‰æ›´å±¥æ­´ã®æ°¸ç¶šåŒ–ãªã—

---

## ğŸ¯ ãƒšãƒ¼ã‚¸æ©Ÿèƒ½è©³ç´°åˆ†æ

### æ©Ÿèƒ½1: é¢è«‡äºˆç´„ç”³è«‹

**ç”»é¢ãƒ•ãƒ­ãƒ¼**:
```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œæ–°ã—ã„é¢è«‡ã‚’äºˆç´„ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ¢ãƒ¼ãƒ€ãƒ«ã§InterviewBookingCalendarãŒè¡¨ç¤º
3. é¢è«‡ã‚¿ã‚¤ãƒ—é¸æŠï¼ˆ10ç¨®é¡ï¼‰
4. ã‚«ãƒ†ã‚´ãƒªé¸æŠï¼ˆå¿…è¦ãªå ´åˆï¼‰
5. å¸Œæœ›æ—¥æ™‚é¸æŠï¼ˆæœ€å¤§3æ—¥ï¼‰
6. ãƒˆãƒ”ãƒƒã‚¯ãƒ»èª¬æ˜å…¥åŠ›
7. äºˆç´„ç”³è«‹é€ä¿¡
8. äººè²¡çµ±æ‹¬æœ¬éƒ¨ãŒç¢ºèªãƒ»ç¢ºå®š
```

**å¿…è¦ãªãƒ‡ãƒ¼ã‚¿**:
| ãƒ‡ãƒ¼ã‚¿é …ç›® | ç¾åœ¨ã®Interviewãƒ†ãƒ¼ãƒ–ãƒ« | ä¸è¶³ | å‚™è€ƒ |
|----------|---------------------|------|------|
| employeeId | âœ… ã‚ã‚Š | - | äºˆç´„è€…è·å“¡ID |
| employeeName | âŒ ãªã— | âœ… | äºˆç´„è€…æ°åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰ |
| employeeEmail | âŒ ãªã— | âœ… | äºˆç´„è€…ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| employeePhone | âŒ ãªã— | âœ… | äºˆç´„è€…é›»è©±ç•ªå· |
| facility | âŒ ãªã— | âœ… | æ–½è¨­å |
| department | âŒ ãªã— | âœ… | éƒ¨ç½²åï¼ˆUserã‹ã‚‰å–å¾—ã‚‚å¯ï¼‰ |
| position | âŒ ãªã— | âœ… | å½¹è·å |
| bookingDate | âŒ ãªã— | âœ… | äºˆç´„æ—¥ï¼ˆDateå‹ï¼‰ |
| timeSlotStartTime | âŒ ãªã— | âœ… | é–‹å§‹æ™‚åˆ»ï¼ˆ"13:40"ï¼‰ |
| timeSlotEndTime | âŒ ãªã— | âœ… | çµ‚äº†æ™‚åˆ»ï¼ˆ"14:10"ï¼‰ |
| interviewType | âœ… type | - | é¢è«‡ã‚¿ã‚¤ãƒ— |
| interviewCategory | âœ… category | - | é¢è«‡ã‚«ãƒ†ã‚´ãƒª |
| requestedTopics | âŒ ãªã— | âœ… | å¸Œæœ›ãƒˆãƒ”ãƒƒã‚¯ï¼ˆJSONé…åˆ—ï¼‰ |
| description | âŒ ãªã— | âœ… | è©³ç´°èª¬æ˜ |
| urgencyLevel | âœ… ã‚ã‚Š | - | ç·Šæ€¥åº¦ |
| status | âœ… ã‚ã‚Š | âš ï¸ | å€¤ã®æ‹¡å¼µå¿…è¦ |
| createdAt | âœ… ã‚ã‚Š | - | ç”³è«‹æ—¥æ™‚ |
| createdBy | âŒ ãªã— | âœ… | ç”³è«‹è€…ID |

### æ©Ÿèƒ½2: äºˆç´„ç¢ºèªãƒ»ç®¡ç†

**è¡¨ç¤ºå†…å®¹**:
- äºˆç´„ä¸­ã®é¢è«‡ï¼ˆstatus: pending, confirmedï¼‰
- éå»ã®é¢è«‡å±¥æ­´ï¼ˆstatus: completed, cancelledï¼‰
- å„äºˆç´„ã®è©³ç´°ï¼ˆæ—¥æ™‚ã€ã‚¿ã‚¤ãƒ—ã€æ‹…å½“è€…ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
- ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ï¼ˆæ¡ä»¶ä»˜ãè¡¨ç¤ºï¼‰

**å¿…è¦ãªãƒ‡ãƒ¼ã‚¿**:
| ãƒ‡ãƒ¼ã‚¿é …ç›® | ç¾åœ¨ã®Interviewãƒ†ãƒ¼ãƒ–ãƒ« | ä¸è¶³ | å‚™è€ƒ |
|----------|---------------------|------|------|
| interviewerId | âœ… ã‚ã‚Š | - | é¢è«‡è€…ID |
| interviewerName | âœ… ã‚ã‚Š | - | é¢è«‡è€…æ°å |
| interviewerLevel | âŒ ãªã— | âœ… | é¢è«‡è€…æ¨©é™ãƒ¬ãƒ™ãƒ« |
| lastModified | âŒ ãªã— | âœ… | æœ€çµ‚å¤‰æ›´æ—¥æ™‚ |
| modifiedBy | âŒ ãªã— | âœ… | æœ€çµ‚å¤‰æ›´è€…ID |
| adminNotes | âŒ ãªã— | âœ… | ç®¡ç†è€…ãƒ¡ãƒ¢ |
| employeeNotes | âŒ ãªã— | âœ… | è·å“¡ãƒ¡ãƒ¢ |

### æ©Ÿèƒ½3: ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½

**ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯**:
- é¢è«‡é–‹å§‹2æ™‚é–“å‰ã¾ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯èƒ½
- ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç†ç”±ã‚’é¸æŠï¼ˆemergency/illness/work_conflictç­‰ï¼‰
- æ™‚é–“æ ã‚’è‡ªå‹•è§£æ”¾
- é–¢ä¿‚è€…ã«é€šçŸ¥é€ä¿¡

**å¿…è¦ãªãƒ‡ãƒ¼ã‚¿**:
| ãƒ‡ãƒ¼ã‚¿é …ç›® | ç¾åœ¨ã®Interviewãƒ†ãƒ¼ãƒ–ãƒ« | ä¸è¶³ | å‚™è€ƒ |
|----------|---------------------|------|------|
| cancellationReason | âŒ ãªã— | âœ… | ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç†ç”± |
| cancelledAt | âŒ ãªã— | âœ… | ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ—¥æ™‚ |
| cancelledBy | âŒ ãªã— | âœ… | ã‚­ãƒ£ãƒ³ã‚»ãƒ«å®Ÿè¡Œè€…ID |

### æ©Ÿèƒ½4: å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ©Ÿèƒ½

**ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯**:
- é¢è«‡1æ—¥å‰ã¾ã§å¤‰æ›´ç”³è«‹å¯èƒ½
- è¤‡æ•°ã®å¸Œæœ›æ—¥æ™‚ã‚’ææ¡ˆ
- ç®¡ç†è€…ãŒæ‰¿èªãƒ»æ‹’å¦
- æ‰¿èªå¾Œã€æ–°æ—¥æ™‚ã§äºˆç´„ç¢ºå®š

**å¿…è¦ãªãƒ‡ãƒ¼ã‚¿**:
| ãƒ‡ãƒ¼ã‚¿é …ç›® | ãƒ†ãƒ¼ãƒ–ãƒ« | ä¸è¶³ | å‚™è€ƒ |
|----------|---------|------|------|
| rescheduleRequests | Interview | âœ… | JSONé…åˆ—ã¨ã—ã¦ä¿å­˜ |
| - id | - | âœ… | å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆID |
| - requestedBy | - | âœ… | ç”³è«‹è€…ID |
| - requestedAt | - | âœ… | ç”³è«‹æ—¥æ™‚ |
| - currentDateTime | - | âœ… | ç¾åœ¨ã®äºˆç´„æ—¥æ™‚ |
| - preferredDates | - | âœ… | å¸Œæœ›æ—¥æ™‚ï¼ˆé…åˆ—ï¼‰ |
| - reason | - | âœ… | å¤‰æ›´ç†ç”± |
| - status | - | âœ… | pending/approved/rejected |
| - reviewedBy | - | âœ… | æ‰¿èªè€…ID |
| - reviewedAt | - | âœ… | æ‰¿èªæ—¥æ™‚ |
| - rejectionReason | - | âœ… | æ‹’å¦ç†ç”± |
| - approvedDateTime | - | âœ… | æ‰¿èªã•ã‚ŒãŸæ—¥æ™‚ |

---

## ğŸ—„ï¸ ç¾åœ¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

### Interview ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆschema.prisma L145-166ï¼‰

```prisma
model Interview {
  id               String    @id @default(cuid())
  employeeId       String
  category         String
  type             String
  topic            String
  preferredDate    DateTime
  scheduledDate    DateTime?
  actualDate       DateTime?
  duration         Int?
  interviewerId    String?
  interviewerName  String?
  status           String    @default("pending")
  urgencyLevel     String
  result           String?
  notes            String?
  followUpRequired Boolean   @default(false)
  followUpDate     DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  employee         User      @relation(fields: [employeeId], references: [id])
}
```

**å•é¡Œç‚¹**:
1. âŒ äºˆç´„ç®¡ç†ã«å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒä¸è¶³ï¼ˆ20+ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰
2. âŒ æ™‚é–“æ æƒ…å ±ï¼ˆstartTime, endTimeï¼‰ãŒãªã„
3. âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å¤‰æ›´å±¥æ­´ã®ä¿å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒãªã„
4. âŒ è·å“¡æƒ…å ±ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆname, email, phoneç­‰ï¼‰ãŒãªã„
5. âŒ statusã®å€¤ãŒä¸ååˆ†ï¼ˆconfirmed, rescheduled, cancelled, no_showç­‰ãŒå¿…è¦ï¼‰

### InterviewResult ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆschema.prisma L301-320ï¼‰

```prisma
model InterviewResult {
  id                  String    @id @default(cuid())
  requestId           String    @unique
  interviewId         String    @unique
  completedAt         DateTime
  duration            Int
  summary             String
  keyPoints           Json
  actionItems         Json
  followUpRequired    Boolean   @default(false)
  followUpDate        DateTime?
  feedbackToEmployee  String
  nextRecommendations Json
  receivedAt          DateTime  @default(now())
  processedAt         DateTime?
  status              String    @default("received")
  errorMessage        String?
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
}
```

**è©•ä¾¡**: âœ… ã“ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®é¢è«‡çµæœå—ä¿¡ç”¨ã¨ã—ã¦é©åˆ‡ã«è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»ãƒãƒˆãƒªã‚¯ã‚¹

| ãƒ‡ãƒ¼ã‚¿é …ç›® | VoiceDrive | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | æä¾›æ–¹æ³• | å‚™è€ƒ |
|-----------|-----------|-------------|---------|------|
| **é¢è«‡äºˆç´„æƒ…å ±** | âœ… ãƒã‚¹ã‚¿ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | Webhook | VoiceDrive.Interview |
| äºˆç´„ID | âœ… ãƒã‚¹ã‚¿ | - | - | VoiceDriveç”Ÿæˆ |
| è·å“¡ID | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | API | Userãƒ†ãƒ¼ãƒ–ãƒ«ã¨åŒæœŸ |
| è·å“¡åãƒ»é€£çµ¡å…ˆ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | API | è¡¨ç¤ºç”¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ |
| äºˆç´„æ—¥æ™‚ | âœ… ãƒã‚¹ã‚¿ | - | Webhook | VoiceDriveãŒç®¡ç† |
| æ™‚é–“æ æƒ…å ± | âœ… ãƒã‚¹ã‚¿ | - | - | startTime/endTime |
| é¢è«‡ã‚¿ã‚¤ãƒ— | âœ… ãƒã‚¹ã‚¿ | - | - | 10ç¨®é¡ã®ä½“ç³» |
| é¢è«‡ã‚«ãƒ†ã‚´ãƒª | âœ… ãƒã‚¹ã‚¿ | - | - | 12ç¨®é¡ |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | âœ… ãƒã‚¹ã‚¿ | - | Webhook | pendingâ†’confirmed |
| **é¢è«‡å®Ÿæ–½è¨˜éŒ²** | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | MedicalSystem.Interview |
| å®Ÿæ–½æ—¥æ™‚ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | actualDate |
| é¢è«‡å†…å®¹è©³ç´° | âŒ | âœ… ãƒã‚¹ã‚¿ | âŒ | VoiceDriveã¯ä¿å­˜ã—ãªã„ |
| AIåˆ†æçµæœ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | InterviewResult |
| NotebookLMãƒªãƒ³ã‚¯ | âŒ | âœ… ãƒã‚¹ã‚¿ | API | å¿…è¦æ™‚å–å¾— |
| **é¢è«‡è€…æƒ…å ±** | âœ… ãƒã‚¹ã‚¿ | âŒ | - | VoiceDriveç‹¬è‡ªç®¡ç† |
| é¢è«‡è€…ID | âœ… ãƒã‚¹ã‚¿ | - | - | VoiceDriveç”Ÿæˆ |
| é¢è«‡è€…æ°å | âœ… ãƒã‚¹ã‚¿ | - | - | äººè²¡çµ±æ‹¬æœ¬éƒ¨è·å“¡ |
| é¢è«‡è€…å°‚é–€åˆ†é‡ | âœ… ãƒã‚¹ã‚¿ | - | - | specialties |
| é¢è«‡è€…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« | âœ… ãƒã‚¹ã‚¿ | - | - | æ™‚é–“æ ç®¡ç† |
| **æ™‚é–“æ ç®¡ç†** | âœ… ãƒã‚¹ã‚¿ | âŒ | - | VoiceDriveç‹¬è‡ªç®¡ç† |
| å–¶æ¥­æ™‚é–“è¨­å®š | âœ… ãƒã‚¹ã‚¿ | - | - | 13:40-17:00 |
| æ™‚é–“æ ãƒ–ãƒ­ãƒƒã‚¯ | âœ… ãƒã‚¹ã‚¿ | - | - | ç®¡ç†è€…ãŒãƒ–ãƒ­ãƒƒã‚¯å¯èƒ½ |
| äºˆç´„åˆ¶é™ãƒ«ãƒ¼ãƒ« | âœ… ãƒã‚¹ã‚¿ | - | - | æœˆ2å›ç­‰ |

### Webhooké€£æºãƒ•ãƒ­ãƒ¼

#### ãƒ•ãƒ­ãƒ¼1: äºˆç´„ç”³è«‹â†’ç¢ºå®š

```mermaid
sequenceDiagram
    participant Staff as è·å“¡
    participant VD as VoiceDrive
    participant MS as åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ 

    Staff->>VD: é¢è«‡äºˆç´„ç”³è«‹
    VD->>VD: Interview.create(status: pending)
    VD->>MS: Webhook: interview.reservation_created
    MS->>MS: InterviewBooking.create()
    Note over MS: äººè²¡çµ±æ‹¬æœ¬éƒ¨ãŒç¢ºèª
    MS->>MS: InterviewBooking.confirm()
    MS->>VD: Webhook: interview.reservation_confirmed
    VD->>VD: Interview.update(status: confirmed)
    VD->>Staff: é€šçŸ¥: äºˆç´„ç¢ºå®š
```

#### ãƒ•ãƒ­ãƒ¼2: é¢è«‡å®Ÿæ–½â†’çµæœé€šçŸ¥

```mermaid
sequenceDiagram
    participant VD as VoiceDrive
    participant MS as åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ 
    participant Staff as è·å“¡

    Note over MS: é¢è«‡å®Ÿæ–½
    MS->>MS: Interview.create(å®Ÿæ–½è¨˜éŒ²)
    MS->>MS: AIåˆ†æå®Ÿè¡Œ
    MS->>VD: Webhook: interview.result_completed
    VD->>VD: InterviewResult.create()
    VD->>VD: Interview.update(status: completed)
    VD->>Staff: é€šçŸ¥: é¢è«‡çµæœãŒåˆ©ç”¨å¯èƒ½
```

---

## ğŸ”§ å¿…è¦ãªDBå¤‰æ›´

### å¤‰æ›´1: Interview ãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µ

**è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:

```prisma
model Interview {
  id               String    @id @default(cuid())

  // === æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ ===
  employeeId       String
  category         String
  type             String
  topic            String
  preferredDate    DateTime
  scheduledDate    DateTime?
  actualDate       DateTime?
  duration         Int?
  interviewerId    String?
  interviewerName  String?
  status           String    @default("pending")
  urgencyLevel     String
  result           String?
  notes            String?
  followUpRequired Boolean   @default(false)
  followUpDate     DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  // === ğŸ†• è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆInterviewBookingPageå¯¾å¿œï¼‰ ===

  // äºˆç´„è€…æƒ…å ±ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  employeeName         String?   @map("employee_name")
  employeeEmail        String?   @map("employee_email")
  employeePhone        String?   @map("employee_phone")
  facility             String?
  position             String?

  // äºˆç´„æ—¥æ™‚æƒ…å ±
  bookingDate          DateTime? @map("booking_date")          // äºˆç´„æ—¥
  timeSlotStartTime    String?   @map("time_slot_start_time") // "13:40"
  timeSlotEndTime      String?   @map("time_slot_end_time")   // "14:10"

  // é¢è«‡å†…å®¹è©³ç´°
  requestedTopics      String?   @map("requested_topics")      // JSONé…åˆ—
  description          String?                                 // è©³ç´°èª¬æ˜

  // é¢è«‡è€…æƒ…å ±
  interviewerLevel     Float?    @map("interviewer_level")     // æ¨©é™ãƒ¬ãƒ™ãƒ«

  // å±¥æ­´ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdBy            String?   @map("created_by")
  lastModified         DateTime? @map("last_modified")
  modifiedBy           String?   @map("modified_by")

  // ç®¡ç†è€…ãƒ¡ãƒ¢
  adminNotes           String?   @map("admin_notes")
  employeeNotes        String?   @map("employee_notes")

  // ã‚­ãƒ£ãƒ³ã‚»ãƒ«æƒ…å ±
  cancellationReason   String?   @map("cancellation_reason")
  cancelledAt          DateTime? @map("cancelled_at")
  cancelledBy          String?   @map("cancelled_by")

  // å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
  rescheduleRequests   String?   @map("reschedule_requests")   // JSONé…åˆ—

  // é¢è«‡å®Ÿæ–½æƒ…å ±
  conductedAt          DateTime? @map("conducted_at")
  outcome              String?                                 // JSON

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  employee         User      @relation(fields: [employeeId], references: [id])

  // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  @@index([status])
  @@index([bookingDate])
  @@index([interviewerId])
  @@index([employeeId, status])
  @@map("interviews")
}
```

**è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°**: 20ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å€¤ã®æ‹¡å¼µ**:
```typescript
type InterviewStatus =
  | 'pending'             // äºˆç´„ç”³è«‹ä¸­
  | 'confirmed'           // äºˆç´„ç¢ºå®š
  | 'rescheduled'         // å¤‰æ›´æ¸ˆã¿
  | 'reschedule_pending'  // å¤‰æ›´ç”³è«‹ä¸­
  | 'completed'           // é¢è«‡å®Œäº†
  | 'cancelled'           // ã‚­ãƒ£ãƒ³ã‚»ãƒ«
  | 'no_show';            // ç„¡æ–­æ¬ å¸­
```

### å¤‰æ›´2: æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« Interviewerï¼ˆé¢è«‡è€…ãƒã‚¹ã‚¿ï¼‰

**ç›®çš„**: é¢è«‡è€…æƒ…å ±ã‚’ãƒ¡ãƒ¢ãƒªç®¡ç†ã‹ã‚‰DBç®¡ç†ã¸ç§»è¡Œ

```prisma
model Interviewer {
  id                  String    @id @default(cuid())
  name                String
  title               String
  department          String
  permissionLevel     Float     @map("permission_level")

  // å°‚é–€åˆ†é‡
  specialties         String                               // JSONé…åˆ—

  // åˆ©ç”¨å¯èƒ½æ€§
  isActive            Boolean   @default(true) @map("is_active")
  workingDays         String    @map("working_days")       // JSONé…åˆ— ['æœˆ','ç«','æ°´','æœ¨','é‡‘']
  workingHoursStart   String    @map("working_hours_start") // "13:40"
  workingHoursEnd     String    @map("working_hours_end")   // "17:00"

  // äºˆç´„åˆ¶é™
  maxBookingsPerDay   Int       @default(4) @map("max_bookings_per_day")
  maxBookingsPerWeek  Int       @default(15) @map("max_bookings_per_week")

  // é€£çµ¡å…ˆ
  email               String
  phone               String?

  // çµ±è¨ˆ
  totalInterviews     Int       @default(0) @map("total_interviews")
  averageRating       Float?    @map("average_rating")
  bio                 String?

  createdAt           DateTime  @default(now()) @map("created_at")
  updatedAt           DateTime  @updatedAt @map("updated_at")

  @@index([isActive])
  @@index([department])
  @@map("interviewers")
}
```

### å¤‰æ›´3: æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« TimeSlotï¼ˆæ™‚é–“æ ãƒã‚¹ã‚¿ï¼‰

**ç›®çš„**: æ™‚é–“æ ç®¡ç†ã‚’ãƒ¡ãƒ¢ãƒªã‹ã‚‰DBç®¡ç†ã¸ç§»è¡Œ

```prisma
model TimeSlot {
  id                String    @id @default(cuid())
  date              DateTime                              // æ—¥ä»˜
  startTime         String    @map("start_time")          // "13:40"
  endTime           String    @map("end_time")            // "14:10"

  // åˆ©ç”¨å¯èƒ½æ€§
  isAvailable       Boolean   @default(true) @map("is_available")
  isBlocked         Boolean   @default(false) @map("is_blocked")

  // ãƒ–ãƒ­ãƒƒã‚¯æƒ…å ±
  blockedBy         String?   @map("blocked_by")
  blockedReason     String?   @map("blocked_reason")

  // äºˆç´„æƒ…å ±
  bookedBy          String?   @map("booked_by")
  bookingId         String?   @map("booking_id")
  interviewerId     String?   @map("interviewer_id")

  createdAt         DateTime  @default(now()) @map("created_at")
  updatedAt         DateTime  @updatedAt @map("updated_at")

  @@unique([date, startTime, endTime])
  @@index([date])
  @@index([isAvailable])
  @@index([bookingId])
  @@map("time_slots")
}
```

### å¤‰æ›´4: æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« InterviewScheduleConfigï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®šï¼‰

**ç›®çš„**: å–¶æ¥­æ™‚é–“ãƒ»äºˆç´„åˆ¶é™ç­‰ã®è¨­å®šã‚’DBç®¡ç†

```prisma
model InterviewScheduleConfig {
  id                        String    @id @default(cuid())

  // åŸºæœ¬è¨­å®š
  slotDuration              Int       @default(30) @map("slot_duration")       // åˆ†
  breakDuration             Int       @default(10) @map("break_duration")      // åˆ†

  // å–¶æ¥­æ™‚é–“
  workingHoursStart         String    @map("working_hours_start")  // "13:40"
  workingHoursEnd           String    @map("working_hours_end")    // "17:00"

  // å–¶æ¥­æ—¥è¨­å®š
  workingDays               String    @map("working_days")         // JSONé…åˆ—

  // ç¥æ—¥ãƒ»ä¼‘æ¥­æ—¥
  holidays                  String?                                // JSONé…åˆ—
  closedDates               String?   @map("closed_dates")         // JSONé…åˆ—

  // äºˆç´„åˆ¶é™
  maxAdvanceBookingDays     Int       @default(30) @map("max_advance_booking_days")
  minAdvanceBookingHours    Int       @default(24) @map("min_advance_booking_hours")
  maxBookingsPerMonth       Int       @default(2) @map("max_bookings_per_month")
  minIntervalBetweenBookings Int      @default(30) @map("min_interval_between_bookings") // æ—¥

  // è¨­å®šæœ‰åŠ¹æ€§
  isActive                  Boolean   @default(true) @map("is_active")
  effectiveFrom             DateTime? @map("effective_from")
  effectiveTo               DateTime? @map("effective_to")

  createdAt                 DateTime  @default(now()) @map("created_at")
  updatedAt                 DateTime  @updatedAt @map("updated_at")

  @@map("interview_schedule_configs")
}
```

---

## ğŸ”— å¿…è¦ãªAPI

### API-5: è·å“¡é€£çµ¡å…ˆæƒ…å ±å–å¾—

**ç›®çš„**: é¢è«‡äºˆç´„æ™‚ã«è·å“¡ã®é›»è©±ç•ªå·ã‚’å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/employees/{employeeId}/contact`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/employees/OH-NS-2024-001/contact
Authorization: Bearer {jwt_token}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "employeeId": "OH-NS-2024-001",
  "name": "å±±ç”° èŠ±å­",
  "email": "hanako.yamada@obara-hospital.jp",
  "phone": "090-1234-5678",
  "facility": "å°åŸç—…é™¢",
  "department": "å†…ç§‘",
  "position": "çœ‹è­·å¸«"
}
```

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ Employee

ãƒ†ãƒ¼ãƒ–ãƒ«

**å‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: é¢è«‡äºˆç´„ç”³è«‹æ™‚

---

### API-6: é¢è«‡äºˆç´„é€šçŸ¥ï¼ˆVoiceDrive â†’ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼‰

**ç›®çš„**: VoiceDriveã§ã®äºˆç´„ç”³è«‹ã‚’åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«é€šçŸ¥

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/medical/interviews/notify-reservation`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
POST /api/medical/interviews/notify-reservation
Content-Type: application/json
X-VoiceDrive-Signature: sha256=abc123...
```

```json
{
  "eventType": "interview.reservation_created",
  "timestamp": "2025-10-13T14:30:00Z",
  "data": {
    "bookingId": "booking_1728832200_abc123",
    "employeeId": "OH-NS-2024-001",
    "employeeName": "å±±ç”° èŠ±å­",
    "facility": "å°åŸç—…é™¢",
    "department": "å†…ç§‘",
    "bookingDate": "2025-10-20",
    "timeSlot": {
      "startTime": "14:20",
      "endTime": "14:50"
    },
    "interviewType": "regular_annual",
    "interviewCategory": "career_path",
    "requestedTopics": ["ã‚­ãƒ£ãƒªã‚¢ãƒ—ãƒ©ãƒ³", "ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—"],
    "description": "ä»Šå¾Œã®ã‚­ãƒ£ãƒªã‚¢ã«ã¤ã„ã¦ç›¸è«‡ã—ãŸã„",
    "urgencyLevel": "medium"
  }
}
```

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: VoiceDrive Interview

**å‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: è·å“¡ãŒäºˆç´„ç”³è«‹ã—ãŸç›´å¾Œ

---

### API-7: é¢è«‡äºˆç´„ç¢ºå®šé€šçŸ¥ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDriveï¼‰

**ç›®çš„**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§ã®äºˆç´„ç¢ºå®šã‚’VoiceDriveã«é€šçŸ¥

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/webhooks/interview-reservation-confirmed`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
POST /api/webhooks/interview-reservation-confirmed
Content-Type: application/json
X-Medical-System-Signature: sha256=def456...
```

```json
{
  "eventType": "interview.reservation_confirmed",
  "timestamp": "2025-10-13T15:00:00Z",
  "data": {
    "bookingId": "booking_1728832200_abc123",
    "interviewId": "INT-2024-OH-001",
    "confirmedBy": "HR-STAFF-001",
    "confirmedAt": "2025-10-13T15:00:00Z",
    "interviewerId": "interviewer_001",
    "interviewerName": "ç”°ä¸­ ã‚­ãƒ£ãƒªã‚¢æ”¯æ´éƒ¨é–€é•·",
    "location": "æœ¬é™¢ 3F é¢è«‡å®¤2",
    "notes": "ã”äºˆç´„ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚å½“æ—¥ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚"
  }
}
```

**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ Interview

**å‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: äººè²¡çµ±æ‹¬æœ¬éƒ¨ãŒäºˆç´„ã‚’ç¢ºå®šã—ãŸç›´å¾Œ

---

### API-8: é¢è«‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«é€šçŸ¥ï¼ˆVoiceDrive â†’ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼‰

**ç›®çš„**: VoiceDriveã§ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚’åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«é€šçŸ¥

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/medical/interviews/notify-cancellation`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "eventType": "interview.reservation_cancelled",
  "timestamp": "2025-10-13T16:00:00Z",
  "data": {
    "bookingId": "booking_1728832200_abc123",
    "interviewId": "INT-2024-OH-001",
    "cancelledBy": "OH-NS-2024-001",
    "cancelledAt": "2025-10-13T16:00:00Z",
    "cancellationReason": "illness",
    "customReason": "ä½“èª¿ä¸è‰¯ã®ãŸã‚"
  }
}
```

**å‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: è·å“¡ãŒäºˆç´„ã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ãŸç›´å¾Œ

---

### API-9: é¢è«‡å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€šçŸ¥ï¼ˆVoiceDrive â†’ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼‰

**ç›®çš„**: VoiceDriveã§ã®å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«é€šçŸ¥

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/medical/interviews/notify-reschedule-request`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "eventType": "interview.reschedule_requested",
  "timestamp": "2025-10-13T17:00:00Z",
  "data": {
    "bookingId": "booking_1728832200_abc123",
    "rescheduleRequestId": "reschedule_1728835600_xyz789",
    "requestedBy": "OH-NS-2024-001",
    "requestedAt": "2025-10-13T17:00:00Z",
    "currentDateTime": "2025-10-20T14:20:00Z",
    "preferredDates": [
      "2025-10-21T14:20:00Z",
      "2025-10-22T15:00:00Z",
      "2025-10-23T13:40:00Z"
    ],
    "reason": "æ¥­å‹™ã®éƒ½åˆã«ã‚ˆã‚Šæ—¥ç¨‹å¤‰æ›´ã‚’ãŠé¡˜ã„ã—ãŸã„"
  }
}
```

**å‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: è·å“¡ãŒå¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ãŸç›´å¾Œ

---

### API-10: é¢è«‡å¤‰æ›´æ‰¿èªé€šçŸ¥ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDriveï¼‰

**ç›®çš„**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§ã®å¤‰æ›´æ‰¿èªã‚’VoiceDriveã«é€šçŸ¥

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/webhooks/interview-reschedule-approved`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "eventType": "interview.reschedule_approved",
  "timestamp": "2025-10-13T18:00:00Z",
  "data": {
    "bookingId": "booking_1728832200_abc123",
    "rescheduleRequestId": "reschedule_1728835600_xyz789",
    "approvedBy": "HR-STAFF-001",
    "approvedAt": "2025-10-13T18:00:00Z",
    "newDateTime": "2025-10-21T14:20:00Z",
    "newTimeSlot": {
      "startTime": "14:20",
      "endTime": "14:50"
    }
  }
}
```

**å‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: äººè²¡çµ±æ‹¬æœ¬éƒ¨ãŒå¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‰¿èªã—ãŸç›´å¾Œ

---

## ğŸ“ å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1: åŸºæœ¬äºˆç´„æ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦: ğŸ”´ æœ€é«˜ï¼‰

**æœŸé–“**: 2é€±é–“
**å®Ÿè£…æ—¥**: 2025-11-14 ~ 2025-11-27

1. âœ… Interviewãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µï¼ˆ20ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼‰
2. âœ… Interviewerãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
3. âœ… TimeSlotãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
4. âœ… InterviewScheduleConfigãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
5. âœ… API-5å®Ÿè£…ï¼ˆè·å“¡é€£çµ¡å…ˆå–å¾—ï¼‰
6. âœ… API-6å®Ÿè£…ï¼ˆäºˆç´„é€šçŸ¥ VDâ†’MSï¼‰
7. âœ… API-7å®Ÿè£…ï¼ˆäºˆç´„ç¢ºå®šé€šçŸ¥ MSâ†’VDï¼‰
8. âœ… äºˆç´„ç”³è«‹ãƒ»ç¢ºèªæ©Ÿèƒ½ã®å®Ÿè£…

**ä¾å­˜é–¢ä¿‚**:
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ : API-5, API-7ã®å®Ÿè£…ãŒå¿…è¦
- VoiceDrive: schema.prismaæ›´æ–°ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

---

### Phase 2: ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å¤‰æ›´æ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦: ğŸŸ¡ é«˜ï¼‰

**æœŸé–“**: 1é€±é–“
**å®Ÿè£…æ—¥**: 2025-11-28 ~ 2025-12-04

1. âœ… ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½å®Ÿè£…
2. âœ… å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ©Ÿèƒ½å®Ÿè£…
3. âœ… API-8å®Ÿè£…ï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«é€šçŸ¥ï¼‰
4. âœ… API-9å®Ÿè£…ï¼ˆå¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€šçŸ¥ï¼‰
5. âœ… API-10å®Ÿè£…ï¼ˆå¤‰æ›´æ‰¿èªé€šçŸ¥ï¼‰
6. âœ… é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ

**ä¾å­˜é–¢ä¿‚**:
- Phase 1å®Œäº†å¾Œã«å®Ÿæ–½
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ : API-8, API-9, API-10ã®å®Ÿè£…ãŒå¿…è¦

---

### Phase 3: ç®¡ç†æ©Ÿèƒ½ãƒ»çµ±è¨ˆï¼ˆå„ªå…ˆåº¦: ğŸŸ¢ ä¸­ï¼‰

**æœŸé–“**: 1é€±é–“
**å®Ÿè£…æ—¥**: 2025-12-05 ~ 2025-12-11

1. âœ… é¢è«‡è€…ç®¡ç†ç”»é¢ï¼ˆLEVEL 5-7ç”¨ï¼‰
2. âœ… æ™‚é–“æ ãƒ–ãƒ­ãƒƒã‚¯æ©Ÿèƒ½
3. âœ… äºˆç´„çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
4. âœ… æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½

**ä¾å­˜é–¢ä¿‚**:
- Phase 2å®Œäº†å¾Œã«å®Ÿæ–½

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### TC-1: é¢è«‡äºˆç´„ç”³è«‹

**å‰ææ¡ä»¶**:
- ä¸€èˆ¬è·å“¡ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³
- ä»Šæœˆã®äºˆç´„å›æ•°ãŒä¸Šé™æœªæº€

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. InterviewBookingPageã‚’é–‹ã
2. ã€Œæ–°ã—ã„é¢è«‡ã‚’äºˆç´„ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. é¢è«‡ã‚¿ã‚¤ãƒ—ã‚’é¸æŠï¼ˆä¾‹: å¹´æ¬¡å®šæœŸé¢è«‡ï¼‰
4. ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠï¼ˆä¾‹: ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ï¼‰
5. å¸Œæœ›æ—¥æ™‚ã‚’é¸æŠ
6. ãƒˆãƒ”ãƒƒã‚¯ãƒ»èª¬æ˜ã‚’å…¥åŠ›
7. äºˆç´„ç”³è«‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

**æœŸå¾…çµæœ**:
- âœ… Interviewãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã‚‹ï¼ˆstatus: pendingï¼‰
- âœ… TimeSlotãŒäºˆç´„æ¸ˆã¿ã«ãªã‚‹ï¼ˆisAvailable: falseï¼‰
- âœ… API-6ãŒå‘¼ã°ã‚Œã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«é€šçŸ¥ã•ã‚Œã‚‹
- âœ… æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### TC-2: äºˆç´„ç¢ºå®šï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ï¼‰

**å‰ææ¡ä»¶**:
- äºˆç´„ç”³è«‹ãŒå­˜åœ¨ã™ã‚‹ï¼ˆstatus: pendingï¼‰

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§äºˆç´„ã‚’ç¢ºèª
2. é¢è«‡è€…ã‚’å‰²ã‚Šå½“ã¦
3. äºˆç´„ã‚’ç¢ºå®š
4. API-7ã‚’é€ä¿¡ï¼ˆVoiceDriveã¸ï¼‰

**æœŸå¾…çµæœ**:
- âœ… Interviewã®statusãŒ`confirmed`ã«æ›´æ–°ã•ã‚Œã‚‹
- âœ… interviewerId, interviewerNameãŒè¨­å®šã•ã‚Œã‚‹
- âœ… è·å“¡ã«ç¢ºå®šé€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã‚‹

---

### TC-3: äºˆç´„ã‚­ãƒ£ãƒ³ã‚»ãƒ«

**å‰ææ¡ä»¶**:
- äºˆç´„ãŒç¢ºå®šã—ã¦ã„ã‚‹ï¼ˆstatus: confirmedï¼‰
- é¢è«‡é–‹å§‹2æ™‚é–“ä»¥ä¸Šå‰

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. äºˆç´„è©³ç´°ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã‚­ãƒ£ãƒ³ã‚»ãƒ«ç†ç”±ã‚’é¸æŠ
3. ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§OKã‚’ã‚¯ãƒªãƒƒã‚¯

**æœŸå¾…çµæœ**:
- âœ… Interviewã®statusãŒ`cancelled`ã«æ›´æ–°ã•ã‚Œã‚‹
- âœ… cancellationReason, cancelledAt, cancelledByãŒè¨˜éŒ²ã•ã‚Œã‚‹
- âœ… TimeSlotãŒè§£æ”¾ã•ã‚Œã‚‹ï¼ˆisAvailable: trueï¼‰
- âœ… API-8ãŒå‘¼ã°ã‚Œã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«é€šçŸ¥ã•ã‚Œã‚‹
- âœ… é–¢ä¿‚è€…ã«é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã‚‹

---

### TC-4: äºˆç´„å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

**å‰ææ¡ä»¶**:
- äºˆç´„ãŒç¢ºå®šã—ã¦ã„ã‚‹ï¼ˆstatus: confirmedï¼‰
- é¢è«‡1æ—¥ä»¥ä¸Šå‰

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. äºˆç´„è©³ç´°ã§å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. è¤‡æ•°ã®å¸Œæœ›æ—¥æ™‚ã‚’é¸æŠ
3. å¤‰æ›´ç†ç”±ã‚’å…¥åŠ›
4. é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

**æœŸå¾…çµæœ**:
- âœ… Interviewã®statusãŒ`reschedule_pending`ã«æ›´æ–°ã•ã‚Œã‚‹
- âœ… rescheduleRequestsã«å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒè¿½åŠ ã•ã‚Œã‚‹
- âœ… API-9ãŒå‘¼ã°ã‚Œã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«é€šçŸ¥ã•ã‚Œã‚‹
- âœ… äººè²¡çµ±æ‹¬æœ¬éƒ¨ã«æ‰¿èªä¾é ¼é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã‚‹

---

### TC-5: äºˆç´„åˆ¶é™ãƒã‚§ãƒƒã‚¯

**å‰ææ¡ä»¶**:
- ä¸€èˆ¬è·å“¡ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³
- ä»Šæœˆæ—¢ã«2å›äºˆç´„æ¸ˆã¿

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. InterviewBookingPageã‚’é–‹ã
2. ã€Œæ–°ã—ã„é¢è«‡ã‚’äºˆç´„ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. é¢è«‡ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ
4. äºˆç´„ç”³è«‹ã‚’è©¦è¡Œ

**æœŸå¾…çµæœ**:
- âœ… ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ã€Œæœˆã®äºˆç´„ä¸Šé™ï¼ˆ2å›ï¼‰ã«é”ã—ã¦ã„ã¾ã™ã€
- âœ… äºˆç´„ãŒä½œæˆã•ã‚Œãªã„

---

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤‰æ›´

- [ ] Interviewãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µï¼ˆ20ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ï¼‰
- [ ] Interviewerãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] TimeSlotãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] InterviewScheduleConfigãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] æœ¬ç•ªç’°å¢ƒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç”»

### APIå®Ÿè£…ï¼ˆVoiceDriveå´ï¼‰

- [ ] API-5: è·å“¡é€£çµ¡å…ˆå–å¾—ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã«ä¾é ¼ï¼‰
- [ ] API-6: äºˆç´„é€šçŸ¥é€ä¿¡å®Ÿè£…
- [ ] API-7: äºˆç´„ç¢ºå®šWebhookå—ä¿¡å®Ÿè£…
- [ ] API-8: ã‚­ãƒ£ãƒ³ã‚»ãƒ«é€šçŸ¥é€ä¿¡å®Ÿè£…
- [ ] API-9: å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€šçŸ¥é€ä¿¡å®Ÿè£…
- [ ] API-10: å¤‰æ›´æ‰¿èªWebhookå—ä¿¡å®Ÿè£…

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

- [ ] äºˆç´„ç”³è«‹ãƒ•ã‚©ãƒ¼ãƒ æ”¹ä¿®ï¼ˆDBé€£æºï¼‰
- [ ] äºˆç´„ä¸€è¦§è¡¨ç¤ºæ”¹ä¿®ï¼ˆDBé€£æºï¼‰
- [ ] ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ©Ÿèƒ½å®Ÿè£…
- [ ] å¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ©Ÿèƒ½å®Ÿè£…
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è¡¨ç¤º

### ãƒ†ã‚¹ãƒˆ

- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆAPI, ã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼‰
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆäºˆç´„ãƒ•ãƒ­ãƒ¼ï¼‰
- [ ] Webhooké€å—ä¿¡ãƒ†ã‚¹ãƒˆ
- [ ] äºˆç´„åˆ¶é™ãƒ­ã‚¸ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
- [ ] ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»å¤‰æ›´ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ ] APIä»•æ§˜æ›¸ä½œæˆï¼ˆOpenAPI 3.0ï¼‰
- [ ] Webhookä»•æ§˜æ›¸ä½œæˆ
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [ ] é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆ

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… **æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¢ºèª** - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¨è¦ä»¶ç¢ºèª
2. â³ **æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆä½œæˆ** - å¿…è¦ãªãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ç‰¹å®š
3. â³ **APIä»•æ§˜åˆæ„** - API-5~10ã®è©³ç´°ä»•æ§˜ã‚’ç¢ºå®š
4. â³ **å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´** - 2025å¹´11æœˆ14æ—¥é–‹å§‹äºˆå®š
5. â³ **schema.prismaæ›´æ–°** - Phase 1ã®ãƒ†ãƒ¼ãƒ–ãƒ«å¤‰æ›´ã‚’å®Ÿè£…

---

## âš ï¸ æ—¢çŸ¥ã®å•é¡Œã¨ä¿®æ­£äº‹é …

### å•é¡Œ1: PermissionLevelè¡¨è¨˜ã®ä¸çµ±ä¸€

**ç¾çŠ¶**:
- ä¸€éƒ¨ã®ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã§æ•°å€¤ç›´æ¥æŒ‡å®šï¼ˆ7, 6ç­‰ï¼‰ãŒä½¿ç”¨ã•ã‚Œã¦ã„ãŸ
- æ–°18ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã§ã¯PermissionLevel.LEVEL_Xå½¢å¼ã‚’ä½¿ç”¨ã™ã¹ã

**ä¿®æ­£ç®‡æ‰€**:
- âœ… `src/services/InterviewBookingService.ts` L1723 - ä¿®æ­£å®Œäº†ï¼ˆ2025-10-13ï¼‰

**ä¿®æ­£å†…å®¹**:
```typescript
// Before
interviewerLevel: 7,

// After
interviewerLevel: PermissionLevel.LEVEL_7
```

**å½±éŸ¿ç¯„å›²**: ãƒ‡ãƒ¢ç’°å¢ƒã®ã¿ï¼ˆæœ¬ç•ªDBã§ã¯æ­£ã—ã„å€¤ã‚’ä½¿ç”¨ï¼‰

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… ä¿®æ­£å®Œäº†

---

## ğŸ“ é€£çµ¡å…ˆ

**VoiceDriveãƒãƒ¼ãƒ **
- Slack: #voicedrive-integration
- æ‹…å½“: ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ 

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ **
- Slack: #medical-system-integration
- æ‹…å½“: ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ 

---

**æ–‡æ›¸çµ‚äº†**

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ13æ—¥ï¼ˆPermissionLevelä¿®æ­£è¿½è¨˜ï¼‰
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.1
æ‰¿èª: æœªæ‰¿èªï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ï¼‰
