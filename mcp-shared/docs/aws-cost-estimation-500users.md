# AWS月額費用見積もり（職員500名規模）

## 前提条件
- **ユーザー数**: 最大500名
- **同時接続**: ピーク時50名（10%）
- **月間アクティブ率**: 80%（400名）
- **データ量**: 1GB/ユーザー（合計500GB）
- **フロントエンド**: Vercel（別途）
- **リージョン**: 東京（ap-northeast-1）

## 構成別料金比較

### 1. 最小構成（開発・初期導入向け）
月額: **約3.5万円**

```yaml
コンピューティング:
  EC2:
    - t3.small × 1台（API）: $20
    - 稼働時間: 24時間×30日
    料金: 約2,200円

データベース:
  RDS (PostgreSQL):
    - db.t3.micro（Single-AZ）: $25
    - ストレージ: 20GB
    料金: 約2,750円

ストレージ:
  S3:
    - 50GB（ドキュメント等）: $1.5
    料金: 約165円

その他:
  Route 53: 約550円
  CloudWatch: 約1,100円
  データ転送: 約2,200円

月額合計: 約8,965円
```

### 2. 標準構成（本番運用推奨）⭐
月額: **約8〜10万円**

```yaml
コンピューティング:
  EC2 (Auto Scaling):
    - t3.medium × 2台（通常時）: $80
    - t3.medium × 1台（予備）: $40
    料金: 約13,200円

  Lambda (補助処理):
    - 100万リクエスト/月: $5
    料金: 約550円

データベース:
  RDS (PostgreSQL):
    - db.t3.small（Multi-AZ）: $100
    - ストレージ: 100GB
    - 自動バックアップ: 7日分
    料金: 約11,000円

キャッシュ:
  ElastiCache (Redis):
    - cache.t3.micro × 1: $20
    料金: 約2,200円

ストレージ:
  S3:
    - 200GB（ファイル/バックアップ）: $6
    料金: 約660円

認証:
  Cognito:
    - 500ユーザー: 無料枠内
    - MFA有効: $0.03/認証
    料金: 約1,650円

ロードバランサー:
  ALB:
    - 基本料金: $25
    - LCU: $10
    料金: 約3,850円

監視・セキュリティ:
  CloudWatch: 約2,200円
  WAF: 約3,300円
  Secrets Manager: 約550円

データ転送:
  - 送信100GB/月: $14
  料金: 約1,540円

月額合計: 約40,700円
```

### 3. 高可用性構成（ミッションクリティカル）
月額: **約15〜20万円**

```yaml
コンピューティング:
  ECS Fargate:
    - 2 vCPU, 4GB × 3タスク: $150
    料金: 約16,500円

データベース:
  Aurora PostgreSQL:
    - db.r5.large × 2（ライター+リーダー）: $300
    - ストレージ: 500GB
    - バックアップ: 30日分
    料金: 約33,000円

キャッシュ:
  ElastiCache (Redis):
    - cache.m5.large × 2（クラスター）: $150
    料金: 約16,500円

その他の高度なサービス:
  API Gateway: 約5,500円
  CloudFront (CDN): 約3,300円
  GuardDuty: 約2,200円
  AWS Backup: 約4,400円

月額合計: 約90,000円
```

## Vercel費用（フロントエンド）

```yaml
Pro Plan:
  - 月額: $20（約2,200円）
  - 含まれるもの:
    - 無制限のデプロイ
    - カスタムドメイン
    - SSL証明書
    - エッジファンクション

帯域幅:
  - 1TB/月まで無料
  - 500名なら十分カバー
```

## 段階的コスト最適化案

### Phase 1（初期3ヶ月）
```yaml
環境: 最小構成
月額: 約3.5万円
目的: 初期導入・検証
```

### Phase 2（4-12ヶ月）
```yaml
環境: 標準構成
月額: 約8万円
目的: 本番運用開始
最適化:
  - リザーブドインスタンス購入で30%削減
  - 夜間のインスタンス停止で追加削減
```

### Phase 3（13ヶ月以降）
```yaml
環境: 使用状況に応じて調整
月額: 約6-10万円
最適化:
  - Savings Plans適用で最大72%削減
  - サーバーレス化で従量課金化
  - 不要リソースの定期見直し
```

## コスト削減テクニック

### 1. リザーブドインスタンス/Savings Plans
```yaml
1年契約・前払いなし:
  - EC2: 30%削減
  - RDS: 30%削減
  
3年契約・全額前払い:
  - EC2: 60%削減
  - RDS: 60%削減

適用後の標準構成: 
  月額約8万円 → 約5.6万円
```

### 2. 開発環境の自動停止
```yaml
Lambda + EventBridge:
  - 平日: 19時停止、8時起動
  - 週末: 完全停止
  
削減効果: 開発環境費用を70%削減
```

### 3. S3ライフサイクル
```yaml
設定:
  - 30日後: S3 Standard-IA
  - 90日後: S3 Glacier
  
削減効果: ストレージ費用を50%削減
```

## 総合推奨プラン

### 500名規模の現実的な構成
```yaml
バックエンド（AWS）:
  標準構成: 月額 8万円
  リザーブド適用後: 月額 5.6万円
  
フロントエンド（Vercel）:
  Pro Plan: 月額 2,200円

合計月額: 約5.8〜8.2万円
年間総額: 約70〜98万円
```

## 注意事項

1. **初期費用は不要**
   - AWSは完全従量課金
   - Vercelも月額課金

2. **スケーラビリティ**
   - ユーザー増加時は自動スケール
   - 1000名まで同構成で対応可能

3. **請求アラート設定**
   - 予算超過を防ぐため必須
   - CloudWatchで$500超えたらアラート

4. **無料枠の活用**
   - 新規アカウントは12ヶ月無料枠あり
   - t2.micro、750時間/月など

5. **為替変動**
   - ドル建て請求のため変動あり
   - 1ドル=110円で計算