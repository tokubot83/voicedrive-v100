# éƒ¨ç½²è­°é¡Œãƒ¢ãƒ¼ãƒ‰ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè£…è¨ˆç”»æ›¸ï¼ˆè©³ç´°ç‰ˆï¼‰

**ä½œæˆæ—¥**: 2025å¹´10æœˆ20æ—¥
**å¯¾è±¡**: éƒ¨ç½²è­°é¡Œãƒ¢ãƒ¼ãƒ‰ 30ç‚¹/50ç‚¹/100ç‚¹åˆ°é”æ™‚ã®æ‰¿èª/å´ä¸‹ãƒ•ãƒ­ãƒ¼
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æœªç€æ‰‹
**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: `éƒ¨ç½²è­°é¡Œãƒ¢ãƒ¼ãƒ‰_æ­£å¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼_20251019.md`

---

## ğŸ“‹ æ¦‚è¦

éƒ¨ç½²è­°é¡Œãƒ¢ãƒ¼ãƒ‰ã®æ­£å¼ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
30ç‚¹ã€50ç‚¹ã€100ç‚¹ã®å„ã‚¹ã‚³ã‚¢åˆ°é”æ™‚ã«ã€æ¨©é™ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ãŸæ‰¿èª/å´ä¸‹åˆ¤æ–­ãƒ•ãƒ­ãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ã€‚

---

## ğŸ¯ å®Ÿè£…ç¯„å›²

### å¿…è¦ãªå®Ÿè£…é …ç›®

1. **Prisma Schemaæ‹¡å¼µ** - PostStatusè¿½åŠ 
2. **ä¸»ä»»æ‰¿èªç”»é¢ã®å®Ÿè£…** - 3ã¤ã®åˆ¤æ–­ãƒœã‚¿ãƒ³
3. **å¸«é•·æ‰¿èªç”»é¢ã®å®Ÿè£…** - 3ã¤ã®åˆ¤æ–­ãƒœã‚¿ãƒ³
4. **å‰¯çœ‹è­·éƒ¨é•·æ‰¿èªç”»é¢ã®å®Ÿè£…** - 2ã¤ã®åˆ¤æ–­ãƒœã‚¿ãƒ³
5. **é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã®å®Ÿè£…** - 6ã¤ã®é€šçŸ¥ãƒ‘ã‚¿ãƒ¼ãƒ³
6. **ProposalDocumentè‡ªå‹•ç”Ÿæˆ** - æ‰¿èªæ™‚ã®æ–‡æ›¸ä½œæˆ
7. **æŠ•ç¨¿å…¬é–‹ç¯„å›²ã®å‹•çš„å¤‰æ›´** - éƒ¨ç½²å†…â‡”æ–½è¨­å†…

---

## ğŸ“Š è©³ç´°å®Ÿè£…å†…å®¹

### Phase 1: Prisma Schemaæ‹¡å¼µï¼ˆè¦‹ç©ã‚‚ã‚Š: 0.5æ—¥ï¼‰

#### Step 1: PostStatusã®è¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: `prisma/schema.prisma`

**å¤‰æ›´å†…å®¹**:
```prisma
enum PostStatus {
  // æ—¢å­˜
  ACTIVE                           // é€šå¸¸
  UNDER_REVIEW                     // ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­
  ARCHIVED                         // ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ¸ˆã¿

  // æ–°è¦è¿½åŠ : éƒ¨ç½²è­°é¡Œãƒ•ãƒ­ãƒ¼
  UNDER_DEPT_REVIEW                // éƒ¨ç½²æ¤œè¨ä¸­ (30ç‚¹åˆ°é”)
  PENDING_SUPERVISOR_REVIEW        // ä¸»ä»»ã®åˆ¤æ–­å¾…ã¡ (50ç‚¹åˆ°é”)
  RECOMMENDED_TO_MANAGER           // å¸«é•·ã«æ¨è–¦æ¸ˆã¿
  APPROVED_AS_DEPT_AGENDA          // éƒ¨ç½²è­°é¡Œã¨ã—ã¦æ‰¿èªæ¸ˆã¿
  REJECTED_BY_SUPERVISOR           // ä¸»ä»»ãŒå´ä¸‹
  REJECTED_BY_MANAGER              // å¸«é•·ãŒå´ä¸‹

  // æ–°è¦è¿½åŠ : æ–½è¨­è­°é¡Œãƒ•ãƒ­ãƒ¼
  PENDING_DEPUTY_DIRECTOR_REVIEW   // å‰¯çœ‹è­·éƒ¨é•·ã®åˆ¤æ–­å¾…ã¡ (100ç‚¹åˆ°é”)
  APPROVED_FOR_COMMITTEE           // å§”å“¡ä¼šæå‡ºæ‰¿èªæ¸ˆã¿
  REJECTED_BY_DEPUTY_DIRECTOR      // å‰¯çœ‹è­·éƒ¨é•·ãŒå´ä¸‹

  // æ–°è¦è¿½åŠ : æœŸé™åˆ°é”ãƒ•ãƒ­ãƒ¼
  FACILITY_VOTE_EXPIRED_PENDING_MANAGER_DECISION  // æ–½è¨­æŠ•ç¥¨æœŸé™çµ‚äº†ãƒ»å¸«é•·åˆ¤æ–­å¾…ã¡
  DOWNGRADED_TO_DEPT_AGENDA                       // æ–½è¨­â†’éƒ¨ç½²ã«é™æ ¼
  REJECTED_BY_MANAGER_AFTER_FACILITY_VOTE        // æ–½è¨­æŠ•ç¥¨å¾Œã«å¸«é•·ãŒå´ä¸‹

  // ãã®ä»–
  CLOSED                           // çµ‚äº†
}
```

**å®Ÿè£…æ‰‹é †**:
```bash
# 1. schema.prismaç·¨é›†
# 2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
npx prisma migrate dev --name add_dept_agenda_workflow_statuses

# 3. Prisma Clientå†ç”Ÿæˆ
npx prisma generate
```

**ãƒ†ã‚¹ãƒˆé …ç›®**:
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆåŠŸç¢ºèª
- [ ] æ–°ã—ã„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒTypeScriptã§ä½¿ãˆã‚‹ã‹ç¢ºèª

---

### Phase 2: ä¸»ä»»æ‰¿èªç”»é¢ã®å®Ÿè£…ï¼ˆè¦‹ç©ã‚‚ã‚Š: 2æ—¥ï¼‰

#### Step 1: ä¸»ä»»æ‰¿èªç”»é¢UIä½œæˆï¼ˆ1æ—¥ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/pages/ProposalReviewPage.tsx`ï¼ˆæ–°è¦ä½œæˆï¼‰

**URL**: `/proposal-management/review/:postId`

**æ©Ÿèƒ½**:
- ææ¡ˆå†…å®¹ã®è©³ç´°è¡¨ç¤º
- ã‚¹ã‚³ã‚¢ãƒ»æŠ•ç¥¨çŠ¶æ³ã®è¡¨ç¤º
- 3ã¤ã®åˆ¤æ–­ãƒœã‚¿ãƒ³ï¼ˆæ‰¿èª/æ–½è¨­æ˜‡æ ¼/å´ä¸‹ï¼‰

**å®Ÿè£…å†…å®¹**:
```typescript
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import { useAuth } from '../hooks/useAuth';
import {
  CheckCircle,
  TrendingUp,
  XCircle,
  Users,
  ThumbsUp,
  ThumbsDown,
  Minus,
  AlertCircle
} from 'lucide-react';

interface ProposalReviewPageProps {}

export const ProposalReviewPage: React.FC<ProposalReviewPageProps> = () => {
  const { postId } = useParams<{ postId: string }>();
  const { user } = useAuth();
  const navigate = useNavigate();

  const [post, setPost] = useState<any>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [selectedAction, setSelectedAction] = useState<string>('');
  const [reason, setReason] = useState('');
  const [comment, setComment] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  useEffect(() => {
    fetchPostDetails();
  }, [postId]);

  const fetchPostDetails = async () => {
    try {
      const response = await fetch(`/api/posts/${postId}`);
      const data = await response.json();
      setPost(data);
    } catch (error) {
      console.error('Error fetching post:', error);
    } finally {
      setIsLoading(false);
    }
  };

  // æ¨©é™ãƒã‚§ãƒƒã‚¯
  useEffect(() => {
    if (user && post) {
      // ä¸»ä»»ï¼ˆLEVEL_3.5ï¼‰ã¾ãŸã¯å¸«é•·ï¼ˆLEVEL_7ï¼‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
      if (user.permissionLevel < 3.5) {
        navigate('/unauthorized');
      }
    }
  }, [user, post]);

  const handleSubmit = async () => {
    if (!selectedAction || !reason.trim()) {
      alert('åˆ¤æ–­ã¨ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
      return;
    }

    setIsSubmitting(true);

    try {
      const response = await fetch(`/api/proposal-review/${postId}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          action: selectedAction,
          reason: reason.trim(),
          comment: comment.trim(),
          reviewerId: user!.id
        })
      });

      if (response.ok) {
        alert('åˆ¤æ–­ã‚’é€ä¿¡ã—ã¾ã—ãŸ');
        navigate('/proposal-management');
      } else {
        alert('åˆ¤æ–­ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    } catch (error) {
      console.error('Error submitting review:', error);
      alert('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
    } finally {
      setIsSubmitting(false);
    }
  };

  if (isLoading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
          <p className="text-gray-600">èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
      </div>
    );
  }

  if (!post) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <p className="text-gray-600">æŠ•ç¨¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>
      </div>
    );
  }

  const voteData = post.pollResult || {};
  const approveVotes = voteData.results?.find((r: any) => r.option.text === 'è³›æˆ')?.votes || 0;
  const neutralVotes = voteData.results?.find((r: any) => r.option.text === 'ä¸­ç«‹')?.votes || 0;
  const opposeVotes = voteData.results?.find((r: any) => r.option.text === 'åå¯¾')?.votes || 0;

  return (
    <div className="min-h-screen bg-gray-50 py-8">
      <div className="max-w-4xl mx-auto px-4">
        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
        <div className="bg-white rounded-lg shadow-md p-6 mb-6">
          <div className="flex items-center gap-2 mb-4">
            <FileText className="w-6 h-6 text-blue-600" />
            <h1 className="text-2xl font-bold text-gray-900">éƒ¨ç½²è­°é¡Œ æ‰¿èª/å´ä¸‹</h1>
          </div>

          {/* è­¦å‘ŠãƒãƒŠãƒ¼ */}
          <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
            <div className="flex items-start gap-2">
              <AlertCircle className="w-5 h-5 text-yellow-600 mt-0.5" />
              <div>
                <p className="font-medium text-yellow-900">åˆ¤æ–­ãŒå¿…è¦ã§ã™</p>
                <p className="text-sm text-yellow-700 mt-1">
                  ã“ã®ææ¡ˆã¯50ç‚¹ã«åˆ°é”ã—ã¾ã—ãŸã€‚éƒ¨ç½²è­°é¡Œã¨ã—ã¦æ‰¿èªã™ã‚‹ã‹ã€æ–½è¨­è­°é¡Œã«æ˜‡æ ¼ã™ã‚‹ã‹ã€å´ä¸‹ã™ã‚‹ã‹ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚
                </p>
              </div>
            </div>
          </div>
        </div>

        {/* æŠ•ç¨¿å†…å®¹ */}
        <div className="bg-white rounded-lg shadow-md p-6 mb-6">
          <h2 className="text-xl font-bold text-gray-900 mb-4">{post.content}</h2>

          <div className="grid grid-cols-2 gap-4 mb-6">
            <div className="bg-gray-50 p-4 rounded-lg">
              <p className="text-sm text-gray-600">æŠ•ç¨¿è€…</p>
              <p className="font-semibold text-gray-900">{post.author.name}</p>
              <p className="text-sm text-gray-600">{post.department || 'ä¸æ˜'}</p>
            </div>

            <div className="bg-gray-50 p-4 rounded-lg">
              <p className="text-sm text-gray-600">ç¾åœ¨ã‚¹ã‚³ã‚¢</p>
              <p className="text-3xl font-bold text-blue-600">{post.score || 0}ç‚¹</p>
            </div>
          </div>

          {/* æŠ•ç¥¨çŠ¶æ³ */}
          <div className="border-t pt-4">
            <h3 className="font-semibold text-gray-900 mb-3">æŠ•ç¥¨çŠ¶æ³</h3>
            <div className="grid grid-cols-3 gap-4">
              <div className="text-center">
                <ThumbsUp className="w-8 h-8 text-green-600 mx-auto mb-2" />
                <p className="text-2xl font-bold text-green-600">{approveVotes}</p>
                <p className="text-sm text-gray-600">è³›æˆ</p>
              </div>
              <div className="text-center">
                <Minus className="w-8 h-8 text-gray-600 mx-auto mb-2" />
                <p className="text-2xl font-bold text-gray-600">{neutralVotes}</p>
                <p className="text-sm text-gray-600">ä¸­ç«‹</p>
              </div>
              <div className="text-center">
                <ThumbsDown className="w-8 h-8 text-red-600 mx-auto mb-2" />
                <p className="text-2xl font-bold text-red-600">{opposeVotes}</p>
                <p className="text-sm text-gray-600">åå¯¾</p>
              </div>
            </div>
          </div>
        </div>

        {/* åˆ¤æ–­é¸æŠ */}
        <div className="bg-white rounded-lg shadow-md p-6 mb-6">
          <h2 className="text-lg font-bold text-gray-900 mb-4">åˆ¤æ–­ã‚’é¸æŠ</h2>

          <div className="space-y-3">
            {/* éƒ¨ç½²è­°é¡Œã¨ã—ã¦æ‰¿èª */}
            <button
              onClick={() => setSelectedAction('approve_as_dept_agenda')}
              className={`w-full p-4 rounded-lg border-2 text-left transition-all ${
                selectedAction === 'approve_as_dept_agenda'
                  ? 'border-green-500 bg-green-50'
                  : 'border-gray-200 hover:border-green-300'
              }`}
            >
              <div className="flex items-center gap-3">
                <CheckCircle className={`w-6 h-6 ${
                  selectedAction === 'approve_as_dept_agenda' ? 'text-green-600' : 'text-gray-400'
                }`} />
                <div>
                  <p className="font-medium text-gray-900">éƒ¨ç½²è­°é¡Œã¨ã—ã¦æ‰¿èª</p>
                  <p className="text-sm text-gray-600">
                    éƒ¨ç½²ã®æ­£å¼è­°é¡Œã¨ã—ã¦æ‰¿èªã—ã€éƒ¨ç½²ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§è­°è«–ã™ã‚‹
                  </p>
                </div>
              </div>
            </button>

            {/* æ–½è¨­è­°é¡Œã«æ˜‡æ ¼ */}
            <button
              onClick={() => setSelectedAction('escalate_to_facility')}
              className={`w-full p-4 rounded-lg border-2 text-left transition-all ${
                selectedAction === 'escalate_to_facility'
                  ? 'border-blue-500 bg-blue-50'
                  : 'border-gray-200 hover:border-blue-300'
              }`}
            >
              <div className="flex items-center gap-3">
                <TrendingUp className={`w-6 h-6 ${
                  selectedAction === 'escalate_to_facility' ? 'text-blue-600' : 'text-gray-400'
                }`} />
                <div>
                  <p className="font-medium text-gray-900">æ–½è¨­è­°é¡Œã«æ˜‡æ ¼</p>
                  <p className="text-sm text-gray-600">
                    æ–½è¨­å…¨ä½“ã§æ¤œè¨ã™ã¹ãé‡è¦ãªææ¡ˆã¨ã—ã¦æ˜‡æ ¼ã™ã‚‹
                  </p>
                </div>
              </div>
            </button>

            {/* å´ä¸‹ */}
            <button
              onClick={() => setSelectedAction('reject')}
              className={`w-full p-4 rounded-lg border-2 text-left transition-all ${
                selectedAction === 'reject'
                  ? 'border-red-500 bg-red-50'
                  : 'border-gray-200 hover:border-red-300'
              }`}
            >
              <div className="flex items-center gap-3">
                <XCircle className={`w-6 h-6 ${
                  selectedAction === 'reject' ? 'text-red-600' : 'text-gray-400'
                }`} />
                <div>
                  <p className="font-medium text-gray-900">å´ä¸‹</p>
                  <p className="text-sm text-gray-600">
                    ã“ã®ææ¡ˆã‚’æ¡ç”¨ã—ãªã„
                  </p>
                </div>
              </div>
            </button>
          </div>
        </div>

        {/* ç†ç”±ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆå…¥åŠ› */}
        <div className="bg-white rounded-lg shadow-md p-6 mb-6">
          <div className="mb-4">
            <label className="block font-semibold text-gray-900 mb-2">
              åˆ¤æ–­ç†ç”± <span className="text-red-600">*</span>
            </label>
            <textarea
              value={reason}
              onChange={(e) => setReason(e.target.value)}
              placeholder="åˆ¤æ–­ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå¿…é ˆï¼‰"
              className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              rows={4}
              maxLength={500}
            />
            <p className="text-sm text-gray-500 mt-1">{reason.length} / 500æ–‡å­—</p>
          </div>

          {selectedAction === 'approve_as_dept_agenda' && (
            <div>
              <label className="block font-semibold text-gray-900 mb-2">
                æ‰¿èªã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰
              </label>
              <textarea
                value={comment}
                onChange={(e) => setComment(e.target.value)}
                placeholder="è·å“¡ã«å‘ã‘ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"
                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                rows={3}
                maxLength={300}
              />
              <p className="text-sm text-gray-500 mt-1">{comment.length} / 300æ–‡å­—</p>
            </div>
          )}
        </div>

        {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */}
        <div className="flex gap-3 justify-end">
          <button
            onClick={() => navigate(-1)}
            className="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100"
          >
            ã‚­ãƒ£ãƒ³ã‚»ãƒ«
          </button>
          <button
            onClick={handleSubmit}
            disabled={!selectedAction || !reason.trim() || isSubmitting}
            className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed"
          >
            {isSubmitting ? 'é€ä¿¡ä¸­...' : 'åˆ¤æ–­ã‚’é€ä¿¡'}
          </button>
        </div>
      </div>
    </div>
  );
};
```

**ãƒ†ã‚¹ãƒˆé …ç›®**:
- [ ] ææ¡ˆè©³ç´°ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] 3ã¤ã®ãƒœã‚¿ãƒ³ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
- [ ] ç†ç”±å…¥åŠ›ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã™ã‚‹ã‹
- [ ] æ¨©é™ãƒã‚§ãƒƒã‚¯ãŒå‹•ä½œã™ã‚‹ã‹

---

#### Step 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIå®Ÿè£…ï¼ˆ1æ—¥ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/server.ts`ï¼ˆæ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ï¼‰

**æ–°è¦APIãƒ«ãƒ¼ãƒˆ**:
```typescript
// ä¸»ä»»ãƒ»å¸«é•·ã®ææ¡ˆãƒ¬ãƒ“ãƒ¥ãƒ¼
app.post('/api/proposal-review/:postId',
  authenticateToken,
  async (req: AuthRequest, res: Response) => {
    try {
      const { postId } = req.params;
      const { action, reason, comment, reviewerId } = req.body;

      // æ¨©é™ãƒã‚§ãƒƒã‚¯
      const reviewer = await prisma.user.findUnique({
        where: { id: reviewerId },
        select: { permissionLevel: true, name: true, department: true }
      });

      if (!reviewer || reviewer.permissionLevel < 3.5) {
        return res.status(403).json({
          success: false,
          error: 'æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“'
        });
      }

      // æŠ•ç¨¿å–å¾—
      const post = await prisma.post.findUnique({
        where: { id: postId },
        include: {
          author: { select: { id: true, name: true } }
        }
      });

      if (!post) {
        return res.status(404).json({
          success: false,
          error: 'æŠ•ç¨¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'
        });
      }

      // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åˆ¥å‡¦ç†
      switch (action) {
        case 'approve_as_dept_agenda':
          await handleApproveDeptAgenda(post, reviewer, reason, comment);
          break;

        case 'escalate_to_facility':
          await handleEscalateToFacility(post, reviewer, reason);
          break;

        case 'reject':
          await handleReject(post, reviewer, reason);
          break;

        default:
          return res.status(400).json({
            success: false,
            error: 'ä¸æ­£ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§ã™'
          });
      }

      res.json({ success: true });

    } catch (error) {
      console.error('Error in proposal-review:', error);
      res.status(500).json({
        success: false,
        error: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'
      });
    }
  }
);

// ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
async function handleApproveDeptAgenda(
  post: any,
  reviewer: any,
  reason: string,
  comment?: string
): Promise<void> {
  // 1. æŠ•ç¨¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
  await prisma.post.update({
    where: { id: post.id },
    data: {
      status: 'APPROVED_AS_DEPT_AGENDA'
    }
  });

  // 2. ProposalDocumentè‡ªå‹•ç”Ÿæˆ
  await prisma.proposalDocument.create({
    data: {
      postId: post.id,
      title: post.content.substring(0, 100),
      background: `ã“ã®ææ¡ˆã¯éƒ¨ç½²å†…ã§${post.score}ç‚¹ã®ã‚¹ã‚³ã‚¢ã‚’ç²å¾—ã—ã€éƒ¨ç½²è­°é¡Œã¨ã—ã¦æ‰¿èªã•ã‚Œã¾ã—ãŸã€‚`,
      status: 'draft',
      creatorId: reviewer.id
    }
  });

  // 3. é€šçŸ¥é€ä¿¡
  // æŠ•ç¨¿è€…ã¸ã®é€šçŸ¥
  await prisma.notification.create({
    data: {
      userId: post.authorId,
      type: 'proposal_approved',
      title: 'éƒ¨ç½²è­°é¡Œã¨ã—ã¦æ‰¿èªã•ã‚Œã¾ã—ãŸ',
      message: `ã‚ãªãŸã®ææ¡ˆã€Œ${post.content.substring(0, 50)}...ã€ãŒéƒ¨ç½²è­°é¡Œã¨ã—ã¦æ‰¿èªã•ã‚Œã¾ã—ãŸã€‚\n\næ‰¿èªç†ç”±:\n${reason}\n\n${comment ? `ã‚³ãƒ¡ãƒ³ãƒˆ:\n${comment}` : ''}`,
      relatedPostId: post.id,
      senderId: reviewer.id
    }
  });

  // éƒ¨ç½²å…¨å“¡ã¸ã®é€šçŸ¥
  const deptUsers = await prisma.user.findMany({
    where: { department: post.department },
    select: { id: true }
  });

  await Promise.all(deptUsers.map(user =>
    prisma.notification.create({
      data: {
        userId: user.id,
        type: 'dept_agenda_announced',
        title: 'éƒ¨ç½²è­°é¡ŒãŒæ­£å¼æ±ºå®šã—ã¾ã—ãŸ',
        message: `ã€Œ${post.content.substring(0, 50)}...ã€ãŒéƒ¨ç½²ã®æ­£å¼è­°é¡Œã«ãªã‚Šã¾ã—ãŸã€‚\n\n${comment || ''}`,
        relatedPostId: post.id,
        senderId: reviewer.id
      }
    })
  ));
}

async function handleEscalateToFacility(
  post: any,
  reviewer: any,
  reason: string
): Promise<void> {
  // 1. è­°é¡Œãƒ¬ãƒ™ãƒ«ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
  await prisma.post.update({
    where: { id: post.id },
    data: {
      agendaLevel: 'FACILITY_AGENDA',
      status: 'PENDING_DEPUTY_DIRECTOR_REVIEW',
      // æŠ•ç¨¿å…¬é–‹ç¯„å›²ã‚’æ–½è¨­å†…ã«æ‹¡å¤§
      visibility: 'facility'
    }
  });

  // 2. æŠ•ç¥¨æœŸé™å»¶é•·
  const newDeadline = new Date();
  newDeadline.setDate(newDeadline.getDate() + 7);

  await prisma.post.update({
    where: { id: post.id },
    data: {
      votingDeadline: newDeadline
    }
  });

  // 3. ProposalDocumentè‡ªå‹•ç”Ÿæˆï¼ˆæ–½è¨­ãƒ¬ãƒ™ãƒ«ç”¨ï¼‰
  await prisma.proposalDocument.create({
    data: {
      postId: post.id,
      title: post.content.substring(0, 100),
      background: `ã“ã®ææ¡ˆã¯éƒ¨ç½²å†…ã§${post.score}ç‚¹ã‚’ç²å¾—ã—ã€${reviewer.name}ã«ã‚ˆã‚Šæ–½è¨­è­°é¡Œã«æ˜‡æ ¼ã•ã‚Œã¾ã—ãŸã€‚`,
      status: 'draft',
      creatorId: reviewer.id
    }
  });

  // 4. é€šçŸ¥é€ä¿¡
  // æŠ•ç¨¿è€…ã¸ã®é€šçŸ¥
  await prisma.notification.create({
    data: {
      userId: post.authorId,
      type: 'escalated_to_facility',
      title: 'æ–½è¨­è­°é¡Œã«æ˜‡æ ¼ã—ã¾ã—ãŸ',
      message: `ã‚ãªãŸã®ææ¡ˆã€Œ${post.content.substring(0, 50)}...ã€ãŒæ–½è¨­è­°é¡Œã«æ˜‡æ ¼ã—ã¾ã—ãŸã€‚\n\næ˜‡æ ¼ç†ç”±:\n${reason}`,
      relatedPostId: post.id,
      senderId: reviewer.id
    }
  });

  // å‰¯çœ‹è­·éƒ¨é•·ã¸ã®é€šçŸ¥
  const deputyDirectors = await prisma.user.findMany({
    where: {
      permissionLevel: { gte: 8 },
      facilityId: post.facilityId
    },
    select: { id: true }
  });

  await Promise.all(deputyDirectors.map(user =>
    prisma.notification.create({
      data: {
        userId: user.id,
        type: 'facility_agenda_review_required',
        title: 'æ–½è¨­è­°é¡Œã®æ‰¿èªä¾é ¼',
        message: `ã€Œ${post.content.substring(0, 50)}...ã€ãŒæ–½è¨­è­°é¡Œã«æ˜‡æ ¼ã—ã¾ã—ãŸã€‚å§”å“¡ä¼šæå‡ºã®æ‰¿èª/å´ä¸‹ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚`,
        relatedPostId: post.id,
        senderId: reviewer.id
      }
    })
  ));

  // æ–½è¨­å†…å…¨è·å“¡ã¸ã®é€šçŸ¥
  const facilityUsers = await prisma.user.findMany({
    where: { facilityId: post.facilityId },
    select: { id: true }
  });

  await Promise.all(facilityUsers.map(user =>
    prisma.notification.create({
      data: {
        userId: user.id,
        type: 'facility_agenda_announced',
        title: 'æ–°ã—ã„æ–½è¨­è­°é¡Œ',
        message: `ã€Œ${post.content.substring(0, 50)}...ã€ãŒæ–½è¨­è­°é¡Œã«ãªã‚Šã¾ã—ãŸã€‚æŠ•ç¥¨æœŸé™: ${newDeadline.toLocaleDateString('ja-JP')}ã¾ã§`,
        relatedPostId: post.id,
        senderId: reviewer.id
      }
    })
  ));
}

async function handleReject(
  post: any,
  reviewer: any,
  reason: string
): Promise<void> {
  // 1. æŠ•ç¨¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
  await prisma.post.update({
    where: { id: post.id },
    data: {
      status: reviewer.permissionLevel >= 7 ? 'REJECTED_BY_MANAGER' : 'REJECTED_BY_SUPERVISOR',
      visibility: 'private' // æŠ•ç¨¿è€…ã®ã¿é–²è¦§å¯èƒ½
    }
  });

  // 2. æŠ•ç¥¨çµ‚äº†
  // (pollã®endDateã‚’ç¾åœ¨æ™‚åˆ»ã«è¨­å®šãªã©)

  // 3. é€šçŸ¥é€ä¿¡
  await prisma.notification.create({
    data: {
      userId: post.authorId,
      type: 'proposal_rejected',
      title: 'æŠ•ç¨¿ãŒå´ä¸‹ã•ã‚Œã¾ã—ãŸ',
      message: `ã‚ãªãŸã®ææ¡ˆã€Œ${post.content.substring(0, 50)}...ã€ã¯å´ä¸‹ã•ã‚Œã¾ã—ãŸã€‚\n\nå´ä¸‹ç†ç”±:\n${reason}`,
      relatedPostId: post.id,
      senderId: reviewer.id
    }
  });
}
```

**ãƒ†ã‚¹ãƒˆé …ç›®**:
- [ ] æ‰¿èªå‡¦ç†ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
- [ ] æ–½è¨­æ˜‡æ ¼å‡¦ç†ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
- [ ] å´ä¸‹å‡¦ç†ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
- [ ] é€šçŸ¥ãŒæ­£ã—ãé€ä¿¡ã•ã‚Œã‚‹ã‹
- [ ] ProposalDocumentãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã‹

---

### Phase 3: é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã®æ‹¡å¼µï¼ˆè¦‹ç©ã‚‚ã‚Š: 1.5æ—¥ï¼‰

#### ã‚¹ã‚³ã‚¢åˆ°é”æ™‚ã®è‡ªå‹•é€šçŸ¥

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/services/agendaLevelNotificationService.ts`ï¼ˆæ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£ï¼‰

**è¿½åŠ å®Ÿè£…**:
```typescript
/**
 * 30ç‚¹åˆ°é”æ™‚ã®é€šçŸ¥
 */
export async function notify30PointsReached(post: any): Promise<void> {
  // æŠ•ç¨¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
  await prisma.post.update({
    where: { id: post.id },
    data: {
      agendaLevel: 'DEPT_REVIEW',
      status: 'UNDER_DEPT_REVIEW'
    }
  });

  // æŠ•ç¨¿è€…ã¸ã®é€šçŸ¥
  await prisma.notification.create({
    data: {
      userId: post.authorId,
      type: 'score_milestone',
      title: 'æŠ•ç¨¿ãŒ30ç‚¹ã«åˆ°é”ã—ã¾ã—ãŸ',
      message: `ã‚ãªãŸã®æŠ•ç¨¿ãŒ30ç‚¹ã‚’çªç ´ã—ã€éƒ¨ç½²å†…ã§æœ¬æ ¼çš„ãªæ¤œè¨ãŒå§‹ã¾ã‚Šã¾ã—ãŸã€‚50ç‚¹ã«é”ã™ã‚‹ã¨ä¸»ä»»ã®åˆ¤æ–­å¯¾è±¡ã«ãªã‚Šã¾ã™ã€‚`,
      relatedPostId: post.id
    }
  });

  // ä¸»ä»»ã¸ã®é€šçŸ¥
  const supervisors = await prisma.user.findMany({
    where: {
      department: post.department,
      permissionLevel: { gte: 3.5, lt: 7 }
    }
  });

  await Promise.all(supervisors.map(supervisor =>
    prisma.notification.create({
      data: {
        userId: supervisor.id,
        type: 'dept_review_alert',
        title: 'éƒ¨ç½²å†…ã§æ³¨ç›®ã•ã‚Œã¦ã„ã‚‹æŠ•ç¨¿ãŒã‚ã‚Šã¾ã™',
        message: `ã€Œ${post.content.substring(0, 50)}...ã€ãŒ30ç‚¹ã‚’çªç ´ã—ã¾ã—ãŸã€‚50ç‚¹ã«é”ã™ã‚‹ã¨ã€ã‚ãªãŸã®æ‰¿èª/å´ä¸‹åˆ¤æ–­ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚äº‹å‰ã«å†…å®¹ã‚’ç¢ºèªã—ã¦ãŠãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚`,
        relatedPostId: post.id
      }
    })
  ));

  // å¸«é•·ã¸ã®é€šçŸ¥
  const managers = await prisma.user.findMany({
    where: {
      department: post.department,
      permissionLevel: { gte: 7, lt: 9 }
    }
  });

  await Promise.all(managers.map(manager =>
    prisma.notification.create({
      data: {
        userId: manager.id,
        type: 'dept_review_alert',
        title: 'éƒ¨ç½²å†…ã§æ³¨ç›®ã•ã‚Œã¦ã„ã‚‹æŠ•ç¨¿ãŒã‚ã‚Šã¾ã™',
        message: `ã€Œ${post.content.substring(0, 50)}...ã€ãŒ30ç‚¹ã‚’çªç ´ã—ã¾ã—ãŸã€‚50ç‚¹ã«é”ã™ã‚‹ã¨ä¸»ä»»ã®æ¨è–¦å¯¾è±¡ã«ãªã‚Šã€ãã®å¾Œã‚ãªãŸã®æœ€çµ‚åˆ¤æ–­ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚`,
        relatedPostId: post.id
      }
    })
  ));
}

/**
 * 50ç‚¹åˆ°é”æ™‚ã®é€šçŸ¥
 */
export async function notify50PointsReached(post: any): Promise<void> {
  // æŠ•ç¨¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
  await prisma.post.update({
    where: { id: post.id },
    data: {
      agendaLevel: 'DEPT_AGENDA',
      status: 'PENDING_SUPERVISOR_REVIEW'
    }
  });

  // æŠ•ç¨¿è€…ã¸ã®é€šçŸ¥
  await prisma.notification.create({
    data: {
      userId: post.authorId,
      type: 'score_milestone',
      title: 'æŠ•ç¨¿ãŒ50ç‚¹ã«åˆ°é”ã—ã¾ã—ãŸ',
      message: `ã‚ãªãŸã®æŠ•ç¨¿ãŒ50ç‚¹ã‚’çªç ´ã—ã€éƒ¨ç½²è­°é¡Œå€™è£œã«ãªã‚Šã¾ã—ãŸã€‚ä¸»ä»»ã®åˆ¤æ–­ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚`,
      relatedPostId: post.id
    }
  });

  // ä¸»ä»»ã¸ã®é€šçŸ¥ï¼ˆåˆ¤æ–­è¦æ±‚ï¼‰
  const supervisors = await prisma.user.findMany({
    where: {
      department: post.department,
      permissionLevel: { gte: 3.5, lt: 7 }
    }
  });

  await Promise.all(supervisors.map(supervisor =>
    prisma.notification.create({
      data: {
        userId: supervisor.id,
        type: 'review_required',
        title: 'éƒ¨ç½²è­°é¡Œã®æ‰¿èª/å´ä¸‹ã‚’ãŠé¡˜ã„ã—ã¾ã™',
        message: `ã€Œ${post.content.substring(0, 50)}...ã€ãŒ50ç‚¹ã‚’çªç ´ã—ã¾ã—ãŸã€‚éƒ¨ç½²è­°é¡Œã¨ã—ã¦å¸«é•·ã«æ¨è–¦ã™ã‚‹ã‹ã€å´ä¸‹ã™ã‚‹ã‹ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚`,
        relatedPostId: post.id,
        actionUrl: `/proposal-management/review/${post.id}`
      }
    })
  ));
}

/**
 * 100ç‚¹åˆ°é”æ™‚ã®é€šçŸ¥
 */
export async function notify100PointsReached(post: any): Promise<void> {
  // æŠ•ç¨¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°
  await prisma.post.update({
    where: { id: post.id },
    data: {
      agendaLevel: 'FACILITY_AGENDA',
      status: 'PENDING_DEPUTY_DIRECTOR_REVIEW',
      visibility: 'facility' // æ–½è¨­å†…å…¨è·å“¡ã«å…¬é–‹
    }
  });

  // ProposalDocumentè‡ªå‹•ç”Ÿæˆ
  await prisma.proposalDocument.create({
    data: {
      postId: post.id,
      title: post.content.substring(0, 100),
      background: `ã“ã®ææ¡ˆã¯æ–½è¨­å†…ã§100ç‚¹ã‚’çªç ´ã—ã€æ–½è¨­è­°é¡Œå€™è£œã«ãªã‚Šã¾ã—ãŸã€‚`,
      status: 'draft',
      creatorId: post.authorId
    }
  });

  // æŠ•ç¨¿è€…ã¸ã®é€šçŸ¥
  await prisma.notification.create({
    data: {
      userId: post.authorId,
      type: 'score_milestone',
      title: 'æŠ•ç¨¿ãŒ100ç‚¹ã«åˆ°é”ã—ã¾ã—ãŸ',
      message: `ã‚ãªãŸã®æŠ•ç¨¿ãŒ100ç‚¹ã‚’çªç ´ã—ã€æ–½è¨­è­°é¡Œã«ãªã‚Šã¾ã—ãŸã€‚å‰¯çœ‹è­·éƒ¨é•·/çœ‹è­·éƒ¨é•·ã®åˆ¤æ–­ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚`,
      relatedPostId: post.id
    }
  });

  // å‰¯çœ‹è­·éƒ¨é•·/çœ‹è­·éƒ¨é•·ã¸ã®é€šçŸ¥
  const deputyDirectors = await prisma.user.findMany({
    where: {
      permissionLevel: { gte: 8, lt: 9 },
      facilityId: post.facilityId
    }
  });

  await Promise.all(deputyDirectors.map(director =>
    prisma.notification.create({
      data: {
        userId: director.id,
        type: 'review_required',
        title: 'æ–½è¨­è­°é¡Œã®æ‰¿èª/å´ä¸‹ã‚’ãŠé¡˜ã„ã—ã¾ã™',
        message: `ã€Œ${post.content.substring(0, 50)}...ã€ãŒ100ç‚¹ã‚’çªç ´ã—ã¾ã—ãŸã€‚å§”å“¡ä¼šæå‡ºã®æ‰¿èª/å´ä¸‹ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚`,
        relatedPostId: post.id,
        actionUrl: `/proposal-management/review/${post.id}`
      }
    })
  ));

  // æ–½è¨­å†…å…¨è·å“¡ã¸ã®é€šçŸ¥
  const facilityUsers = await prisma.user.findMany({
    where: { facilityId: post.facilityId },
    select: { id: true }
  });

  await Promise.all(facilityUsers.map(user =>
    prisma.notification.create({
      data: {
        userId: user.id,
        type: 'facility_agenda_announced',
        title: 'æ–½è¨­è­°é¡Œåˆ°é”ã®ãŠçŸ¥ã‚‰ã›',
        message: `ã€Œ${post.content.substring(0, 50)}...ã€ãŒæ–½è¨­è­°é¡Œã«ãªã‚Šã¾ã—ãŸã€‚`,
        relatedPostId: post.id
      }
    })
  ));
}
```

**çµ±åˆç®‡æ‰€**:
`src/api/voting.ts`ã®æŠ•ç¥¨å‡¦ç†å†…ã§ã‚¹ã‚³ã‚¢åˆ°é”æ™‚ã«é€šçŸ¥é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã€‚

```typescript
// æŠ•ç¥¨å¾Œã®ã‚¹ã‚³ã‚¢è¨ˆç®—
const newScore = calculateScore(post.id);

if (newScore >= 100 && post.score < 100) {
  await notify100PointsReached(post);
} else if (newScore >= 50 && post.score < 50) {
  await notify50PointsReached(post);
} else if (newScore >= 30 && post.score < 30) {
  await notify30PointsReached(post);
}
```

---

### Phase 4: ProposalDocumentè‡ªå‹•ç”Ÿæˆï¼ˆè¦‹ç©ã‚‚ã‚Š: 1æ—¥ï¼‰

**å®Ÿè£…å†…å®¹**:
- 50ç‚¹åˆ°é”æ™‚ï¼ˆä¸»ä»»æ‰¿èªå¾Œï¼‰
- 100ç‚¹åˆ°é”æ™‚ï¼ˆè‡ªå‹•ï¼‰
- æ–½è¨­æ˜‡æ ¼æ™‚

**è‡ªå‹•ç”Ÿæˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**:
```typescript
interface ProposalDocumentTemplate {
  title: string;
  background: string;
  objectives: string;
  expectedEffects: string;
  implementationPlan: string;
}

function generateProposalDocumentTemplate(post: any, context: string): ProposalDocumentTemplate {
  return {
    title: post.content.substring(0, 100),
    background: `ã“ã®ææ¡ˆã¯${context}ã€æ­£å¼è­°é¡Œã¨ã—ã¦æ¤œè¨ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã—ãŸã€‚\n\nã€ææ¡ˆå†…å®¹ã€‘\n${post.content}`,
    objectives: 'ï¼ˆè¨˜å…¥ã—ã¦ãã ã•ã„ï¼‰',
    expectedEffects: 'ï¼ˆè¨˜å…¥ã—ã¦ãã ã•ã„ï¼‰',
    implementationPlan: 'ï¼ˆè¨˜å…¥ã—ã¦ãã ã•ã„ï¼‰'
  };
}
```

---

## ğŸ“… å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### Week 1: åŸºç›¤å®Ÿè£…ï¼ˆ2æ—¥ï¼‰
| æ—¥ | ã‚¿ã‚¹ã‚¯ | è¦‹ç© |
|----|--------|------|
| Day 1 AM | Prisma Schemaæ‹¡å¼µ + ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | 0.5æ—¥ |
| Day 1 PM - Day 2 | ä¸»ä»»æ‰¿èªç”»é¢UI + ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API | 1.5æ—¥ |

### Week 2: é€šçŸ¥ãƒ»è‡ªå‹•åŒ–ï¼ˆ2.5æ—¥ï¼‰
| æ—¥ | ã‚¿ã‚¹ã‚¯ | è¦‹ç© |
|----|--------|------|
| Day 3-4 | é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹æ‹¡å¼µï¼ˆ30/50/100ç‚¹ï¼‰ | 1.5æ—¥ |
| Day 5 | ProposalDocumentè‡ªå‹•ç”Ÿæˆ | 1æ—¥ |

### Week 3: å¸«é•·ãƒ»å‰¯çœ‹è­·éƒ¨é•·ç”»é¢ï¼ˆ1.5æ—¥ï¼‰
| æ—¥ | ã‚¿ã‚¹ã‚¯ | è¦‹ç© |
|----|--------|------|
| Day 6 | å¸«é•·æ‰¿èªç”»é¢ï¼ˆä¸»ä»»ç”»é¢ã®ã‚³ãƒ”ãƒ¼ï¼‰ | 0.5æ—¥ |
| Day 7 | å‰¯çœ‹è­·éƒ¨é•·æ‰¿èªç”»é¢ | 1æ—¥ |

### Week 4: ãƒ†ã‚¹ãƒˆãƒ»çµ±åˆï¼ˆ1æ—¥ï¼‰
| æ—¥ | ã‚¿ã‚¹ã‚¯ | è¦‹ç© |
|----|--------|------|
| Day 8 | çµ±åˆãƒ†ã‚¹ãƒˆ + ãƒã‚°ä¿®æ­£ | 1æ—¥ |

**åˆè¨ˆè¦‹ç©ã‚‚ã‚Š**: 7æ—¥

---

## âœ… å®Œäº†æ¡ä»¶

- [ ] 30ç‚¹åˆ°é”æ™‚ã®é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã‚‹ã‹
- [ ] 50ç‚¹åˆ°é”æ™‚ã«ä¸»ä»»ã«é€šçŸ¥ãŒå±Šãã‹
- [ ] ä¸»ä»»æ‰¿èªç”»é¢ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
- [ ] å¸«é•·æ‰¿èªç”»é¢ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹
- [ ] 100ç‚¹åˆ°é”æ™‚ã«æ–½è¨­è­°é¡Œã«æ˜‡æ ¼ã™ã‚‹ã‹
- [ ] ProposalDocumentãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã‹
- [ ] æŠ•ç¨¿å…¬é–‹ç¯„å›²ãŒæ­£ã—ãå¤‰æ›´ã•ã‚Œã‚‹ã‹
- [ ] å…¨é€šçŸ¥ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ20æ—¥
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æœªç€æ‰‹
