# ProposalSelectionPage åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœå ±å‘Šæ›¸

**æ–‡æ›¸ç•ªå·**: MED-CONF-2025-1026-009
**ä½œæˆæ—¥**: 2025å¹´10æœˆ26æ—¥
**ä½œæˆè€…**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ 
**ä»¶å**: ProposalSelectionPageæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆã®åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ç¢ºèªçµæœ

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

VoiceDriveãƒãƒ¼ãƒ ã‹ã‚‰ã®ã€ŒProposalSelectionPageæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆã€ã«å¯¾ã™ã‚‹å›ç­”ã§ã™ã€‚
ProposalSelectionPageã¯**VoiceDriveå´ã®UIãƒšãƒ¼ã‚¸**ã§ã‚ã‚Šã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¯**ãƒ‡ãƒ¼ã‚¿æä¾›ã®ã¿**ã‚’æ‹…å½“ã—ã¾ã™ã€‚

### çµè«–
- âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¿½åŠ **: ä¸è¦ï¼ˆVoiceDriveå´ã¯è¡¨ç¤ºã®ã¿ã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãŒå…¨ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼‰
- âœ… **APIå®Ÿè£…**: 3ã¤ã®APIå®Ÿè£…ãŒå¿…è¦ï¼ˆææ¡ˆå–å¾—ã€é¸æŠç¢ºå®šã€å†èª¿æ•´ä¾é ¼ï¼‰
- âš ï¸ **æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µ**: InterviewReservationãƒ†ãƒ¼ãƒ–ãƒ«ã®ç¢ºèªãƒ»è»½å¾®ãªèª¿æ•´ã®ã¿
- âœ… **ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ 100%ï¼ˆææ¡ˆç”Ÿæˆã€ãƒãƒƒãƒãƒ³ã‚°ã€äºˆç´„ç¢ºå®šï¼‰

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹

| ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | VoiceDrive |
|---------|------------|-----------|
| ææ¡ˆç”Ÿæˆãƒ‡ãƒ¼ã‚¿ï¼ˆAIãƒãƒƒãƒãƒ³ã‚°çµæœï¼‰ | âœ… 100%ç®¡ç† | è¡¨ç¤ºã®ã¿ |
| é¢è«‡æ‹…å½“è€…æƒ…å ± | âœ… 100%ç®¡ç† | è¡¨ç¤ºã®ã¿ |
| ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æƒ…å ± | âœ… 100%ç®¡ç† | è¡¨ç¤ºã®ã¿ |
| é¸æŠçµæœ | âœ… 100%ç®¡ç† | é€ä¿¡ã®ã¿ |
| UIçŠ¶æ…‹ï¼ˆé¸æŠçŠ¶æ…‹ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å…¥åŠ›ï¼‰ | - | ãƒ¡ãƒ¢ãƒªå†…ã®ã¿ï¼ˆæ°¸ç¶šåŒ–ãªã—ï¼‰ |
| APIã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆ1åˆ†ï¼‰ | - | ãƒ¡ãƒ¢ãƒªå†…ã®ã¿ï¼ˆæ°¸ç¶šåŒ–ãªã—ï¼‰ |

**é‡è¦åŸå‰‡**:
- VoiceDriveå´ã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«**ä¸€åˆ‡ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ãªã„**
- å…¨ãƒ‡ãƒ¼ã‚¿ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å–å¾—ï¼ˆRead-Only APIï¼‰
- é¸æŠçµæœã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸é€ä¿¡ã®ã¿ï¼ˆWrite-Throughï¼‰
- VoiceDriveã¯ã€Œè¡¨ç¤ºãƒ»é¸æŠUIã€ã®ã¿ã‚’æä¾›

### æ¨å®šå®Ÿè£…æ™‚é–“
- **APIå®Ÿè£…**: 2æ—¥ï¼ˆ16æ™‚é–“ï¼‰
  - GET /api/v2/booking/:id/proposals: 0.5æ—¥
  - POST /api/v2/booking/confirm: 0.5æ—¥
  - POST /api/v2/booking/reschedule-request: 0.5æ—¥
  - ãƒ†ã‚¹ãƒˆãƒ»çµ±åˆ: 0.5æ—¥

---

## 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¦ä»¶

### 1.1 VoiceDriveå´ãƒ†ãƒ¼ãƒ–ãƒ«

#### âŒ æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«ä¸è¦

**ç†ç”±**:
- ProposalSelectionPageã¯VoiceDriveå´ã®UIã ãŒã€ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ 
- VoiceDriveå´ã¯ã€Œè¡¨ç¤ºãƒ»é¸æŠã€ã®ã¿ã§ã€ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã¯ä¸è¦
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯ãƒ¡ãƒ¢ãƒªå†…ï¼ˆ1åˆ†æœ‰åŠ¹ï¼‰ã§ååˆ†

#### âœ… æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«åˆ©ç”¨ã®ã¿ï¼ˆãƒ‡ãƒ¼ã‚¿è¿½åŠ ãªã—ï¼‰

æ—¢å­˜ã®`InterviewReservation`ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’**å‚ç…§ã®ã¿**ï¼ˆæ›¸ãè¾¼ã¿ãªã—ï¼‰:

```prisma
model InterviewReservation {
  id                  String   @id @default(cuid())
  type                InterviewReservationType
  status              ReservationStatus @default(PENDING)
  staffId             String   @map("staff_id")
  scheduledDate       DateTime @map("scheduled_date")
  scheduledTime       String   @map("scheduled_time")
  voicedriveRequestId String?  @unique @map("voicedrive_request_id") // â† ã‚­ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  // ... ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
}
```

**VoiceDriveã®åˆ©ç”¨æ–¹æ³•**:
- `voicedriveRequestId`ã‚’ã‚­ãƒ¼ã«ã—ã¦åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIã‚’å‘¼ã³å‡ºã™ã®ã¿
- VoiceDriveå´ã§ã¯**ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã¾ãªã„**

### 1.2 åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ¨å®šï¼‰

#### InterviewReservationï¼ˆæ—¢å­˜ã€ç¢ºèªæ¸ˆã¿ï¼‰

schema.prisma 487-542è¡Œç›®ã«å®Ÿè£…æ¸ˆã¿:

```prisma
model InterviewReservation {
  id               String   @id @default(cuid())
  type             InterviewReservationType
  subType          String?  @map("sub_type")
  status           ReservationStatus @default(PENDING)
  urgency          UrgencyLevel?

  // è·å“¡æƒ…å ±
  staffId          String   @map("staff_id")
  staffName        String   @map("staff_name")
  department       String
  position         String
  experienceYears  Int      @default(0) @map("experience_years")

  // äºˆç´„è©³ç´°
  scheduledDate    DateTime @map("scheduled_date")
  scheduledTime    String   @map("scheduled_time") // HH:MMå½¢å¼
  duration         Int      @default(30)
  location         String?
  onlineUrl        String?  @map("online_url")

  // ã‚µãƒãƒ¼ãƒˆé¢è«‡ç”¨
  supportCategory  String?  @map("support_category")
  supportTopic     String?  @map("support_topic")
  supportDetails   String?  @map("support_details")
  voicedriveRequestId String? @unique @map("voicedrive_request_id") // â† VoiceDriveé€£æºã‚­ãƒ¼

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  source           ReservationSource @default(SYSTEM)
  createdBy        String   @map("created_by")
  createdAt        DateTime @default(now()) @map("created_at")
  updatedAt        DateTime @updatedAt @map("updated_at")
  notes            String?

  // Relations
  logs             InterviewReservationLog[]
  notifications    InterviewNotificationQueue[]

  @@index([voicedriveRequestId]) // â† æ—¢ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å­˜åœ¨
}
```

**ç¢ºèªçµæœ**: âœ… æ—¢å­˜å®Ÿè£…ã§ååˆ†

#### âš ï¸ æ¨å¥¨: ææ¡ˆç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§AIãƒãƒƒãƒãƒ³ã‚°çµæœã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«:

```prisma
// ææ¡ˆã‚»ãƒƒãƒˆï¼ˆ3å€™è£œã‚»ãƒƒãƒˆï¼‰
model ProposalSet {
  id                    String   @id @default(cuid())
  voicedriveRequestId   String   @unique
  medicalRequestId      String   // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ãƒªã‚¯ã‚¨ã‚¹ãƒˆID
  interviewReservationId String  // InterviewReservationã¨ã®ç´ä»˜ã‘
  status                String   @default("pending_selection") // pending_selection, confirmed, expired
  expiresAt             DateTime // é¸æŠæœŸé™

  // é€£çµ¡å…ˆæƒ…å ±
  urgentPhone           String
  email                 String

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  aiProcessingModel     String?  // GPT-4ç­‰
  totalCandidates       Int      // ç·å€™è£œæ•°ï¼ˆé€šå¸¸50-100ä»¶ï¼‰
  selectedTop           Int      @default(3) // è¡¨ç¤ºæ•°ï¼ˆå›ºå®š3ä»¶ï¼‰

  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  // Relations
  proposals             ProposalCandidate[]

  @@index([voicedriveRequestId])
  @@index([status])
  @@index([expiresAt])
  @@map("proposal_sets")
}

// å€‹åˆ¥ææ¡ˆå€™è£œ
model ProposalCandidate {
  id                String   @id @default(cuid())
  proposalSetId     String
  proposalId        String   @unique // PROP-2025-A001å½¢å¼
  rank              Int      // 1, 2, 3
  confidence        Float    // 0-100

  // é¢è«‡æ‹…å½“è€…æƒ…å ±
  interviewerId     String
  interviewerName   String
  interviewerTitle  String
  interviewerDept   String
  interviewerExp    String   // çµŒé¨“èª¬æ˜æ–‡
  specialties       Json?    // å°‚é–€åˆ†é‡ã‚¿ã‚°é…åˆ—
  photoUrl          String?

  // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æƒ…å ±
  scheduleDate      String   // YYYY-MM-DD
  scheduleTime      String   // HH:MM
  duration          Int      // åˆ†
  location          String
  format            String   // face_to_face, online, phone

  // AIæ¨è–¦ç†ç”±
  recommendTitle    String
  recommendSummary  String
  highlights        Json     // ãƒã‚¤ãƒ©ã‚¤ãƒˆé…åˆ—
  rankingReason     String

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // Relations
  proposalSet       ProposalSet @relation(fields: [proposalSetId], references: [id])

  @@index([proposalSetId])
  @@index([rank])
  @@map("proposal_candidates")
}
```

**å®Ÿè£…å„ªå…ˆåº¦**: ğŸŸ¡ ä¸­ï¼ˆç¾çŠ¶ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§ãƒ¡ãƒ¢ãƒªç®¡ç†ã§ã‚‚OKã€å°†æ¥çš„ã«DBç®¡ç†æ¨å¥¨ï¼‰

---

## 2. APIå®Ÿè£…è¦ä»¶

### 2.1 å¿…é ˆAPIï¼ˆ3ä»¶ï¼‰

#### API-1: ææ¡ˆãƒ‡ãƒ¼ã‚¿å–å¾—API

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/v2/booking/:voicedriveRequestId/proposals`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/v2/booking/cuid__abc123xyz456/proposals HTTP/1.1
Authorization: Bearer {token}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰**:
```json
{
  "success": true,
  "data": {
    "voicedriveRequestId": "cuid__abc123xyz456",
    "requestId": "MED-REQ-2025-001234",
    "proposals": [
      {
        "id": "PROP-2025-A001",
        "rank": 1,
        "confidence": 95,
        "interviewer": {
          "id": "EMP-2025-1234",
          "name": "å±±ç”° å¤ªéƒ",
          "title": "äººäº‹éƒ¨ ã‚­ãƒ£ãƒªã‚¢æ”¯æ´èª² èª²é•·",
          "department": "äººäº‹éƒ¨",
          "experience": "15å¹´ã®ã‚­ãƒ£ãƒªã‚¢æ”¯æ´çµŒé¨“ã€çœ‹è­·å¸«ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹è¨­è¨ˆã«ç²¾é€š",
          "specialties": ["ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹è¨­è¨ˆ", "ãƒ¯ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ•ãƒãƒ©ãƒ³ã‚¹", "ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—æ”¯æ´"],
          "photo": "https://medical.system.local/photos/emp-1234.jpg"
        },
        "schedule": {
          "date": "2025-10-30",
          "time": "14:00",
          "duration": 60,
          "location": "äººäº‹éƒ¨ä¼šè­°å®¤A",
          "format": "face_to_face"
        },
        "staffFriendlyDisplay": {
          "title": "ã‚ãªãŸã«æœ€é©ãªé¢è«‡å€™è£œ",
          "summary": "çµŒé¨“è±Šå¯Œãªå±±ç”°èª²é•·ã¨ã®é¢è«‡ã§ã™ã€‚ã‚ãªãŸã®å¸Œæœ›ã™ã‚‹æ™‚é–“å¸¯ã§ã€çœ‹è­·å¸«ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã«ã¤ã„ã¦æ·±ãç›¸è«‡ã§ãã¾ã™ã€‚",
          "highlights": [
            "ã‚ãªãŸã®å¸Œæœ›æ™‚é–“å¸¯ã€Œåˆå¾Œã€ã«å®Œå…¨ä¸€è‡´",
            "çœ‹è­·å¸«ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹è¨­è¨ˆã®å°‚é–€å®¶",
            "å‰å›ã®é¢è«‡ã§é«˜è©•ä¾¡ã‚’ç²å¾—"
          ]
        },
        "rankingReason": "ã‚ãªãŸã®å¸Œæœ›æ™‚é–“å¸¯ã¨çµŒé¨“å¹´æ•°ã«æœ€ã‚‚åˆè‡´ã—ã¦ã„ã¾ã™"
      },
      {
        "id": "PROP-2025-A002",
        "rank": 2,
        "confidence": 88,
        "interviewer": { /* ... */ },
        "schedule": { /* ... */ },
        "staffFriendlyDisplay": { /* ... */ },
        "rankingReason": "..."
      },
      {
        "id": "PROP-2025-A003",
        "rank": 3,
        "confidence": 82,
        "interviewer": { /* ... */ },
        "schedule": { /* ... */ },
        "staffFriendlyDisplay": { /* ... */ },
        "rankingReason": "..."
      }
    ],
    "expiresAt": "2025-10-28T23:59:59.999Z",
    "contactInfo": {
      "urgentPhone": "03-1234-5678",
      "email": "hr-support@hospital.example.com"
    },
    "metadata": {
      "processingModel": "GPT-4-turbo",
      "totalCandidates": 87,
      "selectedTop": 3,
      "dataPrivacy": "å€‹äººæƒ…å ±ä¿è­·æ³•æº–æ‹ "
    },
    "status": "pending_selection"
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰**:
```json
{
  "success": false,
  "error": "ææ¡ˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼ˆã¾ã ç”Ÿæˆã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼‰",
  "statusCode": 404
}
```

**ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰**:
- `404`: ææ¡ˆãŒè¦‹ã¤ã‹ã‚‰ãªã„ï¼ˆAIå‡¦ç†æœªå®Œäº†ï¼‰
- `410`: æœŸé™åˆ‡ã‚Œï¼ˆexpiresAtã‚’éãã¦ã„ã‚‹ï¼‰
- `408`: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆAIå‡¦ç†ã«æ™‚é–“ãŒã‹ã‹ã‚Šã™ãï¼‰
- `500`: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

**å®Ÿè£…å ´æ‰€**: `src/api/v2/booking/[voicedriveRequestId]/proposals.ts`ï¼ˆæ–°è¦ï¼‰

**å®Ÿè£…è¦ä»¶**:
1. InterviewReservationãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰`voicedriveRequestId`ã§ãƒ¬ã‚³ãƒ¼ãƒ‰å–å¾—
2. AIãƒãƒƒãƒãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³å‘¼ã³å‡ºã—ï¼ˆæ—¢å­˜å®Ÿè£…ã‚’åˆ©ç”¨ï¼‰
3. ææ¡ˆãƒ‡ãƒ¼ã‚¿3ä»¶ç”Ÿæˆï¼ˆProposalSetãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ or ãƒ¡ãƒ¢ãƒªç®¡ç†ï¼‰
4. expiresAtè¨ˆç®—ï¼ˆç”³è¾¼ã‹ã‚‰72æ™‚é–“å¾Œï¼‰
5. æ‹…å½“è€…æƒ…å ±ã‚’Employeeãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰å–å¾—
6. ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ•´å½¢

**æ¨å®šå·¥æ•°**: 0.5æ—¥ï¼ˆ4æ™‚é–“ï¼‰

---

#### API-2: é¸æŠç¢ºå®šAPI

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/v2/booking/confirm`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "requestId": "MED-REQ-2025-001234",
  "voicedriveRequestId": "cuid__abc123xyz456",
  "selectedProposalId": "PROP-2025-A001",
  "staffFeedback": "æ™‚é–“ãŒã¡ã‚‡ã†ã©è‰¯ãã€å°‚é–€æ€§ã‚‚é«˜ãã†ã§å®‰å¿ƒã—ã¾ã—ãŸ",
  "selectedBy": "EMP-2025-5678",
  "selectionTimestamp": "2025-10-27T10:30:00.000Z"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰**:
```json
{
  "success": true,
  "message": "äºˆç´„ãŒç¢ºå®šã—ã¾ã—ãŸ",
  "bookingId": "BOOKING-2025-001234",
  "confirmedInterview": {
    "interviewId": "INT-2025-001234",
    "interviewerName": "å±±ç”° å¤ªéƒ",
    "scheduledDate": "2025-10-30",
    "scheduledTime": "14:00",
    "duration": 60,
    "location": "äººäº‹éƒ¨ä¼šè­°å®¤A",
    "format": "face_to_face"
  }
}
```

**å®Ÿè£…å ´æ‰€**: `src/api/v2/booking/confirm.ts`ï¼ˆæ–°è¦ï¼‰

**å®Ÿè£…è¦ä»¶**:
1. ProposalSetãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã¾ãŸã¯ãƒ¡ãƒ¢ãƒªï¼‰ã‹ã‚‰ææ¡ˆãƒ‡ãƒ¼ã‚¿å–å¾—
2. é¸æŠã—ãŸææ¡ˆã®è©³ç´°ã‚’å–å¾—ï¼ˆrank, interviewer, scheduleç­‰ï¼‰
3. InterviewReservationãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ›´æ–°:
   - `status`: PENDING â†’ CONFIRMED
   - `scheduledDate`, `scheduledTime`, `duration`, `location`ã‚’è¨­å®š
4. Interviewãƒ†ãƒ¼ãƒ–ãƒ«ã«æ–°è¦ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆï¼ˆé¢è«‡è¨˜éŒ²ç”¨ï¼‰
5. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼çµ±åˆï¼ˆæ‹…å½“è€…ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«äºˆç´„è¿½åŠ ï¼‰
6. é€šçŸ¥é€ä¿¡:
   - è·å“¡ã¸ã®ç¢ºå®šé€šçŸ¥
   - æ‹…å½“è€…ã¸ã®æ–°è¦äºˆç´„é€šçŸ¥
7. VoiceDriveã¸ã®Webhooké€ä¿¡ï¼ˆäºˆç´„ç¢ºå®šé€šçŸ¥ï¼‰

**æ¨å®šå·¥æ•°**: 0.5æ—¥ï¼ˆ4æ™‚é–“ï¼‰

---

#### API-3: å†èª¿æ•´ä¾é ¼API

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/v2/booking/reschedule-request`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "requestId": "MED-REQ-2025-001234",
  "voicedriveRequestId": "cuid__abc123xyz456",
  "adjustmentType": "schedule_change",
  "reason": "ææ¡ˆã•ã‚ŒãŸæ™‚é–“ã§ã¯éƒ½åˆãŒã¤ã‹ãªã„ãŸã‚",
  "staffPreferences": {
    "alternativeDates": ["2025-11-01", "2025-11-02"],
    "alternativeTimes": ["åˆå‰ä¸­", "17æ™‚ä»¥é™"],
    "notes": "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å½¢å¼ã‚’å¸Œæœ›ã—ã¾ã™"
  },
  "requestedBy": "EMP-2025-5678",
  "requestTimestamp": "2025-10-27T10:30:00.000Z"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰**:
```json
{
  "success": true,
  "adjustmentId": "ADJ-2025-001234",
  "message": "å†èª¿æ•´ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚æ–°ã—ã„ææ¡ˆã‚’ä½œæˆä¸­ã§ã™ï¼ˆé€šå¸¸3-5åˆ†ï¼‰ã€‚",
  "estimatedCompletionTime": "2025-10-27T10:35:00.000Z"
}
```

**å®Ÿè£…å ´æ‰€**: `src/api/v2/booking/reschedule-request.ts`ï¼ˆæ–°è¦ï¼‰

**å®Ÿè£…è¦ä»¶**:
1. ProposalSetãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°: `pending_selection` â†’ `adjustment_requested`
2. èª¿æ•´å±¥æ­´ã‚’è¨˜éŒ²ï¼ˆAdjustmentRequestãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ æ¤œè¨ï¼‰
3. AIãƒãƒƒãƒãƒ³ã‚°ã‚¨ãƒ³ã‚¸ãƒ³ã‚’å†å®Ÿè¡Œ:
   - è·å“¡ã®ä»£æ›¿å¸Œæœ›æ—¥æ™‚ã‚’è€ƒæ…®
   - æ–°ã—ã„ææ¡ˆ3ä»¶ã‚’ç”Ÿæˆ
4. æ–°ã—ã„ProposalSetã‚’ä½œæˆï¼ˆ`revised_pending_selection`ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
5. VoiceDriveã¸ã®Webhooké€ä¿¡ï¼ˆå†èª¿æ•´å®Œäº†é€šçŸ¥ï¼‰
6. è·å“¡ã¸ã®é€šçŸ¥ï¼ˆæ–°ã—ã„ææ¡ˆæº–å‚™å®Œäº†ï¼‰

**æ¨å®šå·¥æ•°**: 0.5æ—¥ï¼ˆ4æ™‚é–“ï¼‰

---

### 2.2 APIå®Ÿè£…ã‚µãƒãƒªãƒ¼

| API | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | å®Ÿè£…çŠ¶æ³ | æ¨å®šå·¥æ•° |
|-----|-------------|---------|---------|---------|
| ææ¡ˆå–å¾— | /api/v2/booking/:id/proposals | GET | âŒ æœªå®Ÿè£… | 0.5æ—¥ |
| é¸æŠç¢ºå®š | /api/v2/booking/confirm | POST | âŒ æœªå®Ÿè£… | 0.5æ—¥ |
| å†èª¿æ•´ä¾é ¼ | /api/v2/booking/reschedule-request | POST | âŒ æœªå®Ÿè£… | 0.5æ—¥ |
| **åˆè¨ˆ** | - | - | - | **1.5æ—¥** |

---

## 3. VoiceDriveå´ã®ä¸è¶³å®Ÿè£…

### 3.1 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´APIé–¢æ•°

#### âŒ submitChoice() é–¢æ•°ã®å®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/api/medicalSystemAPI.ts`ï¼ˆVoiceDriveå´ï¼‰

**ç¾çŠ¶**: æœªå®Ÿè£…ï¼ˆProposalSelectionPage.tsxã§å‚ç…§ã•ã‚Œã¦ã„ã‚‹ãŒé–¢æ•°ãŒå­˜åœ¨ã—ãªã„ï¼‰

**å¿…è¦ãªå®Ÿè£…**:
```typescript
export async function submitChoice(params: {
  voicedriveRequestId: string;
  selectedProposalId: string;
  feedback?: string;
}): Promise<{
  success: boolean;
  message: string;
  bookingId?: string;
}> {
  // ProposalResponseã‹ã‚‰requestIdã‚’å–å¾—ã™ã‚‹å¿…è¦ã‚ã‚Š
  // çŠ¶æ…‹ç®¡ç†ã§ProposalResponseã‚’ä¿æŒã—ã¦ãŠã
  const proposalData = getProposalDataFromCache(params.voicedriveRequestId);

  if (!proposalData) {
    throw new Error('ææ¡ˆãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
  }

  const confirmation: ChoiceConfirmation = {
    requestId: proposalData.requestId, // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ requestId
    voicedriveRequestId: params.voicedriveRequestId,
    selectedProposalId: params.selectedProposalId,
    staffFeedback: params.feedback,
    selectedBy: getCurrentEmployeeId(), // ç¾åœ¨ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®employeeId
    selectionTimestamp: new Date().toISOString()
  };

  return await confirmChoice(confirmation);
}
```

**èª²é¡Œ**:
- `requestId`ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´IDï¼‰ã®å–å¾—ãŒå¿…è¦
- ProposalResponseã«å«ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã€çŠ¶æ…‹ç®¡ç†ã§ä¿æŒã™ã‚‹å¿…è¦ã‚ã‚Š
- `getCurrentEmployeeId()`ã®å®Ÿè£…ãŒå¿…è¦ï¼ˆJWTèªè¨¼ã‹ã‚‰å–å¾—ï¼‰

#### âš ï¸ requestScheduleAdjustment() ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/api/medicalSystemAPI.ts`ï¼ˆVoiceDriveå´ï¼‰

**ç¾çŠ¶**: å®Ÿè£…æ¸ˆã¿ã ãŒã€ProposalSelectionPageã®å‘¼ã³å‡ºã—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ä¸ä¸€è‡´

**å•é¡Œç‚¹**:
- ProposalSelectionPage.tsx 126è¡Œç›®ã§ã¯ç°¡æ˜“ç‰ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ`{voicedriveRequestId, reason, adjustmentType}`ã®ã¿ï¼‰
- medicalSystemAPI.tsã§ã¯å®Œå…¨ç‰ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ`AdjustmentRequest`å‹ï¼‰ã‚’è¦æ±‚

**ä¿®æ­£æ¡ˆ1: ç°¡æ˜“ç‰ˆãƒ©ãƒƒãƒ‘ãƒ¼é–¢æ•°è¿½åŠ **
```typescript
export async function requestScheduleAdjustmentSimple(params: {
  voicedriveRequestId: string;
  reason: string;
  adjustmentType: 'schedule_change';
}): Promise<{
  success: boolean;
  adjustmentId?: string;
  message: string;
}> {
  const proposalData = getProposalDataFromCache(params.voicedriveRequestId);

  const fullRequest: AdjustmentRequest = {
    requestId: proposalData?.requestId || '',
    voicedriveRequestId: params.voicedriveRequestId,
    adjustmentType: params.adjustmentType,
    reason: params.reason,
    staffPreferences: {}, // ç©ºã§OK
    requestedBy: getCurrentEmployeeId(),
    requestTimestamp: new Date().toISOString()
  };

  return await requestScheduleAdjustment(fullRequest);
}
```

**ä¿®æ­£æ¡ˆ2: ProposalSelectionPageã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¿®æ­£**
- å®Œå…¨ç‰ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£

**æ¨å¥¨**: ä¿®æ­£æ¡ˆ1ï¼ˆæ—¢å­˜ã®requestScheduleAdjustment()ã‚’ç¶­æŒã€ãƒ©ãƒƒãƒ‘ãƒ¼è¿½åŠ ï¼‰

---

## 4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### 4.1 ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

#### VoiceDriveå´
- **èªè¨¼**: JWTèªè¨¼ï¼ˆå®Ÿè£…äºˆå®šï¼‰
- **èªå¯**: è‡ªåˆ†è‡ªèº«ã®é¢è«‡å€™è£œã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
  - `voicedriveRequestId`ã¨ãƒ­ã‚°ã‚¤ãƒ³ä¸­`employeeId`ã®ç´ä»˜ã‘æ¤œè¨¼

#### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´
- **APIèªè¨¼**: Bearer Tokenï¼ˆæ—¢å­˜å®Ÿè£…ï¼‰
- **èªå¯**:
  - ææ¡ˆå–å¾—API: ç”³è¾¼è€…æœ¬äººã®ã¿
  - é¸æŠç¢ºå®šAPI: ç”³è¾¼è€…æœ¬äººã®ã¿
  - å†èª¿æ•´ä¾é ¼API: ç”³è¾¼è€…æœ¬äººã®ã¿

### 4.2 ãƒ‡ãƒ¼ã‚¿ä¿è­·

- **è»¢é€ä¸­**: HTTPSï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- **å€‹äººæƒ…å ±**:
  - æ‹…å½“è€…åã€å†™çœŸã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†
  - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯ä»»æ„ï¼ˆå€‹äººæƒ…å ±å«ã¾ãªã„æƒ³å®šï¼‰
- **ãƒ­ã‚°è¨˜éŒ²**: é¸æŠç¢ºå®šã€å†èª¿æ•´ä¾é ¼ã¯ç›£æŸ»ãƒ­ã‚°ã«è¨˜éŒ²

### 4.3 ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

- **VoiceDrive â†’ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ **: 30ç§’ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
- **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ AIå‡¦ç†**: 5åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†ï¼‰

---

## 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

### 5.1 ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ 

| API | ç›®æ¨™ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ  | è¨±å®¹æœ€å¤§æ™‚é–“ |
|-----|------------------|------------|
| ææ¡ˆå–å¾— | < 2ç§’ | 5ç§’ |
| é¸æŠç¢ºå®š | < 3ç§’ | 10ç§’ |
| å†èª¿æ•´ä¾é ¼ | < 1ç§’ï¼ˆå—ä»˜ã®ã¿ï¼‰ | 3ç§’ |

### 5.2 ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

#### VoiceDriveå´
- **ææ¡ˆãƒ‡ãƒ¼ã‚¿**: 1åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆãƒ¡ãƒ¢ãƒªå†…ï¼‰
  - ç†ç”±: æœŸé™ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ä¸­ã®å†èª­ã¿è¾¼ã¿å¯¾ç­–
  - ç„¡åŠ¹åŒ–: é¸æŠç¢ºå®šå¾Œã€å†èª¿æ•´ä¾é ¼å¾Œ

#### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´
- **ææ¡ˆãƒ‡ãƒ¼ã‚¿**: ProposalSetãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ï¼ˆæ°¸ç¶šåŒ–ï¼‰
  - æœ‰åŠ¹æœŸé™: 72æ™‚é–“ï¼ˆexpiresAtï¼‰
  - æœŸé™åˆ‡ã‚Œãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•å‰Šé™¤ï¼ˆãƒãƒƒãƒå‡¦ç†ï¼‰

---

## 6. å®Ÿè£…ãƒ•ãƒ­ãƒ¼

### 6.1 ææ¡ˆå–å¾—ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant VD as VoiceDrive UI
    participant VDAPI as VoiceDrive API
    participant MCP as MCPã‚µãƒ¼ãƒãƒ¼
    participant MSAPI as åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ API
    participant AI as AIãƒãƒƒãƒãƒ³ã‚°<br/>ã‚¨ãƒ³ã‚¸ãƒ³
    participant DB as åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ DB

    VD->>VDAPI: fetchProposals(voicedriveRequestId)
    VDAPI->>MCP: GET /api/medical/proposals/:id
    MCP->>MSAPI: GET /api/v2/booking/:id/proposals

    MSAPI->>DB: InterviewReservationå–å¾—
    DB-->>MSAPI: äºˆç´„ãƒ‡ãƒ¼ã‚¿

    MSAPI->>AI: generateProposals(äºˆç´„ãƒ‡ãƒ¼ã‚¿)
    AI->>DB: Employeeæ¤œç´¢ï¼ˆæ‹…å½“è€…å€™è£œï¼‰
    AI->>AI: ãƒãƒƒãƒãƒ³ã‚°ã‚¹ã‚³ã‚¢è¨ˆç®—
    AI->>AI: ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ±ºå®šï¼ˆTop 3ï¼‰
    AI-->>MSAPI: ææ¡ˆ3ä»¶

    MSAPI->>DB: ProposalSetä¿å­˜
    MSAPI-->>MCP: ProposalResponse
    MCP-->>VDAPI: ProposalResponse
    VDAPI->>VDAPI: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜ï¼ˆ1åˆ†ï¼‰
    VDAPI-->>VD: ææ¡ˆãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
```

### 6.2 é¸æŠç¢ºå®šãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant VD as VoiceDrive UI
    participant VDAPI as VoiceDrive API
    participant MCP as MCPã‚µãƒ¼ãƒãƒ¼
    participant MSAPI as åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ API
    participant DB as åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ DB
    participant Cal as ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼<br/>çµ±åˆ
    participant Notif as é€šçŸ¥<br/>ã‚·ã‚¹ãƒ†ãƒ 

    VD->>VD: å€™è£œé¸æŠ
    VD->>VD: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å…¥åŠ›ï¼ˆä»»æ„ï¼‰
    VD->>VDAPI: submitChoice(...)
    VDAPI->>MCP: POST /api/medical/confirm-choice
    MCP->>MSAPI: POST /api/v2/booking/confirm

    MSAPI->>DB: ProposalSetå–å¾—
    MSAPI->>DB: InterviewReservationæ›´æ–°<br/>(status: CONFIRMED)
    MSAPI->>DB: Interviewä½œæˆ

    MSAPI->>Cal: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼äºˆç´„è¿½åŠ 
    Cal-->>MSAPI: äºˆç´„å®Œäº†

    MSAPI->>Notif: è·å“¡é€šçŸ¥é€ä¿¡
    MSAPI->>Notif: æ‹…å½“è€…é€šçŸ¥é€ä¿¡

    MSAPI->>MCP: Webhooké€ä¿¡æº–å‚™
    MCP-->>VDAPI: äºˆç´„ç¢ºå®šå®Œäº†

    VDAPI-->>VD: ç¢ºå®šãƒšãƒ¼ã‚¸ã¸é·ç§»
```

---

## 7. å®Ÿè£…å„ªå…ˆåº¦

### ğŸ”´ Phase 1ï¼ˆé«˜å„ªå…ˆåº¦ãƒ»å¿…é ˆï¼‰

**æœŸé–“**: 2025å¹´11æœˆ1æ—¥ï¼ˆé‡‘ï¼‰ã€œ 11æœˆ8æ—¥ï¼ˆé‡‘ï¼‰ï¼ˆ5å–¶æ¥­æ—¥ï¼‰

| ä½œæ¥­å†…å®¹ | æ‹…å½“ | æ¨å®šå·¥æ•° | çŠ¶æ…‹ |
|---------|------|---------|------|
| API-1å®Ÿè£…ï¼ˆææ¡ˆå–å¾—ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | 0.5æ—¥ | â³ å¾…æ©Ÿä¸­ |
| API-2å®Ÿè£…ï¼ˆé¸æŠç¢ºå®šï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | 0.5æ—¥ | â³ å¾…æ©Ÿä¸­ |
| API-3å®Ÿè£…ï¼ˆå†èª¿æ•´ä¾é ¼ï¼‰ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | 0.5æ—¥ | â³ å¾…æ©Ÿä¸­ |
| submitChoice()å®Ÿè£… | VoiceDrive | 0.5æ—¥ | â³ å¾…æ©Ÿä¸­ |
| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ | VoiceDrive | 0.5æ—¥ | â³ å¾…æ©Ÿä¸­ |
| çµ±åˆãƒ†ã‚¹ãƒˆ | ä¸¡ãƒãƒ¼ãƒ  | 0.5æ—¥ | â³ å¾…æ©Ÿä¸­ |

**åˆè¨ˆ**: 3æ—¥ï¼ˆ24æ™‚é–“ï¼‰

### ğŸŸ¡ Phase 2ï¼ˆä¸­å„ªå…ˆåº¦ãƒ»æ¨å¥¨ï¼‰

**æœŸé–“**: TBDï¼ˆPhase 1å®Œäº†å¾Œï¼‰

| ä½œæ¥­å†…å®¹ | æ‹…å½“ | æ¨å®šå·¥æ•° |
|---------|------|---------|
| ProposalSetãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ  | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | 0.5æ—¥ |
| ProposalCandidateãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ  | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | 0.5æ—¥ |
| ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | 0.5æ—¥ |

**åˆè¨ˆ**: 1.5æ—¥ï¼ˆ12æ™‚é–“ï¼‰

### ğŸŸ¢ Phase 3ï¼ˆä½å„ªå…ˆåº¦ãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

| ä½œæ¥­å†…å®¹ | æ‹…å½“ | æ¨å®šå·¥æ•° |
|---------|------|---------|
| ãƒãƒ¼ãƒªãƒ³ã‚°æ©Ÿèƒ½å®Ÿè£… | VoiceDrive | 1æ—¥ |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ– | VoiceDrive | 0.5æ—¥ |

---

## 8. VoiceDriveãƒãƒ¼ãƒ ã¸ã®ç¢ºèªäº‹é …

### è³ªå•1: ProposalResponseã®requestIdç®¡ç†

**è³ªå•**:
VoiceDriveå´ã§ã¯ã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®`requestId`ï¼ˆProposalResponse.requestIdï¼‰ã‚’ã©ã“ã«ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ

**èƒŒæ™¯**:
- submitChoice()é–¢æ•°ã§`requestId`ãŒå¿…è¦
- ProposalResponseã«å«ã¾ã‚Œã¦ã„ã‚‹ãŒã€VoiceDriveå´ã§æ°¸ç¶šåŒ–ã™ã‚‹ã‹ï¼Ÿ

**é¸æŠè‚¢**:
1. **ãƒ¡ãƒ¢ãƒªå†…ã®ã¿**ï¼ˆæ¨å¥¨ï¼‰: ReactçŠ¶æ…‹ç®¡ç†ï¼ˆuseStateï¼‰ã§ä¿æŒã€ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«å†å–å¾—
2. **LocalStorage**: ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¸€æ™‚ä¿å­˜ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã‚ã‚Šï¼‰
3. **VoiceDrive DB**: InterviewReservationãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆãƒ‡ãƒ¼ã‚¿é‡è¤‡ï¼‰

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®æ¨å¥¨**: ã‚ªãƒ—ã‚·ãƒ§ãƒ³1ï¼ˆãƒ¡ãƒ¢ãƒªå†…ã®ã¿ï¼‰

### è³ªå•2: getCurrentEmployeeId()ã®å®Ÿè£…

**è³ªå•**:
ç¾åœ¨ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã®è·å“¡IDã‚’å–å¾—ã™ã‚‹é–¢æ•°ã¯å®Ÿè£…æ¸ˆã¿ã§ã™ã‹ï¼Ÿ

**å¿…è¦ãªå ´é¢**:
- submitChoice()ã§`selectedBy`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- requestScheduleAdjustment()ã§`requestedBy`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®æƒ³å®š**:
```typescript
// JWTèªè¨¼ã‹ã‚‰å–å¾—
export function getCurrentEmployeeId(): string {
  const token = getAuthToken();
  const decoded = jwt.decode(token);
  return decoded.employeeId;
}
```

### è³ªå•3: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æœŸé™

**è³ªå•**:
ProposalResponseã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹æœŸé™ã¯1åˆ†ã§é©åˆ‡ã§ã™ã‹ï¼Ÿ

**èƒŒæ™¯**:
- ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ä¸­ã®å†èª­ã¿è¾¼ã¿å¯¾ç­–
- APIè² è·è»½æ¸›

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®æ¨å¥¨**: 1åˆ†ï¼ˆç¾çŠ¶ã®ã¾ã¾ï¼‰

---

## 9. é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. [ProposalSelectionPageæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ](./ProposalSelectionPageæš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ_20251026.md) - VoiceDriveã‹ã‚‰ã®è¦ä»¶å®šç¾©
2. [ProposalSelectionPage DBè¦ä»¶åˆ†æ](./ProposalSelectionPage_DBè¦ä»¶åˆ†æ_20251026.md) - VoiceDriveå´ã®DBåˆ†æ
3. [AI_SUMMARY.md](./AI_SUMMARY.md) - æœ€æ–°æ›´æ–°è¦ç´„ï¼ˆåŒ»ç™‚ãƒãƒ¼ãƒ å‘ã‘ï¼‰

---

## 10. ã¾ã¨ã‚

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»ã®æ˜ç¢ºåŒ–

| ãƒ‡ãƒ¼ã‚¿ | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | VoiceDrive |
|-------|------------|-----------|
| ææ¡ˆç”Ÿæˆ | âœ… 100%ç®¡ç†ï¼ˆAIå‡¦ç†ã€ProposalSetï¼‰ | è¡¨ç¤ºã®ã¿ |
| æ‹…å½“è€…æƒ…å ± | âœ… 100%ç®¡ç†ï¼ˆEmployeeï¼‰ | è¡¨ç¤ºã®ã¿ |
| ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« | âœ… 100%ç®¡ç†ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼çµ±åˆï¼‰ | è¡¨ç¤ºã®ã¿ |
| é¸æŠçµæœ | âœ… 100%ç®¡ç†ï¼ˆInterviewReservationæ›´æ–°ï¼‰ | é€ä¿¡ã®ã¿ |
| UIçŠ¶æ…‹ | - | ãƒ¡ãƒ¢ãƒªå†…ã®ã¿ï¼ˆæ°¸ç¶šåŒ–ãªã—ï¼‰ |

### å®Ÿè£…ã‚¿ã‚¹ã‚¯

#### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´
1. âœ… InterviewReservationãƒ†ãƒ¼ãƒ–ãƒ«ç¢ºèªï¼ˆæ—¢å­˜å®Ÿè£…ã§ååˆ†ï¼‰
2. âŒ API-1å®Ÿè£…ï¼ˆææ¡ˆå–å¾—ï¼‰- 0.5æ—¥
3. âŒ API-2å®Ÿè£…ï¼ˆé¸æŠç¢ºå®šï¼‰- 0.5æ—¥
4. âŒ API-3å®Ÿè£…ï¼ˆå†èª¿æ•´ä¾é ¼ï¼‰- 0.5æ—¥
5. ğŸŸ¡ ProposalSet/ProposalCandidateãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰- 1æ—¥

#### VoiceDriveå´
1. âŒ submitChoice()å®Ÿè£… - 0.5æ—¥
2. âŒ requestScheduleAdjustmentSimple()å®Ÿè£… - 0.5æ—¥
3. âŒ getCurrentEmployeeId()å®Ÿè£… - 0.5æ—¥

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ **: æœ¬å ±å‘Šæ›¸ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾Œã€Phase 1å®Ÿè£…é–‹å§‹ï¼ˆ11/1ã€œï¼‰
2. **VoiceDriveãƒãƒ¼ãƒ **: 3ã¤ã®ç¢ºèªäº‹é …ã«å›ç­”
3. **ä¸¡ãƒãƒ¼ãƒ **: APIä»•æ§˜æœ€çµ‚ç¢ºèªï¼ˆ11/1ï¼‰
4. **çµ±åˆãƒ†ã‚¹ãƒˆ**: 11/7-11/8

---

**æ–‡æ›¸çµ‚äº†**

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ26æ—¥
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
æ‰¿èª: æœªæ‰¿èªï¼ˆVoiceDriveãƒãƒ¼ãƒ ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ï¼‰
æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼: VoiceDriveãƒãƒ¼ãƒ ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å—é ˜å¾Œ
