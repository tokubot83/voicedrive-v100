# EvaluationNotificationPage DBè¦ä»¶åˆ†æ

**æ–‡æ›¸ç•ªå·**: VD-DB-ANALYSIS-2025-1013-004
**ä½œæˆæ—¥**: 2025å¹´10æœˆ13æ—¥
**å¯¾è±¡ãƒšãƒ¼ã‚¸**: EvaluationNotificationPage
**URL**: https://voicedrive-v100.vercel.app/evaluation/notifications
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸŸ¡ DBæ§‹ç¯‰å‰åˆ†æå®Œäº†ãƒ»å®Ÿè£…å¾…ã¡

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ãƒšãƒ¼ã‚¸æ¦‚è¦
EvaluationNotificationPageã¯ã€åŒ»ç™‚è·å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰é€ä¿¡ã•ã‚Œã‚‹è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥ã‚’å—ä¿¡ãƒ»è¡¨ç¤ºã™ã‚‹ãƒšãƒ¼ã‚¸ã§ã™ã€‚V3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ å¯¾å¿œï¼ˆ100ç‚¹æº€ç‚¹ãƒ»7æ®µéšã‚°ãƒ¬ãƒ¼ãƒ‰ãƒ»3è»¸è©•ä¾¡ï¼‰ã®é€šçŸ¥ç®¡ç†æ©Ÿèƒ½ã‚’æä¾›ã—ã€è·å“¡ãŒè©•ä¾¡çµæœã‚’ç¢ºèªã—ã€å¿…è¦ã«å¿œã˜ã¦ç•°è­°ç”³ç«‹ã‚’è¡Œã†ãŸã‚ã®å…¥å£ã¨ãªã‚Šã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½
1. âœ… **è©•ä¾¡é€šçŸ¥ä¸€è¦§è¡¨ç¤º** - é–‹ç¤ºã•ã‚ŒãŸè©•ä¾¡çµæœã®é€šçŸ¥ãƒªã‚¹ãƒˆè¡¨ç¤º
2. âœ… **é€šçŸ¥çµ±è¨ˆè¡¨ç¤º** - ç·é€šçŸ¥æ•°ã€æ—¢èª­ç‡ã€æœªèª­æ•°ã€ç•°è­°ç”³ç«‹ç‡ã®è¡¨ç¤º
3. âœ… **æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½** - è©•ä¾¡æœŸé–“ãƒ»æ‹…å½“è€…åã§æ¤œç´¢ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥ãƒ•ã‚£ãƒ«ã‚¿
4. âœ… **ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½** - æœ€æ–°é †ãƒ»ç· åˆ‡é †ãƒ»ã‚¹ã‚³ã‚¢é †ã§ã‚½ãƒ¼ãƒˆ
5. âœ… **é€šçŸ¥è¨­å®š** - ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ãƒ»ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®è¨­å®š
6. âœ… **ç•°è­°ç”³ç«‹ã¸é·ç§»** - é€šçŸ¥ã‹ã‚‰ç•°è­°ç”³ç«‹ãƒ•ã‚©ãƒ¼ãƒ ã¸ã®é·ç§»

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»
- **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒã‚¹ã‚¿ï¼‰**: è©•ä¾¡çµæœãƒ‡ãƒ¼ã‚¿ã€é–‹ç¤ºæ—¥æ™‚ã€ç· åˆ‡æ—¥æ™‚
- **VoiceDriveï¼ˆãƒã‚¹ã‚¿ï¼‰**: é€šçŸ¥é€ä¿¡è¨˜éŒ²ã€æ—¢èª­çŠ¶æ…‹ã€é€šçŸ¥è¨­å®š
- **é€£æºæ–¹å¼**: Webhookï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDriveï¼‰

### ç¾çŠ¶ã®èª²é¡Œ
- âŒ `EvaluationNotification`ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„ï¼ˆæ–°è¦ä½œæˆå¿…è¦ï¼‰
- âŒ `NotificationSettings`ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„ï¼ˆæ–°è¦ä½œæˆå¿…è¦ï¼‰
- âŒ é€šçŸ¥çµ±è¨ˆã®é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ãŒæœªå®Ÿè£…
- âŒ Webhookå—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæœªå®Ÿè£…

---

## ğŸ¯ ãƒšãƒ¼ã‚¸æ©Ÿèƒ½è©³ç´°åˆ†æ

### æ©Ÿèƒ½1: è©•ä¾¡é€šçŸ¥ä¸€è¦§è¡¨ç¤º

**ç”»é¢ãƒ•ãƒ­ãƒ¼**:
```
1. ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ â†’ é€šçŸ¥ä¸€è¦§APIã‚’å‘¼ã³å‡ºã—
2. é€šçŸ¥ãƒ‡ãƒ¼ã‚¿å–å¾— â†’ ã‚«ãƒ¼ãƒ‰å½¢å¼ã§è¡¨ç¤º
3. å„é€šçŸ¥ã‚«ãƒ¼ãƒ‰ã«è¡¨ç¤º:
   - è©•ä¾¡æœŸé–“
   - ã‚¹ã‚³ã‚¢ï¼ˆ0-100ç‚¹ï¼‰
   - ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆS, A+, A, B+, B, C, Dï¼‰
   - 3è»¸è©•ä¾¡ï¼ˆæ–½è¨­å†…ãƒ»æ³•äººå†…ãƒ»ç·åˆï¼‰
   - é–‹ç¤ºæ—¥
   - ç•°è­°ç”³ç«‹ç· åˆ‡
   - ç· åˆ‡ã¾ã§æ®‹æ—¥æ•°
   - é€šçŸ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆpending, sent, delivered, read, failedï¼‰
   - ç•°è­°ç”³ç«‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆnone, submitted, in_review, resolvedï¼‰
```

**å¿…è¦ãªãƒ‡ãƒ¼ã‚¿**:
| ãƒ‡ãƒ¼ã‚¿é …ç›® | ç¾åœ¨ã®ãƒ†ãƒ¼ãƒ–ãƒ« | ä¸è¶³ | å‚™è€ƒ |
|----------|-------------|------|------|
| notificationId | âŒ ãªã— | âœ… | é€šçŸ¥IDï¼ˆVoiceDriveç”Ÿæˆï¼‰ |
| employeeId | âŒ ãªã— | âœ… | è·å“¡ID |
| employeeName | âŒ ãªã— | âœ… | è·å“¡åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰ |
| evaluationPeriod | âŒ ãªã— | âœ… | è©•ä¾¡æœŸé–“ï¼ˆä¾‹: "2024å¹´åº¦ä¸ŠæœŸ"ï¼‰ |
| evaluationScore | âŒ ãªã— | âœ… | è©•ä¾¡ã‚¹ã‚³ã‚¢ï¼ˆ0-100ç‚¹ï¼‰ |
| evaluationGrade | âŒ ãªã— | âœ… | è©•ä¾¡ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆS, A+, A, B+, B, C, Dï¼‰ |
| facilityGrade | âŒ ãªã— | âœ… | æ–½è¨­å†…è©•ä¾¡ï¼ˆS, A, B, C, Dï¼‰ |
| corporateGrade | âŒ ãªã— | âœ… | æ³•äººå†…è©•ä¾¡ï¼ˆS, A, B, C, Dï¼‰ |
| overallGrade | âŒ ãªã— | âœ… | ç·åˆè©•ä¾¡ï¼ˆS, A+, A, B+, B, C, Dï¼‰ |
| overallScore | âŒ ãªã— | âœ… | ç·åˆã‚¹ã‚³ã‚¢ï¼ˆ0-100ç‚¹ï¼‰ |
| disclosureDate | âŒ ãªã— | âœ… | é–‹ç¤ºæ—¥ï¼ˆYYYY-MM-DDï¼‰ |
| appealDeadline | âŒ ãªã— | âœ… | ç•°è­°ç”³ç«‹ç· åˆ‡ï¼ˆYYYY-MM-DDï¼‰ |
| notificationStatus | âŒ ãªã— | âœ… | é€šçŸ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| notificationSentAt | âŒ ãªã— | âœ… | é€šçŸ¥é€ä¿¡æ—¥æ™‚ |
| notificationReadAt | âŒ ãªã— | âœ… | æ—¢èª­æ—¥æ™‚ |
| appealStatus | âŒ ãªã— | âœ… | ç•°è­°ç”³ç«‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| appealId | âŒ ãªã— | âœ… | ç•°è­°ç”³ç«‹IDï¼ˆæå‡ºæ¸ˆã¿ã®å ´åˆï¼‰ |
| medicalSystemUrl | âŒ ãªã— | âœ… | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ URLï¼ˆå‚ç…§ç”¨ï¼‰ |

### æ©Ÿèƒ½2: é€šçŸ¥çµ±è¨ˆè¡¨ç¤º

**è¡¨ç¤ºå†…å®¹**:
- **ç·é€šçŸ¥æ•°** (totalSent): é€ä¿¡ã•ã‚ŒãŸé€šçŸ¥ã®ç·æ•°
- **æ—¢èª­ç‡** (readRate): èª­ã¾ã‚ŒãŸé€šçŸ¥ã®å‰²åˆï¼ˆ%ï¼‰
- **æœªèª­æ•°** (totalUnread): æœªèª­ã®é€šçŸ¥æ•°
- **ç•°è­°ç”³ç«‹ç‡** (appealActionRate): é€šçŸ¥å¾Œã«ç•°è­°ç”³ç«‹ã‚’è¡Œã£ãŸå‰²åˆï¼ˆ%ï¼‰

**å¿…è¦ãªãƒ‡ãƒ¼ã‚¿**:
| ãƒ‡ãƒ¼ã‚¿é …ç›® | è¨ˆç®—æ–¹æ³• | å‚™è€ƒ |
|----------|---------|------|
| totalSent | COUNT(*) FROM EvaluationNotification | å…¨é€šçŸ¥æ•° |
| totalRead | COUNT(*) WHERE notificationReadAt IS NOT NULL | æ—¢èª­æ•° |
| totalUnread | COUNT(*) WHERE notificationReadAt IS NULL | æœªèª­æ•° |
| readRate | totalRead / totalSent * 100 | æ—¢èª­ç‡ï¼ˆ%ï¼‰ |
| appealActionRate | COUNT(*) WHERE appealId IS NOT NULL / totalSent * 100 | ç•°è­°ç”³ç«‹ç‡ï¼ˆ%ï¼‰ |
| averageReadTime | AVG(notificationReadAt - notificationSentAt) | å¹³å‡æ—¢èª­æ™‚é–“ï¼ˆåˆ†ï¼‰ |

### æ©Ÿèƒ½3: æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿æ©Ÿèƒ½

**æ¤œç´¢å¯¾è±¡**:
- è©•ä¾¡æœŸé–“ï¼ˆä¾‹: "2024å¹´åº¦ä¸ŠæœŸ"ï¼‰
- è·å“¡å

**ãƒ•ã‚£ãƒ«ã‚¿ã‚ªãƒ—ã‚·ãƒ§ãƒ³**:
| ãƒ•ã‚£ãƒ«ã‚¿ | æ¡ä»¶ | SQLæ¡ä»¶ |
|---------|------|---------|
| ã™ã¹ã¦ | ã™ã¹ã¦ã®é€šçŸ¥ | - |
| æœªèª­ | notificationStatus !== 'read' | notificationReadAt IS NULL |
| ç·Šæ€¥ | isUrgent = true | daysUntilDeadline <= 3 |
| æœªç”³ç«‹ | appealStatus = 'none' | appealId IS NULL |
| ç”³ç«‹æ¸ˆ | appealStatus = 'submitted' | appealId IS NOT NULL |

**ã‚½ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³**:
| ã‚½ãƒ¼ãƒˆ | ä¸¦ã³é † | SQL |
|-------|--------|-----|
| æœ€æ–°é † | é–‹ç¤ºæ—¥ã®é™é † | ORDER BY disclosureDate DESC |
| ç· åˆ‡é † | ç· åˆ‡æ—¥ã®æ˜‡é † | ORDER BY appealDeadline ASC |
| ã‚¹ã‚³ã‚¢é † | ã‚¹ã‚³ã‚¢ã®é™é † | ORDER BY overallScore DESC |

### æ©Ÿèƒ½4: é€šçŸ¥è¨­å®š

**è¨­å®šé …ç›®**:
| è¨­å®šå | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | å‚™è€ƒ |
|-------|------------|------|
| enableEmailNotifications | true | ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚’å—ã‘å–ã‚‹ |
| enablePushNotifications | true | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚’å—ã‘å–ã‚‹ |
| enableSmsNotifications | false | SMSé€šçŸ¥ã‚’å—ã‘å–ã‚‹ |
| reminderDaysBefore | 3 | ç· åˆ‡Næ—¥å‰ã«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€ä¿¡ |
| autoMarkAsRead | false | è¡¨ç¤ºæ™‚ã«è‡ªå‹•æ—¢èª­ |

**å¿…è¦ãªãƒ‡ãƒ¼ã‚¿**:
| ãƒ‡ãƒ¼ã‚¿é …ç›® | ãƒ†ãƒ¼ãƒ–ãƒ« | ä¸è¶³ | å‚™è€ƒ |
|----------|---------|------|------|
| userId | NotificationSettings | âœ… | è·å“¡ID |
| enableEmailNotifications | NotificationSettings | âœ… | ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ON/OFF |
| enablePushNotifications | NotificationSettings | âœ… | ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ON/OFF |
| enableSmsNotifications | NotificationSettings | âœ… | SMSé€šçŸ¥ON/OFF |
| reminderDaysBefore | NotificationSettings | âœ… | ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ—¥æ•° |
| autoMarkAsRead | NotificationSettings | âœ… | è‡ªå‹•æ—¢èª­ON/OFF |

### æ©Ÿèƒ½5: ç•°è­°ç”³ç«‹ã¸ã®é·ç§»

**é·ç§»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
```typescript
window.location.href = `/appeals/new?notificationId=${notificationId}&evaluationPeriod=${encodeURIComponent(evaluationPeriod)}&score=${score}`;
```

**å¿…è¦ãªãƒ‡ãƒ¼ã‚¿**:
- notificationId: é€šçŸ¥ID
- evaluationPeriod: è©•ä¾¡æœŸé–“
- score: è©•ä¾¡ã‚¹ã‚³ã‚¢

---

## ğŸ—„ï¸ ç¾åœ¨ã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 

### ğŸ”´ å•é¡Œ: EvaluationNotificationãƒ†ãƒ¼ãƒ–ãƒ«ãŒå­˜åœ¨ã—ãªã„

ç¾åœ¨ã®`schema.prisma`ã«ã¯è©•ä¾¡é€šçŸ¥ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ãŒ**å­˜åœ¨ã—ã¾ã›ã‚“**ã€‚

**å½±éŸ¿**:
- è©•ä¾¡é€šçŸ¥ã®æ°¸ç¶šåŒ–ãŒã§ããªã„
- æ—¢èª­ãƒ»æœªèª­ã®ç®¡ç†ãŒã§ããªã„
- é€šçŸ¥çµ±è¨ˆã®é›†è¨ˆãŒã§ããªã„
- ç•°è­°ç”³ç«‹ã¨ã®ç´ä»˜ã‘ãŒã§ããªã„

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹

### ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»ãƒãƒˆãƒªã‚¯ã‚¹

| ãƒ‡ãƒ¼ã‚¿é …ç›® | VoiceDrive | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | æä¾›æ–¹æ³• | å‚™è€ƒ |
|-----------|-----------|-------------|---------|------|
| **è©•ä¾¡çµæœãƒ‡ãƒ¼ã‚¿** | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãŒé–‹ç¤ºæ™‚ã«é€ä¿¡ |
| è©•ä¾¡ã‚¹ã‚³ã‚¢ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | 0-100ç‚¹ |
| è©•ä¾¡ã‚°ãƒ¬ãƒ¼ãƒ‰ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | S, A+, A, B+, B, C, D |
| 3è»¸è©•ä¾¡ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | æ–½è¨­å†…ãƒ»æ³•äººå†…ãƒ»ç·åˆ |
| é–‹ç¤ºæ—¥ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãŒæ±ºå®š |
| ç•°è­°ç”³ç«‹ç· åˆ‡ | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ | âœ… ãƒã‚¹ã‚¿ | Webhook | é–‹ç¤ºæ—¥+14æ—¥ |
| **é€šçŸ¥ç®¡ç†ãƒ‡ãƒ¼ã‚¿** | âœ… ãƒã‚¹ã‚¿ | - | - | VoiceDriveç‹¬è‡ªç®¡ç† |
| é€šçŸ¥ID | âœ… ãƒã‚¹ã‚¿ | - | - | VoiceDriveç”Ÿæˆ |
| é€šçŸ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | âœ… ãƒã‚¹ã‚¿ | - | - | pending, sent, delivered, read, failed |
| é€šçŸ¥é€ä¿¡æ—¥æ™‚ | âœ… ãƒã‚¹ã‚¿ | - | - | VoiceDriveãŒè¨˜éŒ² |
| æ—¢èª­æ—¥æ™‚ | âœ… ãƒã‚¹ã‚¿ | - | - | è·å“¡ãŒé–²è¦§ã—ãŸæ—¥æ™‚ |
| **ç•°è­°ç”³ç«‹é–¢é€£** | âœ… ãƒã‚¹ã‚¿ | å‚ç…§ | Webhook | VoiceDriveâ†’åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ |
| ç•°è­°ç”³ç«‹ID | âœ… ãƒã‚¹ã‚¿ | å‚ç…§ | Webhook | VoiceDriveãŒç”Ÿæˆ |
| ç•°è­°ç”³ç«‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | âœ… ãƒã‚¹ã‚¿ | å‚ç…§ | Webhook | none, submitted, in_review, resolved |
| **é€šçŸ¥è¨­å®š** | âœ… ãƒã‚¹ã‚¿ | - | - | è·å“¡ã”ã¨ã®è¨­å®š |
| ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ON/OFF | âœ… ãƒã‚¹ã‚¿ | - | - | VoiceDriveç®¡ç† |
| ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ON/OFF | âœ… ãƒã‚¹ã‚¿ | - | - | VoiceDriveç®¡ç† |
| ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š | âœ… ãƒã‚¹ã‚¿ | - | - | VoiceDriveç®¡ç† |

### Webhooké€£æºãƒ•ãƒ­ãƒ¼

#### ãƒ•ãƒ­ãƒ¼1: è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDriveï¼‰

```mermaid
sequenceDiagram
    participant MS as åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ 
    participant VD as VoiceDrive
    participant Staff as è·å“¡

    Note over MS: è©•ä¾¡çµæœé–‹ç¤ºå‡¦ç†
    MS->>MS: Evaluation.disclose()
    MS->>VD: Webhook: evaluation.result_disclosed
    VD->>VD: EvaluationNotification.create()
    VD->>VD: é€šçŸ¥é€ä¿¡å‡¦ç†ï¼ˆãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ï¼‰
    VD->>Staff: è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥
    Staff->>VD: é€šçŸ¥é–²è¦§
    VD->>VD: EvaluationNotification.update(notificationReadAt)
```

**Webhook Payloadï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDriveï¼‰**:
```json
{
  "eventType": "evaluation.result_disclosed",
  "timestamp": "2025-10-13T15:00:00Z",
  "data": {
    "employeeId": "EMP-2024-001",
    "employeeName": "å±±ç”°å¤ªéƒ",
    "evaluationPeriod": "2024å¹´åº¦ä¸ŠæœŸ",
    "evaluationScore": 85,
    "evaluationGrade": "A",
    "facilityGrade": "A",
    "corporateGrade": "B",
    "overallGrade": "A",
    "overallScore": 85,
    "disclosureDate": "2025-10-13",
    "appealDeadline": "2025-10-27",
    "medicalSystemUrl": "https://medical-system.example.com/evaluations/EV-2024-001",
    "additionalMessage": "è©•ä¾¡çµæœã‚’ã”ç¢ºèªãã ã•ã„ã€‚"
  }
}
```

#### ãƒ•ãƒ­ãƒ¼2: ç•°è­°ç”³ç«‹ç· åˆ‡ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ï¼ˆVoiceDriveå†…éƒ¨å‡¦ç†ï¼‰

```mermaid
sequenceDiagram
    participant Cron as ãƒãƒƒãƒå‡¦ç†
    participant VD as VoiceDrive
    participant Staff as è·å“¡

    Note over Cron: æ¯æ—¥åˆå‰9æ™‚å®Ÿè¡Œ
    Cron->>VD: ç· åˆ‡3æ—¥å‰ã®é€šçŸ¥ã‚’æ¤œç´¢
    VD->>VD: EvaluationNotification.findDueReminders()
    VD->>Staff: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€šçŸ¥é€ä¿¡
    VD->>VD: Notification.create(type: APPEAL_DEADLINE_REMINDER)
```

---

## ğŸ”§ å¿…è¦ãªDBå¤‰æ›´

### å¤‰æ›´1: æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« EvaluationNotification

**ç›®çš„**: è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥ã‚’ç®¡ç†

```prisma
model EvaluationNotification {
  id                      String    @id @default(cuid())

  // è·å“¡æƒ…å ±
  employeeId              String    @map("employee_id")
  employeeName            String    @map("employee_name")          // ã‚­ãƒ£ãƒƒã‚·ãƒ¥

  // è©•ä¾¡æƒ…å ±
  evaluationPeriod        String    @map("evaluation_period")      // "2024å¹´åº¦ä¸ŠæœŸ"
  evaluationScore         Int       @map("evaluation_score")       // 0-100
  evaluationGrade         String    @map("evaluation_grade")       // S, A+, A, B+, B, C, D

  // 3è»¸è©•ä¾¡ï¼ˆV3å¯¾å¿œï¼‰
  facilityGrade           String?   @map("facility_grade")         // S, A, B, C, D
  corporateGrade          String?   @map("corporate_grade")        // S, A, B, C, D
  overallGrade            String?   @map("overall_grade")          // S, A+, A, B+, B, C, D
  overallScore            Int?      @map("overall_score")          // 0-100

  // æ—¥ä»˜æƒ…å ±
  disclosureDate          DateTime  @map("disclosure_date")        // é–‹ç¤ºæ—¥
  appealDeadline          DateTime  @map("appeal_deadline")        // ç•°è­°ç”³ç«‹ç· åˆ‡

  // é€šçŸ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  notificationStatus      String    @default("pending") @map("notification_status")
  // pending, sent, delivered, read, failed
  notificationSentAt      DateTime? @map("notification_sent_at")
  notificationDeliveredAt DateTime? @map("notification_delivered_at")
  notificationReadAt      DateTime? @map("notification_read_at")
  notificationFailedAt    DateTime? @map("notification_failed_at")
  failureReason           String?   @map("failure_reason")

  // é…ä¿¡æ–¹æ³•
  deliveryMethods         String    @map("delivery_methods")       // JSON: {email, push, sms}

  // ç•°è­°ç”³ç«‹é–¢é€£
  appealStatus            String    @default("none") @map("appeal_status")
  // none, submitted, in_review, resolved
  appealId                String?   @map("appeal_id")              // ç•°è­°ç”³ç«‹ID
  appealSubmittedAt       DateTime? @map("appeal_submitted_at")

  // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é€£æº
  medicalSystemUrl        String?   @map("medical_system_url")     // è©•ä¾¡çµæœURL
  medicalSystemEventId    String?   @map("medical_system_event_id") // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¤ãƒ™ãƒ³ãƒˆID
  additionalMessage       String?   @map("additional_message")     @db.Text

  // ç·Šæ€¥åº¦ãƒ•ãƒ©ã‚°
  isUrgent                Boolean   @default(false) @map("is_urgent")
  daysUntilDeadline       Int?      @map("days_until_deadline")    // è¨ˆç®—æ¸ˆã¿ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  employee                User      @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  @@index([employeeId])
  @@index([notificationStatus])
  @@index([appealStatus])
  @@index([disclosureDate])
  @@index([appealDeadline])
  @@index([evaluationPeriod])
  @@map("evaluation_notifications")
}
```

**è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°**: 30ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

---

### å¤‰æ›´2: æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« NotificationSettings

**ç›®çš„**: è·å“¡ã”ã¨ã®é€šçŸ¥è¨­å®šã‚’ç®¡ç†

```prisma
model NotificationSettings {
  id                        String    @id @default(cuid())
  userId                    String    @unique @map("user_id")

  // é€šçŸ¥æ–¹æ³•ã®æœ‰åŠ¹åŒ–
  enableEmailNotifications  Boolean   @default(true) @map("enable_email_notifications")
  enablePushNotifications   Boolean   @default(true) @map("enable_push_notifications")
  enableSmsNotifications    Boolean   @default(false) @map("enable_sms_notifications")

  // ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š
  reminderDaysBefore        Int       @default(3) @map("reminder_days_before")  // ç· åˆ‡Næ—¥å‰

  // è‡ªå‹•æ—¢èª­è¨­å®š
  autoMarkAsRead            Boolean   @default(false) @map("auto_mark_as_read")

  // é€šçŸ¥æ™‚é–“å¸¯è¨­å®š
  notificationStartTime     String?   @map("notification_start_time")  // "09:00"
  notificationEndTime       String?   @map("notification_end_time")    // "18:00"

  // é€šçŸ¥é »åº¦åˆ¶é™
  maxNotificationsPerDay    Int       @default(10) @map("max_notifications_per_day")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt                 DateTime  @default(now()) @map("created_at")
  updatedAt                 DateTime  @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  user                      User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("notification_settings")
}
```

**è¿½åŠ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°**: 12ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

---

### å¤‰æ›´3: Userãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 

```prisma
model User {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• è©•ä¾¡é€šçŸ¥é–¢é€£ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  evaluationNotifications  EvaluationNotification[]
  notificationSettings     NotificationSettings?

  // ... æ—¢å­˜ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
}
```

---

## ğŸ”— å¿…è¦ãªAPI

### API-11: è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥å—ä¿¡ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â†’ VoiceDriveï¼‰

**ç›®çš„**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥ã‚’å—ä¿¡

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/webhooks/evaluation-result-disclosed`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
POST /api/webhooks/evaluation-result-disclosed
Content-Type: application/json
X-Medical-System-Signature: sha256=abc123...
```

```json
{
  "eventType": "evaluation.result_disclosed",
  "timestamp": "2025-10-13T15:00:00Z",
  "data": {
    "employeeId": "EMP-2024-001",
    "employeeName": "å±±ç”°å¤ªéƒ",
    "evaluationPeriod": "2024å¹´åº¦ä¸ŠæœŸ",
    "evaluationScore": 85,
    "evaluationGrade": "A",
    "facilityGrade": "A",
    "corporateGrade": "B",
    "overallGrade": "A",
    "overallScore": 85,
    "disclosureDate": "2025-10-13",
    "appealDeadline": "2025-10-27",
    "medicalSystemUrl": "https://medical-system.example.com/evaluations/EV-2024-001",
    "additionalMessage": "è©•ä¾¡çµæœã‚’ã”ç¢ºèªãã ã•ã„ã€‚"
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "notificationId": "notif_abc123",
  "message": "è©•ä¾¡é€šçŸ¥ã‚’å—ç†ã—ã¾ã—ãŸ",
  "deliveryMethods": {
    "email": true,
    "push": true,
    "sms": false
  },
  "estimatedDeliveryTime": "2025-10-13T15:05:00Z"
}
```

**å‡¦ç†å†…å®¹**:
1. Webhookç½²åæ¤œè¨¼
2. EvaluationNotification.create()
3. é€šçŸ¥è¨­å®šã«åŸºã¥ã„ã¦ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€ä¿¡
4. æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´

---

### API-12: è©•ä¾¡é€šçŸ¥ä¸€è¦§å–å¾—ï¼ˆVoiceDriveå†…éƒ¨APIï¼‰

**ç›®çš„**: è·å“¡ã®è©•ä¾¡é€šçŸ¥ä¸€è¦§ã‚’å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/evaluation-notifications`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/evaluation-notifications?employeeId=EMP-2024-001&filter=unread&sort=deadline
Authorization: Bearer {jwt_token}
```

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `employeeId`: è·å“¡IDï¼ˆå¿…é ˆï¼‰
- `filter`: ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆall, unread, urgent, no_appeal, appeal_submittedï¼‰
- `sort`: ã‚½ãƒ¼ãƒˆï¼ˆnewest, deadline, scoreï¼‰
- `search`: æ¤œç´¢ã‚¯ã‚¨ãƒª

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "notifications": [
    {
      "id": "notif_abc123",
      "employeeName": "å±±ç”°å¤ªéƒ",
      "evaluationPeriod": "2024å¹´åº¦ä¸ŠæœŸ",
      "score": 85,
      "grade": "A",
      "facilityGrade": "A",
      "corporateGrade": "B",
      "overallGrade": "A",
      "overallScore": 85,
      "disclosureDate": "2025-10-13",
      "appealDeadline": "2025-10-27",
      "notificationStatus": "read",
      "appealStatus": "none",
      "daysUntilDeadline": 14,
      "isUrgent": false
    }
  ],
  "total": 5,
  "unread": 2
}
```

---

### API-13: é€šçŸ¥æ—¢èª­ãƒãƒ¼ã‚¯ï¼ˆVoiceDriveå†…éƒ¨APIï¼‰

**ç›®çš„**: é€šçŸ¥ã‚’æ—¢èª­ã«ã™ã‚‹

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `PATCH /api/evaluation-notifications/:notificationId/mark-as-read`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
PATCH /api/evaluation-notifications/notif_abc123/mark-as-read
Authorization: Bearer {jwt_token}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "notificationId": "notif_abc123",
  "notificationReadAt": "2025-10-13T15:30:00Z"
}
```

---

### API-14: é€šçŸ¥çµ±è¨ˆå–å¾—ï¼ˆVoiceDriveå†…éƒ¨APIï¼‰

**ç›®çš„**: é€šçŸ¥çµ±è¨ˆã‚’å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/evaluation-notifications/stats`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/evaluation-notifications/stats?employeeId=EMP-2024-001
Authorization: Bearer {jwt_token}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "totalSent": 5,
  "totalRead": 3,
  "totalUnread": 2,
  "readRate": 0.6,
  "averageReadTime": 45.5,
  "appealActionRate": 0.2
}
```

---

### API-15: é€šçŸ¥è¨­å®šå–å¾—ãƒ»æ›´æ–°ï¼ˆVoiceDriveå†…éƒ¨APIï¼‰

**ç›®çš„**: è·å“¡ã®é€šçŸ¥è¨­å®šã‚’å–å¾—ãƒ»æ›´æ–°

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- `GET /api/notification-settings`
- `PUT /api/notification-settings`

**GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
GET /api/notification-settings?userId=user_abc123
Authorization: Bearer {jwt_token}
```

**GET ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "enableEmailNotifications": true,
  "enablePushNotifications": true,
  "enableSmsNotifications": false,
  "reminderDaysBefore": 3,
  "autoMarkAsRead": false,
  "notificationStartTime": "09:00",
  "notificationEndTime": "18:00",
  "maxNotificationsPerDay": 10
}
```

**PUT ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```http
PUT /api/notification-settings
Authorization: Bearer {jwt_token}
Content-Type: application/json
```

```json
{
  "enableEmailNotifications": true,
  "enablePushNotifications": false,
  "reminderDaysBefore": 5
}
```

**PUT ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "message": "é€šçŸ¥è¨­å®šã‚’æ›´æ–°ã—ã¾ã—ãŸ"
}
```

---

## ğŸ“ å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1: åŸºæœ¬é€šçŸ¥æ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦: ğŸ”´ æœ€é«˜ï¼‰

**æœŸé–“**: 2é€±é–“
**å®Ÿè£…æ—¥**: 2025-11-01 ~ 2025-11-14

1. âœ… EvaluationNotificationãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
2. âœ… NotificationSettingsãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
3. âœ… Userãƒ†ãƒ¼ãƒ–ãƒ«ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
4. âœ… API-11å®Ÿè£…ï¼ˆWebhookå—ä¿¡ï¼‰
5. âœ… API-12å®Ÿè£…ï¼ˆé€šçŸ¥ä¸€è¦§å–å¾—ï¼‰
6. âœ… API-13å®Ÿè£…ï¼ˆæ—¢èª­ãƒãƒ¼ã‚¯ï¼‰
7. âœ… API-14å®Ÿè£…ï¼ˆçµ±è¨ˆå–å¾—ï¼‰
8. âœ… é€šçŸ¥ä¸€è¦§ç”»é¢ã®å®Ÿãƒ‡ãƒ¼ã‚¿é€£æº

**ä¾å­˜é–¢ä¿‚**:
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ : API-11ã®Webhooké€ä¿¡å®Ÿè£…ãŒå¿…è¦

---

### Phase 2: é€šçŸ¥è¨­å®šæ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦: ğŸŸ¡ é«˜ï¼‰

**æœŸé–“**: 1é€±é–“
**å®Ÿè£…æ—¥**: 2025-11-15 ~ 2025-11-21

1. âœ… API-15å®Ÿè£…ï¼ˆé€šçŸ¥è¨­å®šå–å¾—ãƒ»æ›´æ–°ï¼‰
2. âœ… é€šçŸ¥è¨­å®šç”»é¢ã®å®Ÿãƒ‡ãƒ¼ã‚¿é€£æº
3. âœ… ãƒ¡ãƒ¼ãƒ«é€šçŸ¥é€ä¿¡æ©Ÿèƒ½å®Ÿè£…
4. âœ… ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€ä¿¡æ©Ÿèƒ½å®Ÿè£…
5. âœ… ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒãƒƒãƒå‡¦ç†å®Ÿè£…

**ä¾å­˜é–¢ä¿‚**:
- Phase 1å®Œäº†å¾Œã«å®Ÿæ–½

---

### Phase 3: çµ±è¨ˆãƒ»åˆ†ææ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦: ğŸŸ¢ ä¸­ï¼‰

**æœŸé–“**: 1é€±é–“
**å®Ÿè£…æ—¥**: 2025-11-22 ~ 2025-11-28

1. âœ… çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å®Ÿè£…
2. âœ… æ—¢èª­ç‡ãƒ»ç•°è­°ç”³ç«‹ç‡ã®å¯è¦–åŒ–
3. âœ… ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›æ©Ÿèƒ½

**ä¾å­˜é–¢ä¿‚**:
- Phase 2å®Œäº†å¾Œã«å®Ÿæ–½

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### TC-1: è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥å—ä¿¡

**å‰ææ¡ä»¶**:
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§è©•ä¾¡ãŒé–‹ç¤ºã•ã‚Œã‚‹

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰API-11ã‚’å‘¼ã³å‡ºã—
2. Webhookç½²åã‚’æ¤œè¨¼
3. EvaluationNotificationãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã‚‹
4. é€šçŸ¥é€ä¿¡å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹

**æœŸå¾…çµæœ**:
- âœ… EvaluationNotificationãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã‚‹
- âœ… notificationStatus = 'sent'
- âœ… ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã‚‹
- âœ… æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”å´ã•ã‚Œã‚‹

---

### TC-2: é€šçŸ¥ä¸€è¦§è¡¨ç¤º

**å‰ææ¡ä»¶**:
- è©•ä¾¡é€šçŸ¥ãŒ5ä»¶å­˜åœ¨ã™ã‚‹

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. EvaluationNotificationPageã‚’é–‹ã
2. API-12ãŒå‘¼ã°ã‚Œã‚‹
3. é€šçŸ¥ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹

**æœŸå¾…çµæœ**:
- âœ… 5ä»¶ã®é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ã‚¹ã‚³ã‚¢ãƒ»ã‚°ãƒ¬ãƒ¼ãƒ‰ãƒ»ç· åˆ‡ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… æœªèª­é€šçŸ¥ã«ãƒãƒƒã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### TC-3: é€šçŸ¥æ—¢èª­ãƒãƒ¼ã‚¯

**å‰ææ¡ä»¶**:
- æœªèª­é€šçŸ¥ãŒå­˜åœ¨ã™ã‚‹

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. é€šçŸ¥ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯
2. API-13ãŒå‘¼ã°ã‚Œã‚‹
3. notificationReadAtãŒè¨˜éŒ²ã•ã‚Œã‚‹

**æœŸå¾…çµæœ**:
- âœ… notificationReadAtãŒç¾åœ¨æ™‚åˆ»ã§æ›´æ–°ã•ã‚Œã‚‹
- âœ… æœªèª­ãƒãƒƒã‚¸ãŒæ¶ˆãˆã‚‹
- âœ… çµ±è¨ˆã®æ—¢èª­ç‡ãŒæ›´æ–°ã•ã‚Œã‚‹

---

### TC-4: ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½

**å‰ææ¡ä»¶**:
- è¤‡æ•°ã®é€šçŸ¥ãŒå­˜åœ¨ã™ã‚‹

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. ã€Œæœªèª­ã€ãƒ•ã‚£ãƒ«ã‚¿ã‚’é¸æŠ
2. æœªèª­é€šçŸ¥ã®ã¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. ã€Œç· åˆ‡é †ã€ã‚½ãƒ¼ãƒˆã‚’é¸æŠ
4. ç· åˆ‡ãŒè¿‘ã„é †ã«ä¸¦ã³æ›¿ãˆã‚‰ã‚Œã‚‹

**æœŸå¾…çµæœ**:
- âœ… ãƒ•ã‚£ãƒ«ã‚¿ãŒæ­£ã—ãé©ç”¨ã•ã‚Œã‚‹
- âœ… ã‚½ãƒ¼ãƒˆãŒæ­£ã—ãé©ç”¨ã•ã‚Œã‚‹

---

### TC-5: é€šçŸ¥è¨­å®šå¤‰æ›´

**å‰ææ¡ä»¶**:
- é€šçŸ¥è¨­å®šãŒå­˜åœ¨ã™ã‚‹

**ãƒ†ã‚¹ãƒˆã‚¹ãƒ†ãƒƒãƒ—**:
1. è¨­å®šã‚¿ãƒ–ã‚’é–‹ã
2. ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚’OFFã«ã™ã‚‹
3. ä¿å­˜ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. API-15ãŒå‘¼ã°ã‚Œã‚‹

**æœŸå¾…çµæœ**:
- âœ… enableEmailNotifications = false ã«æ›´æ–°ã•ã‚Œã‚‹
- âœ… æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤‰æ›´

- [ ] EvaluationNotificationãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] NotificationSettingsãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] Userãƒ†ãƒ¼ãƒ–ãƒ«ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ 
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] æœ¬ç•ªç’°å¢ƒãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨ˆç”»

### APIå®Ÿè£…ï¼ˆVoiceDriveå´ï¼‰

- [ ] API-11: Webhookå—ä¿¡å®Ÿè£…
- [ ] API-12: é€šçŸ¥ä¸€è¦§å–å¾—å®Ÿè£…
- [ ] API-13: æ—¢èª­ãƒãƒ¼ã‚¯å®Ÿè£…
- [ ] API-14: çµ±è¨ˆå–å¾—å®Ÿè£…
- [ ] API-15: é€šçŸ¥è¨­å®šå–å¾—ãƒ»æ›´æ–°å®Ÿè£…

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

- [ ] é€šçŸ¥ä¸€è¦§ç”»é¢ã®å®Ÿãƒ‡ãƒ¼ã‚¿é€£æº
- [ ] çµ±è¨ˆè¡¨ç¤ºã®å®Ÿãƒ‡ãƒ¼ã‚¿é€£æº
- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½å®Ÿè£…
- [ ] é€šçŸ¥è¨­å®šç”»é¢ã®å®Ÿãƒ‡ãƒ¼ã‚¿é€£æº
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

### é€šçŸ¥é€ä¿¡æ©Ÿèƒ½

- [ ] ãƒ¡ãƒ¼ãƒ«é€šçŸ¥é€ä¿¡å®Ÿè£…
- [ ] ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥é€ä¿¡å®Ÿè£…
- [ ] SMSé€šçŸ¥é€ä¿¡å®Ÿè£…ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒãƒƒãƒå‡¦ç†å®Ÿè£…

### ãƒ†ã‚¹ãƒˆ

- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆAPI, ã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼‰
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆWebhookå—ä¿¡ï¼‰
- [ ] é€šçŸ¥é€ä¿¡ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ ] APIä»•æ§˜æ›¸ä½œæˆï¼ˆOpenAPI 3.0ï¼‰
- [ ] Webhookä»•æ§˜æ›¸ä½œæˆ
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [ ] é‹ç”¨ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆ

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… **æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¢ºèª** - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¨è¦ä»¶ç¢ºèª
2. â³ **æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆä½œæˆ** - é€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç­‰ã®ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿å®šç¾©
3. â³ **APIä»•æ§˜åˆæ„** - API-11ã®è©³ç´°ä»•æ§˜ã‚’ç¢ºå®š
4. â³ **å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«èª¿æ•´** - 2025å¹´11æœˆ1æ—¥é–‹å§‹äºˆå®š
5. â³ **schema.prismaæ›´æ–°** - Phase 1ã®ãƒ†ãƒ¼ãƒ–ãƒ«å¤‰æ›´ã‚’å®Ÿè£…

---

## ğŸ“ é€£çµ¡å…ˆ

**VoiceDriveãƒãƒ¼ãƒ **:
- Slack: #voicedrive-integration
- æ‹…å½“: ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ 

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ **:
- Slack: #medical-system-integration
- æ‹…å½“: ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ 

---

**æ–‡æ›¸çµ‚äº†**

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ13æ—¥
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
æ‰¿èª: æœªæ‰¿èªï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡ï¼‰
