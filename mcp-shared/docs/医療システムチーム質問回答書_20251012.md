# åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ è³ªå•å›ç­”æ›¸

## ğŸ“… å›ç­”æ—¥æ™‚
**2025-10-12**

## ğŸ“‹ è³ªå•ã¸ã®å›ç­”

åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã‹ã‚‰ã®3ã¤ã®è³ªå•ã«å¯¾ã™ã‚‹VoiceDriveãƒãƒ¼ãƒ ã®å›ç­”ã§ã™ã€‚

---

## è³ªå•1: æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ã®å‹•çš„å¤‰æ›´

### ğŸ“ è³ªå•å†…å®¹
> æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆå°è¦æ¨¡éƒ¨é–€çµ±åˆï¼‰ã¯ã€DBæ§‹ç¯‰å¾Œã‚‚å‹•çš„ã«å¤‰æ›´å¯èƒ½ã§ã™ã‹ï¼Ÿ
> ä¾‹: è¨ºç™‚æ”¯æ´éƒ¨(5å) + è–¬å‰¤éƒ¨(3å) + äº‹å‹™éƒ¨(8å) â†’ 1å¹´å¾Œã«åˆ†é›¢ã€ãªã©

### âœ… å›ç­”

**ã¯ã„ã€å‹•çš„å¤‰æ›´å¯èƒ½ã§ã™ã€‚** ä»¥ä¸‹ã®ä»•æ§˜ã§å¯¾å¿œã—ã¾ã™ã€‚

#### 1. å¤‰æ›´æ¨©é™
- **Level 99ï¼ˆã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ï¼‰**: å…¨æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ã®ä½œæˆãƒ»å¤‰æ›´ãƒ»å‰Šé™¤ãŒå¯èƒ½
- **Level 10ï¼ˆéƒ¨é•·ï¼‰**: è‡ªéƒ¨é–€ãŒé–¢ã‚ã‚‹æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ã®ææ¡ˆãŒå¯èƒ½ï¼ˆLevel 99æ‰¿èªå¿…è¦ï¼‰

#### 2. å†ç·¨æˆãƒˆãƒªã‚¬ãƒ¼æ¡ä»¶
ä»¥ä¸‹ã®å ´åˆã«æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—å†ç·¨æˆã‚’æ¨å¥¨ï¼š
- **äººæ•°å¤‰åŒ–**: éƒ¨é–€äººæ•°ãŒé–¾å€¤ã‚’è¶…ãˆãŸå ´åˆï¼ˆä¾‹: 5å â†’ 12åã§ç‹¬ç«‹ï¼‰
- **çµ„ç¹”æ”¹ç·¨**: æ³•äººãƒ»æ–½è¨­ã®çµ„ç¹”å¤‰æ›´æ™‚
- **é‹ç”¨å®Ÿç¸¾**: 6ãƒ¶æœˆé‹ç”¨å¾Œã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§å¿…è¦æ€§ãŒèªã‚ã‚‰ã‚ŒãŸå ´åˆ

#### 3. æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®æ‰±ã„

##### æŠ•ç¥¨ãƒ‡ãƒ¼ã‚¿
```
å†ç·¨æˆå‰: æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—Aï¼ˆè¨ºç™‚æ”¯æ´éƒ¨+è–¬å‰¤éƒ¨+äº‹å‹™éƒ¨ï¼‰
å†ç·¨æˆå¾Œ: è¨ºç™‚æ”¯æ´éƒ¨å˜ç‹¬ã€è–¬å‰¤éƒ¨+äº‹å‹™éƒ¨ã‚°ãƒ«ãƒ¼ãƒ—B

å‡¦ç†æ–¹é‡:
âœ… æ—¢å­˜ã®æŠ•ç¥¨ãƒ‡ãƒ¼ã‚¿ã¯ä¿æŒï¼ˆhistorical dataï¼‰
âœ… æŠ•ç¨¿ä½œæˆæ™‚ã®æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ã‚’è¨˜éŒ²
âœ… éå»ã®æŠ•ç¥¨ã¯å†ç·¨æˆå¾Œã‚‚æœ‰åŠ¹ï¼ˆã‚¹ã‚³ã‚¢ã«åæ˜ ï¼‰
âœ… æ–°è¦æŠ•ç¥¨ã¯æ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—æ§‹æˆã§æ¨©é™åˆ¤å®š
```

##### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ãƒ¼ã‚¿
```
å†ç·¨æˆæ™‚ã«é€²è¡Œä¸­ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ:
âœ… æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å…ƒã®æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ã§ç¶™ç¶š
âœ… æ‰¿èªè€…ã¯å¤‰æ›´ãªã—ï¼ˆprimary_approver_idç¶­æŒï¼‰
âš ï¸ æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—æ§‹æˆã§é–‹å§‹

ã‚ªãƒ—ã‚·ãƒ§ãƒ³: Level 99ãŒæ‰‹å‹•ã§æ‰¿èªè€…ã‚’å†æŒ‡å®šå¯èƒ½
```

#### 4. Level 99ç®¡ç†è€…UI

ä»¥ä¸‹ã®ç®¡ç†ç”»é¢ã‚’å®Ÿè£…äºˆå®šï¼š

```
ã€æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†ç”»é¢ã€‘
â”œâ”€ æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ä¸€è¦§
â”‚  â”œâ”€ ã‚°ãƒ«ãƒ¼ãƒ—åã€ãƒ¡ãƒ³ãƒãƒ¼éƒ¨é–€ã€äººæ•°ã€ä½œæˆæ—¥
â”‚  â””â”€ æ“ä½œ: ç·¨é›†ã€å‰Šé™¤ã€å±¥æ­´è¡¨ç¤º
â”œâ”€ æ–°è¦ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆ
â”‚  â”œâ”€ ã‚°ãƒ«ãƒ¼ãƒ—åå…¥åŠ›
â”‚  â”œâ”€ ãƒ¡ãƒ³ãƒãƒ¼éƒ¨é–€é¸æŠï¼ˆè¤‡æ•°é¸æŠï¼‰
â”‚  â”œâ”€ ä»£è¡¨æ‰¿èªè€…æŒ‡å®š
â”‚  â””â”€ ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
â””â”€ å†ç·¨æˆå±¥æ­´
   â”œâ”€ å¤‰æ›´æ—¥æ™‚ã€å¤‰æ›´å†…å®¹ã€å®Ÿæ–½è€…
   â””â”€ å½±éŸ¿ã‚’å—ã‘ãŸæŠ•ç¨¿ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°
```

#### 5. å†ç·¨æˆæ™‚ã®æ³¨æ„äº‹é …

âš ï¸ **æŠ•ç¥¨ä¸­ã®æŠ•ç¨¿ã¸ã®å½±éŸ¿**:
- æŠ•ç¥¨æœŸé–“ä¸­ã®æŠ•ç¨¿ã¯å…ƒã®ã‚°ãƒ«ãƒ¼ãƒ—æ§‹æˆã§æŠ•ç¥¨ç¶™ç¶š
- æŠ•ç¥¨çµ‚äº†å¾Œã®æ–°è¦æŠ•ç¨¿ã‹ã‚‰æ–°ã‚°ãƒ«ãƒ¼ãƒ—é©ç”¨

âš ï¸ **æ‰¿èªå¾…ã¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å½±éŸ¿**:
- æ‰¿èªè€…ãŒå¤‰ã‚ã‚‹å ´åˆã¯é€šçŸ¥ã‚’é€ä¿¡
- å¿…è¦ã«å¿œã˜ã¦Level 99ãŒæ‰¿èªè€…ã‚’å†æŒ‡å®š

---

## è³ªå•2: æ–½è¨­é–“é€£æºè­°é¡Œ

### ğŸ“ è³ªå•å†…å®¹
> æ³•äººå…¨ä½“ã®è­°é¡Œï¼ˆ600ç‚¹ä»¥ä¸Šï¼‰ä»¥å¤–ã§ã€è¤‡æ•°æ–½è¨­ã«é–¢ã‚ã‚‹è­°é¡Œã¯ã©ã†æ‰±ã„ã¾ã™ã‹ï¼Ÿ
> ä¾‹: å°åŸç—…é™¢ã¨ç«‹ç¥ãƒªãƒãƒ“ãƒªã®é€£æºå¼·åŒ–æ¡ˆï¼ˆæ–½è¨­ãƒ¬ãƒ™ãƒ«è­°é¡Œã ãŒ2æ–½è¨­é–¢é€£ï¼‰

### âœ… å›ç­”

**è¤‡æ•°ã®æ–¹æ³•ã§å¯¾å¿œå¯èƒ½ã§ã™ã€‚** æŸ”è»Ÿæ€§ã‚’æŒãŸã›ãŸè¨­è¨ˆã‚’æ¡ç”¨ã—ã¾ã™ã€‚

#### æ–¹æ³•1: ã‚¿ã‚°æ©Ÿèƒ½ã«ã‚ˆã‚‹å¯¾å¿œï¼ˆæ¨å¥¨ï¼‰

```typescript
æŠ•ç¨¿ä½œæˆæ™‚:
{
  title: "å°åŸç—…é™¢ã¨ç«‹ç¥ãƒªãƒãƒ“ãƒªã®æ‚£è€…é€è¿é€£æºå¼·åŒ–æ¡ˆ",
  facilityCode: "obara-hospital", // ä¸»æŠ•ç¨¿æ–½è¨­
  tags: [
    "cross_facility",
    "tategami-rehabilitation", // é–¢é€£æ–½è¨­
    "patient_transfer",
    "collaboration"
  ],
  crossFacilityConfig: {
    relatedFacilities: ["tategami-rehabilitation"],
    votingScope: "both_facilities" // ä¸¡æ–½è¨­è·å“¡ãŒæŠ•ç¥¨å¯èƒ½
  }
}
```

**ã‚¹ã‚³ã‚¢é–¾å€¤ã®è§£é‡ˆ**:
```
0-29ç‚¹   â†’ ä¸»æ–½è¨­ã®éƒ¨ç½²å†…
30-99ç‚¹  â†’ ä¸»æ–½è¨­ã®éƒ¨ç½²å†…ï¼ˆä¸¡æ–½è¨­ã®è©²å½“éƒ¨ç½²ãŒé–²è¦§å¯èƒ½ï¼‰
100-299ç‚¹ â†’ ğŸ”„ ä¸¡æ–½è¨­ã®å…¨è·å“¡ãŒæŠ•ç¥¨å¯èƒ½ï¼ˆæ–½è¨­æ¨ªæ–­è­°é¡Œï¼‰
300ç‚¹ä»¥ä¸Š â†’ æ³•äººå…¨ä½“ï¼ˆå…¨3æ–½è¨­ï¼‰
```

#### æ–¹æ³•2: æ–½è¨­æ¨ªæ–­ãƒ¬ãƒ™ãƒ«ã®è¿½åŠ 

AgendaLevelã«æ–°ãƒ¬ãƒ™ãƒ«è¿½åŠ ã‚’æ¤œè¨ï¼š

```typescript
export type AgendaLevel =
  | 'PENDING'              // 0-29ç‚¹: æ¤œè¨ä¸­
  | 'DEPT_REVIEW'          // 30-49ç‚¹: éƒ¨ç½²æ¤œè¨
  | 'DEPT_AGENDA'          // 50-99ç‚¹: éƒ¨ç½²è­°é¡Œ
  | 'FACILITY_AGENDA'      // 100-299ç‚¹: æ–½è¨­è­°é¡Œ
  | 'CROSS_FACILITY'       // ğŸ†• 200-299ç‚¹: æ–½è¨­æ¨ªæ–­è­°é¡Œï¼ˆ2-3æ–½è¨­ï¼‰
  | 'CORP_REVIEW'          // 300-599ç‚¹: æ³•äººæ¤œè¨
  | 'CORP_AGENDA';         // 600ç‚¹ä»¥ä¸Š: æ³•äººè­°é¡Œ

// é–¾å€¤èª¿æ•´æ¡ˆ:
100-199ç‚¹ â†’ å˜ä¸€æ–½è¨­è­°é¡Œ
200-299ç‚¹ â†’ æ–½è¨­æ¨ªæ–­è­°é¡Œï¼ˆæŒ‡å®šã—ãŸ2-3æ–½è¨­ï¼‰
300ç‚¹ä»¥ä¸Š â†’ æ³•äººå…¨ä½“è­°é¡Œ
```

#### æ–¹æ³•3: æŠ•ç¥¨æ¨©é™ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

Level 99ç®¡ç†è€…ãŒæŠ•ç¨¿ã”ã¨ã«æŠ•ç¥¨ç¯„å›²ã‚’æ‰‹å‹•èª¿æ•´ï¼š

```typescript
// ç®¡ç†è€…æ“ä½œUI
{
  postId: "post_abc123",
  customVotingScope: {
    facilities: ["obara-hospital", "tategami-rehabilitation"],
    departments: ["çœ‹è­·éƒ¨", "ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³éƒ¨"],
    reason: "ä¸¡æ–½è¨­ã®çœ‹è­·ãƒ»ãƒªãƒé€£æºå¼·åŒ–ã®ãŸã‚"
  }
}
```

#### æ¨å¥¨å®Ÿè£…æ–¹é‡

**Phase 1ï¼ˆç¾åœ¨ï¼‰**:
- ã‚¿ã‚°æ©Ÿèƒ½ + `crossFacilityConfig` ã§å¯¾å¿œ
- Level 99ãŒæ‰‹å‹•ã§æŠ•ç¥¨ç¯„å›²èª¿æ•´å¯èƒ½

**Phase 2ï¼ˆé‹ç”¨å¾Œ3ãƒ¶æœˆï¼‰**:
- æ–½è¨­æ¨ªæ–­è­°é¡Œã®ç™ºç”Ÿé »åº¦ã‚’åˆ†æ
- å¿…è¦ã«å¿œã˜ã¦ `CROSS_FACILITY` ãƒ¬ãƒ™ãƒ«ã‚’è¿½åŠ 

---

## è³ªå•3: å…¼ä»»è·å“¡ã®æŠ•ç¥¨æ¨©

### ğŸ“ è³ªå•å†…å®¹
> å…¼ä»»è·å“¡ï¼ˆä¾‹: å°åŸç—…é™¢çœ‹è­·éƒ¨ + ç«‹ç¥ãƒªãƒãƒ“ãƒªéå¸¸å‹¤ï¼‰ã®æŠ•ç¥¨æ¨©ã¯ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ
> - ä¸¡æ–½è¨­ã§æŠ•ç¥¨å¯èƒ½ï¼Ÿ
> - ä¸»æ‰€å±ã®ã¿ï¼Ÿ
> - æŠ•ç¥¨æ™‚ã«é¸æŠï¼Ÿ

### âœ… å›ç­”

**å…¼ä»»è·å“¡ã¯ä¸¡æ–¹ã®æ‰€å±ã§æŠ•ç¥¨å¯èƒ½ã§ã™ã€‚** ä»¥ä¸‹ã®ä»•æ§˜ã§å®Ÿè£…ã—ã¾ã™ã€‚

#### 1. Userå‹ã®æ‹¡å¼µ

ç¾åœ¨ã®å˜ä¸€æ‰€å±ã‹ã‚‰è¤‡æ•°æ‰€å±å¯¾å¿œã¸ï¼š

```typescript
// ç¾åœ¨ï¼ˆå˜ä¸€æ‰€å±ï¼‰
interface User {
  id: string;
  name: string;
  department: string;        // "çœ‹è­·éƒ¨"
  facilityCode: string;      // "obara-hospital"
  permissionLevel: number;   // 3
}

// æ‹¡å¼µå¾Œï¼ˆè¤‡æ•°æ‰€å±å¯¾å¿œï¼‰
interface User {
  id: string;
  name: string;

  // ä¸»æ‰€å±
  primaryAffiliation: {
    facilityCode: string;           // "obara-hospital"
    department: string;             // "çœ‹è­·éƒ¨"
    section?: string;               // "3éšç—…æ£Ÿ"
    jobCategory: string;            // "nurse"
    employmentRate: number;         // 1.0ï¼ˆå¸¸å‹¤ï¼‰
    permissionLevel: number;        // 3
  };

  // å…¼ä»»æ‰€å±ï¼ˆé…åˆ—ï¼‰
  secondaryAffiliations?: Array<{
    facilityCode: string;           // "tategami-rehabilitation"
    department: string;             // "çœ‹è­·éƒ¨"
    section?: string;               // "åŒ»ç™‚ç™‚é¤Šç—…æ£Ÿ"
    jobCategory: string;            // "nurse"
    employmentRate: number;         // 0.3ï¼ˆé€±1.5æ—¥ç›¸å½“ï¼‰
    permissionLevel: number;        // 3
  }>;
}
```

#### 2. æŠ•ç¥¨æ¨©ã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

```typescript
// AgendaLevelEngine.getAgendaPermissions ã®æ‹¡å¼µ

getAgendaPermissions(
  post: Post,
  currentUser: User,
  currentScore: number
): AgendaPermissions {
  // ä¸»æ‰€å±ã§ã®æ¨©é™ãƒã‚§ãƒƒã‚¯
  const primaryPermissions = this.checkPermissionByAffiliation(
    post,
    currentUser.primaryAffiliation,
    currentScore
  );

  // å…¼ä»»æ‰€å±ã§ã®æ¨©é™ãƒã‚§ãƒƒã‚¯
  const secondaryPermissions = currentUser.secondaryAffiliations?.map(affiliation =>
    this.checkPermissionByAffiliation(post, affiliation, currentScore)
  ) || [];

  // ã„ãšã‚Œã‹ã®æ‰€å±ã§æ¨©é™ãŒã‚ã‚Œã°æŠ•ç¥¨å¯èƒ½
  return {
    canView: primaryPermissions.canView || secondaryPermissions.some(p => p.canView),
    canVote: primaryPermissions.canVote || secondaryPermissions.some(p => p.canVote),
    canComment: primaryPermissions.canComment || secondaryPermissions.some(p => p.canComment),
    visibilityScope: this.getMergedScope(primaryPermissions, secondaryPermissions),
    affiliationContext: this.getVotingAffiliation(primaryPermissions, secondaryPermissions)
  };
}
```

#### 3. æŠ•ç¥¨æ™‚ã®æ‰€å±é¸æŠUI

å…¼ä»»è·å“¡ãŒæŠ•ç¥¨ã™ã‚‹éš›ã€ã©ã®æ‰€å±ã¨ã—ã¦æŠ•ç¥¨ã™ã‚‹ã‹é¸æŠï¼š

```typescript
// æŠ•ç¥¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
<VoteButton
  post={post}
  user={user}
  onVote={(voteType, selectedAffiliation) => {
    submitVote({
      postId: post.id,
      userId: user.id,
      voteType: voteType,
      affiliationContext: selectedAffiliation, // ã©ã®æ‰€å±ã¨ã—ã¦æŠ•ç¥¨ã—ãŸã‹
      facilityCode: selectedAffiliation.facilityCode,
      department: selectedAffiliation.department
    });
  }}
/>

// æŠ•ç¥¨æ™‚ã®UI
ã€æŠ•ç¥¨ç¢ºèªã€‘
ã‚ãªãŸã¯è¤‡æ•°ã®æ‰€å±ãŒã‚ã‚Šã¾ã™ã€‚ã©ã®ç«‹å ´ã§æŠ•ç¥¨ã—ã¾ã™ã‹ï¼Ÿ

â—‹ å°åŸç—…é™¢ çœ‹è­·éƒ¨ 3éšç—…æ£Ÿï¼ˆä¸»æ‰€å±ï¼‰
â—‹ ç«‹ç¥ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¸©æ³‰ç—…é™¢ çœ‹è­·éƒ¨ åŒ»ç™‚ç™‚é¤Šç—…æ£Ÿï¼ˆå…¼ä»»ï¼‰

[ã“ã®ç«‹å ´ã§æŠ•ç¥¨ã™ã‚‹]
```

#### 4. é‡è¤‡æŠ•ç¥¨ã®é˜²æ­¢

```typescript
// æŠ•ç¥¨åˆ¶é™ãƒ­ã‚¸ãƒƒã‚¯
{
  postId: "post_abc123",
  votes: [
    {
      userId: "user_xyz",
      affiliationContext: {
        facilityCode: "obara-hospital",
        department: "çœ‹è­·éƒ¨"
      },
      voteType: "agree",
      timestamp: "2025-10-12T10:00:00Z"
    }
  ]
}

// åŒä¸€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é‡è¤‡æŠ•ç¥¨ãƒã‚§ãƒƒã‚¯
if (votes.some(v => v.userId === currentUser.id)) {
  return {
    error: "ã“ã®æŠ•ç¨¿ã«ã¯æ—¢ã«æŠ•ç¥¨æ¸ˆã¿ã§ã™",
    previousVote: votes.find(v => v.userId === currentUser.id),
    action: "æŠ•ç¥¨ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¯æ—¢å­˜ã®æŠ•ç¥¨ã‚’å‰Šé™¤ã—ã¦ãã ã•ã„"
  };
}
```

#### 5. æŠ•ç¥¨æ¨©é‡ã¿ä»˜ã‘ã®æ‰±ã„

**å½“é¢ã¯é‡ã¿ä»˜ã‘ãªã—ï¼ˆ1äºº1ç¥¨ï¼‰**:
```
ç†ç”±:
- ã‚·ã‚¹ãƒ†ãƒ ã®è¤‡é›‘æ€§ã‚’é¿ã‘ã‚‹
- å…¼ä»»æ¯”ç‡ã«ã‚ˆã‚‹é‡ã¿ä»˜ã‘ã¯é‹ç”¨è² è·ãŒé«˜ã„
- å£°ã‚’ä¸Šã’ã‚‹æ–‡åŒ–é†¸æˆãŒå„ªå…ˆï¼ˆç¥¨æ•°ã®æ­£ç¢ºæ€§ã¯äºŒã®æ¬¡ï¼‰

å°†æ¥çš„ãªæ¤œè¨:
- é‹ç”¨6ãƒ¶æœˆå¾Œã«å…¼ä»»è·å“¡ã®æŠ•ç¥¨è¡Œå‹•ã‚’åˆ†æ
- å¿…è¦æ€§ãŒèªã‚ã‚‰ã‚Œã‚Œã°é‡ã¿ä»˜ã‘æ©Ÿèƒ½ã‚’è¿½åŠ 
```

#### 6. Prisma Schemaã¸ã®åæ˜ 

```prisma
// Userå‹ã®æ‹¡å¼µï¼ˆå°†æ¥çš„ãªå®Ÿè£…ï¼‰
model User {
  id                    String   @id @default(cuid())
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• å…¼ä»»å¯¾å¿œ
  primaryAffiliation    Json     @map("primary_affiliation")
  secondaryAffiliations Json?    @map("secondary_affiliations")
}

// Voteå‹ã®æ‹¡å¼µ
model Vote {
  id                   String   @id @default(cuid())
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• æŠ•ç¥¨æ™‚ã®æ‰€å±ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
  affiliationContext   Json?    @map("affiliation_context")
  votedAsFacility      String?  @map("voted_as_facility")
  votedAsDepartment    String?  @map("voted_as_department")
}
```

---

## ğŸ“Š å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1ï¼ˆDBæ§‹ç¯‰æ™‚ï¼‰- å¿…é ˆ
1. âœ… æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—å‹•çš„å¤‰æ›´æ©Ÿèƒ½ï¼ˆLevel 99 UIï¼‰
2. âœ… æ–½è¨­æ¨ªæ–­è­°é¡Œã®ã‚¿ã‚°å¯¾å¿œ
3. â³ å…¼ä»»è·å“¡ã®è¤‡æ•°æ‰€å±å¯¾å¿œï¼ˆUserå‹æ‹¡å¼µï¼‰

### Phase 2ï¼ˆé‹ç”¨é–‹å§‹å¾Œ1-3ãƒ¶æœˆï¼‰- é‹ç”¨çŠ¶æ³æ¬¡ç¬¬
1. â³ æ–½è¨­æ¨ªæ–­ãƒ¬ãƒ™ãƒ«ï¼ˆCROSS_FACILITYï¼‰è¿½åŠ ã®è¦å¦åˆ¤æ–­
2. â³ å…¼ä»»è·å“¡ã®æŠ•ç¥¨è¡Œå‹•åˆ†æ
3. â³ æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—å†ç·¨æˆã®é‹ç”¨ãƒ«ãƒ¼ãƒ«ç­–å®š

---

## ğŸ”„ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¸
1. âœ… ã“ã®å›ç­”å†…å®¹ã‚’ç¢ºèª
2. âœ… è¿½åŠ è³ªå•ãƒ»æ‡¸å¿µäº‹é …ãŒã‚ã‚Œã°10/15ã¾ã§ã«é€£çµ¡
3. âœ… å…¼ä»»è·å“¡ã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«ã¤ã„ã¦å”è­°ï¼ˆUserå‹æ‹¡å¼µã®DBè¨­è¨ˆï¼‰

### VoiceDriveãƒãƒ¼ãƒ ã¸
1. â³ Level 99ç®¡ç†è€…UIï¼ˆæŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†ç”»é¢ï¼‰ã®è¨­è¨ˆé–‹å§‹
2. â³ Userå‹ã®è¤‡æ•°æ‰€å±å¯¾å¿œã®å®Ÿè£…è¨ˆç”»ç­–å®š
3. â³ æ–½è¨­æ¨ªæ–­è­°é¡Œã®ã‚¿ã‚°æ©Ÿèƒ½å®Ÿè£…

---

## ğŸ“ é€£çµ¡å…ˆ

**VoiceDriveãƒãƒ¼ãƒ æ‹…å½“è€…**: [æ‹…å½“è€…å]
**å›ç­”æœŸé™**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã‹ã‚‰ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ 2025-10-15ï¼ˆç«ï¼‰ã¾ã§
**Slack**: #voicedrive-integration

---

**ä½œæˆè€…**: VoiceDriveãƒãƒ¼ãƒ 
**æœ€çµ‚æ›´æ–°**: 2025-10-12
