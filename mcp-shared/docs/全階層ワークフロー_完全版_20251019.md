# 全階層ワークフロー 完全版
作成日: 2025年10月19日

## 議題モード 全階層の承認/却下フロー

---

## 【第1階層】部署レベル（30-99点）

### 30点到達
```
通知先: 投稿者 + 主任（Level 3.5）+ 師長（Level 7）
内容: 事前確認依頼（情報共有のみ）
```

### 50点到達
```
通知先: 投稿者 + 主任（Level 3.5）

主任の判断（2択）:
  ├─ 却下 → 投稿終了
  └─ 師長に推薦 → 師長に通知
       ↓
       師長の判断（3択）:
         ├─ 却下 → 投稿終了
         ├─ 部署議題承認 → 部署内全員に通知
         └─ 施設議題に昇格 → 第2階層へ
```

---

## 【第2階層】施設レベル（100-299点）

### 100点到達
```
通知先:
  - 副看護部長/看護部長（Level 8）- 判断要求
  - 師長（Level 7）- 情報共有
  - 主任（Level 3.5）- 情報共有
  - 投稿者 - 進捗報告
  - 施設内全職員 - 施設議題到達のお知らせ

副看護部長の判断（3択）:
  ├─ 委員会提出承認 → 施設内全職員に通知
  ├─ 却下 → 師長に再判断依頼（部署議題化 or 完全却下）
  └─ **法人検討に昇格** → 第3階層へ
```

#### 副看護部長が「法人検討に昇格」を押した場合
```
副看護部長が「法人検討に昇格」ボタンを押す
  ↓
【自動処理】
- 議題レベル: CORP_REVIEW に強制昇格（スコア100点でも）
- 投稿公開範囲: **施設内のまま**（法人全体には公開しない）
- 投票範囲: 施設内全職員
- 投票期限: 規定に基づき延長（例: +30日）
- 投稿ステータス: 'pending_general_affairs_review'

【通知1】投稿者に通知
  タイトル: 「法人検討に昇格しました」
  メッセージ: 「『夜勤看護師3名体制の提案』が副看護部長の判断により法人検討に昇格しました。
              300点到達を目指して投票が継続されます。

              ※公開範囲は施設内のままです。」

【通知2】事務長（Level 11）に通知
  タイトル: 「法人検討案件が発生しました」
  メッセージ: 「副看護部長が『夜勤看護師3名体制の提案』を法人検討に昇格しました。

              現在のスコア: 105点
              目標: 300点

              300点到達時に法人議題化の承認/却下判断をお願いします。」

【通知3】施設内全職員に通知
  タイトル: 「法人検討案件に昇格しました」
  メッセージ: 「『夜勤看護師3名体制の提案』が法人検討案件に昇格しました。
              300点到達を目指して投票を継続します。

              引き続きご投票をお願いします。」

→ 第3階層（法人検討）へ移行
```

#### 副看護部長が却下した場合
```
副看護部長が却下
  ↓
【通知1】施設内全職員に通知
  「施設議題として却下されました（理由付き）」

【通知2】師長（Level 7）に通知
  「部署議題化の判断をお願いします」

師長の判断（2択）:
  ├─ 部署議題承認 → 部署内全員+他部署職員に通知
  └─ 完全却下 → 投稿終了
```

---

## 【第3階層】法人検討レベル（300-599点）

### 300点到達
```
通知先:
  - 事務長（Level 11）- 判断要求
  - 副看護部長（Level 8）- 情報共有
  - 師長（Level 7）- 情報共有
  - 主任（Level 3.5）- 情報共有
  - 投稿者 - 進捗報告
  - 施設内全職員 - 法人検討到達のお知らせ

事務長の判断（3択）:
  ├─ 法人議題として承認 → 施設内全職員に通知（公開範囲は施設内のまま）
  ├─ 却下 → 副看護部長に再判断依頼（施設議題化 or 完全却下）
  └─ **法人議題に昇格（600点目標）** → 第4階層へ
```

#### 事務長が「法人議題として承認」を押した場合
```
事務長が「法人議題として承認」ボタンを押す
  ↓
【自動処理】
- 投稿ステータス: 'approved_as_corp_agenda'
- 投票終了（議題化完了）

【通知1】施設内全職員に通知
  タイトル: 「✅ 法人議題として承認されました」
  メッセージ: 「『夜勤看護師3名体制の提案』が事務長により法人議題として承認されました。

              最終スコア: 320点

              事務長コメント:
              法人全体で検討すべき重要案件と判断しました。
              次回の経営会議で審議します。」

【通知2】副看護部長・師長・主任に通知（情報共有）
  「推薦した議題が法人議題として承認されました。」

【通知3】投稿者に通知
  「あなたの提案が法人議題として承認されました！」

→ 法人議題として経営会議で審議
```

#### 事務長が却下した場合
```
事務長が却下理由を入力して却下
  ↓
【通知1】施設内全職員に通知
  タイトル: 「法人検討として却下されました」
  メッセージ: 「『夜勤看護師3名体制の提案』は事務長により却下されました。

              却下理由:
              法人全体での展開は時期尚早と判断しました。

              最終スコア: 315点
              ご投票ありがとうございました。」

【通知2】副看護部長（Level 8）に通知
  タイトル: 「⚠️ 法人検討が却下されました - 施設議題化の判断をお願いします」
  メッセージ: 「『夜勤看護師3名体制の提案』は法人検討として却下されました。

              最終スコア: 315点

              却下理由:
              法人全体での展開は時期尚早と判断しました。

              ただし、施設独自の取り組みとして進めることは可能です。
              施設議題として承認するか、完全に却下するかを判断してください。」
  アクション: [施設議題承認/完全却下画面を開く]

【通知3】投稿者・師長・主任に通知（情報共有）
  「法人検討として却下されましたが、副看護部長が施設議題化の判断を行います。」

副看護部長の判断（2択）:
  ├─ 施設議題承認 → 施設内全員に通知（議題化完了）
  └─ 完全却下 → 投稿終了
```

#### 事務長が「法人議題に昇格（600点目標）」を押した場合
```
事務長が「法人議題に昇格」ボタンを押す
  ↓
【自動処理】
- 議題レベル: CORP_AGENDA に強制昇格（スコア300点でも）
- 投稿公開範囲: **施設内のまま**（法人全体には公開しない）
- 投票範囲: 施設内全職員
- 投票期限: 規定に基づき延長（例: +30日）
- 投稿ステータス: 'pending_general_affairs_director_review'

【通知1】投稿者に通知
  「法人議題（理事会レベル）に昇格しました。600点到達を目指します。」

【通知2】法人統括事務局長（Level 18）に通知
  タイトル: 「法人議題案件が発生しました」
  メッセージ: 「事務長が『夜勤看護師3名体制の提案』を法人議題に昇格しました。

              現在のスコア: 320点
              目標: 600点

              600点到達時に理事会提出の承認/却下判断をお願いします。」

【通知3】施設内全職員に通知
  「法人議題（理事会レベル）に昇格しました。600点到達を目指します。」

→ 第4階層（法人議題）へ移行
```

---

## 【第4階層】法人議題レベル（600点以上）

### 600点到達
```
【自動処理】
- 投稿公開範囲: **法人内全職員に拡大**
- 投稿表示: 施設名 + 投稿者名を記載
- 投稿ステータス: 'pending_general_affairs_director_review'

通知先:
  - 法人統括事務局長（Level 18）- 判断要求
  - 全施設の事務長（Level 11）- 情報共有
  - 副看護部長（Level 8）- 情報共有
  - 師長（Level 7）- 情報共有
  - 主任（Level 3.5）- 情報共有
  - 投稿者 - 進捗報告
  - **法人内全職員** - 法人議題到達のお知らせ

法人統括事務局長の判断（2択）:
  ├─ 法人運営会議提出承認 → 法人内全職員に通知
  └─ 却下 → 事務長に再判断依頼（施設議題化 or 完全却下）
```

#### 法人統括事務局長が「法人運営会議提出承認」を押した場合
```
法人統括事務局長が「法人運営会議提出承認」ボタンを押す
  ↓
【自動処理】
- 投稿ステータス: 'approved_for_corp_management_meeting'
- 投票終了（法人運営会議提出完了）

【通知1】法人内全職員に通知
  タイトル: 「✅ 法人運営会議に提出されました」
  メッセージ: 「【立神リハビリテーション温泉病院】田中花子さんの提案
              『夜勤看護師3名体制の提案』が法人統括事務局長により承認され、
              法人運営会議に正式提出されました。

              最終スコア: 625点

              事務局長コメント:
              法人全体で検討すべき重要案件と判断しました。

              各施設の事務長の皆様は、次回の法人運営会議で審議をお願いします。」

【通知2】全施設の事務長（Level 11）に通知
  タイトル: 「📋 法人運営会議の議題が追加されました」
  メッセージ: 「【立神リハビリテーション温泉病院】田中花子さんの提案
              『夜勤看護師3名体制の提案』が法人運営会議の議題として追加されました。

              最終スコア: 625点
              提案施設: 立神リハビリテーション温泉病院
              提案者: 田中花子（医療療養病棟・看護師）

              次回の法人運営会議で審議をお願いします。」
  アクション: [議題詳細を見る]

【通知3】投稿者・主任・師長・副看護部長・事務長に通知
  「あなたの提案（または推薦した議題）が法人運営会議に提出されました！」

→ 法人運営会議で審議
```

#### 法人統括事務局長が却下した場合
```
法人統括事務局長が却下理由を入力して却下
  ↓
【自動処理】
- 投稿公開範囲: 法人内 → 施設内に縮小
- 投稿ステータス: 'rejected_by_general_affairs_director'

【通知1】法人内全職員に通知
  タイトル: 「法人運営会議提出が見送られました」
  メッセージ: 「【立神リハビリテーション温泉病院】田中花子さんの提案
              『夜勤看護師3名体制の提案』は法人運営会議提出が見送られました。

              却下理由:
              現時点での法人全体での展開は時期尚早と判断しました。

              最終スコア: 615点
              ご投票ありがとうございました。」

【通知2】事務長（Level 11）に通知
  タイトル: 「⚠️ 法人運営会議提出が見送られました - 施設議題化の判断をお願いします」
  メッセージ: 「『夜勤看護師3名体制の提案』は法人運営会議提出が見送られました。

              最終スコア: 615点

              却下理由:
              現時点での法人全体での展開は時期尚早と判断しました。

              ただし、当施設独自の取り組みとして進めることは可能です。
              施設議題として承認するか、完全に却下するかを判断してください。」
  アクション: [施設議題承認/完全却下画面を開く]

【通知3】投稿者・主任・師長・副看護部長に通知（情報共有）
  「法人運営会議提出が見送られましたが、事務長が施設議題化の判断を行います。」

事務長の判断（2択）:
  ├─ 施設議題として承認
  │   ↓
  │   【自動処理】
  │   - 投稿ステータス: 'approved_as_facility_agenda_by_general_affairs'
  │   - 投票終了（施設議題化完了）
  │
  │   【通知1】施設内全職員に通知
  │   タイトル: 「✅ 施設議題として承認されました」
  │   メッセージ: 「『夜勤看護師3名体制の提案』が事務長により施設議題として承認されました。
  │
  │               事務長コメント:
  │               法人全体での展開は見送られましたが、当施設では重要案件と判断しました。
  │               次回の施設運営委員会で審議します。
  │
  │               最終スコア: 615点」
  │
  │   → 施設運営委員会で議題提案
  │
  └─ 完全却下
      ↓
      【通知】施設内全職員に通知
      「提案は終了しました（理由付き）」
```

---

## 重要な設計原則

### 1. 公開範囲の制限
```
100点: 施設議題 → 公開範囲: 施設内全職員
300点: 法人検討 → 公開範囲: 施設内のまま（法人全体には公開しない）
600点: 法人議題 → 公開範囲: 施設内のまま（法人全体には公開しない）
```

**理由**:
- プライバシー保護
- 他施設への影響を避ける
- 施設独自の取り組みとして進める余地を残す

### 2. 却下時の救済フロー
```
Level 18が却下 → Level 11が再判断（法人議題化 or 完全却下）
Level 11が却下 → Level 8が再判断（施設議題化 or 完全却下）
Level 8が却下 → Level 7が再判断（部署議題化 or 完全却下）
```

**理由**:
- 上級管理職の却下を尊重しつつ、下位レベルでの活用余地を残す
- 600点到達した提案を無駄にしない
- 指揮系統を維持

### 3. 透明性の確保
```
全ての承認/却下判断 → 施設内全職員に通知（理由付き）
```

**理由**:
- 意思決定プロセスの可視化
- 投票に参加した職員への説明責任
- 組織の信頼性向上

---

## 通知先まとめ

| スコア到達 | 判断者 | 通知先（判断要求） | 通知先（情報共有） |
|---|---|---|---|
| 30点 | なし | - | 投稿者 + 主任 + 師長 |
| 50点 | 主任 | 主任 | 投稿者 |
| 主任推薦 | 師長 | 師長 | 投稿者 + 主任 |
| 師長承認 | - | - | 投稿者 + 主任 + 部署全員 |
| 100点 | 副看護部長 | 副看護部長 | 投稿者 + 主任 + 師長 + 施設全員 |
| 300点 | 事務長 | 事務長 | 投稿者 + 主任 + 師長 + 副看護部長 + 施設全員 |
| 600点 | 事務局長 | 事務局長 | 投稿者 + 主任 + 師長 + 副看護部長 + 事務長 + 施設全員 |

---

## 次のステップ

このフローで確定して実装を開始しますか？
