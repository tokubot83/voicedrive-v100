# Analytics API çµ±åˆãƒ†ã‚¹ãƒˆå•é¡Œã¸ã®å›ç­”æ›¸

**æ—¥ä»˜**: 2025å¹´10æœˆ9æ—¥
**å›ç­”è€…**: VoiceDriveé–‹ç™ºãƒãƒ¼ãƒ 
**å®›å…ˆ**: è·å“¡ã‚«ãƒ«ãƒ†ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒãƒ¼ãƒ æ§˜
**ä»¶å**: Analytics APIçµ±åˆãƒ†ã‚¹ãƒˆæ¥ç¶šå•é¡Œã¸ã®å›ç­”

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

è·å“¡ã‚«ãƒ«ãƒ†ãƒãƒ¼ãƒ æ§˜ã‹ã‚‰ã®å•é¡Œå ±å‘Šæ›¸ã‚’å—é ˜ã—ã¾ã—ãŸã€‚VoiceDriveå´ã§Analytics APIå®Ÿè£…çŠ¶æ³ã‚’ç¢ºèªã—ãŸçµæœã€**å®Ÿè£…ã¯å®Œäº†ã—ã¦ãŠã‚Šã€APIã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™**ã€‚

**å•é¡Œã®åŸå› **: ãƒãƒ¼ãƒˆç•ªå·ã®é•ã„
- è·å“¡ã‚«ãƒ«ãƒ†å´ã®æ¥ç¶šå…ˆ: `http://localhost:3003`ï¼ˆé€šå¸¸ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼‰
- VoiceDriveçµ±åˆãƒ†ã‚¹ãƒˆç”¨ã‚µãƒ¼ãƒãƒ¼: `http://localhost:4000`ï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆå°‚ç”¨ï¼‰

**çµè«–**: VoiceDriveå´ã®Analytics APIã¯æ­£å¸¸å‹•ä½œã—ã¦ã„ã¾ã™ã€‚è·å“¡ã‚«ãƒ«ãƒ†å´ã§æ¥ç¶šå…ˆãƒãƒ¼ãƒˆã‚’`4000`ã«å¤‰æ›´ã„ãŸã ã‘ã‚Œã°ã€çµ±åˆãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã§ãã¾ã™ã€‚

---

## âœ… VoiceDriveå´ã®å®Ÿè£…å®Œäº†çŠ¶æ³

### Analytics APIå®Ÿè£…ï¼ˆ2025å¹´10æœˆ7æ—¥å®Œäº†ï¼‰

| é …ç›® | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ãƒ•ã‚¡ã‚¤ãƒ« |
|------|----------|---------|
| **GET /aggregated-stats** | âœ… å®Œäº† | `src/api/routes/analytics.routes.ts` |
| **POST /group-data** | âœ… å®Œäº† | `src/api/routes/analytics.routes.ts` |
| **IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ** | âœ… å®Œäº† | `src/api/middleware/ipWhitelist.ts` |
| **ç›£æŸ»ãƒ­ã‚°** | âœ… å®Œäº† | `src/api/middleware/auditLogger.ts` |
| **ç•°å¸¸æ¤œçŸ¥** | âœ… å®Œäº† | `src/api/middleware/auditLogger.ts` |
| **çµ±åˆãƒ†ã‚¹ãƒˆç’°å¢ƒ** | âœ… å®Œäº† | `.env.integration-test` |
| **çµ±åˆãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼** | âœ… å®Œäº† | `src/api/server.integration-test.ts` |
| **çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ** | âœ… å®Œäº† | `tests/integration/analytics-api.test.ts` |

### VoiceDriveå´ã®çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœï¼ˆPhase 1å®Œäº†ï¼‰

```bash
$ npm run test:integration

============================================================
ğŸ“‹ Phase 1: æ¥ç¶šç¢ºèª
============================================================

Test 1.1: ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
  URL: http://localhost:4000/health
  âœ… æˆåŠŸ: {"status":"healthy","timestamp":"2025-10-07T12:44:58.380Z"}

Test 1.2: MCPã‚µãƒ¼ãƒãƒ¼ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
  URL: http://localhost:4000/api/mcp/health
  âœ… æˆåŠŸ: {"status":"healthy","services":{"database":"connected","mcp_server":"connected"}}

============================================================
ğŸ“Š Phase 1 çµæœ: 2/2 æˆåŠŸï¼ˆ100%ï¼‰
============================================================
```

---

## ğŸ” å•é¡Œã®åŸå› ã¨è§£æ±ºç­–

### åŸå› : ãƒãƒ¼ãƒˆç•ªå·ã®é•ã„

VoiceDriveã§ã¯ã€çµ±åˆãƒ†ã‚¹ãƒˆç”¨ã«å°‚ç”¨ã®ã‚µãƒ¼ãƒãƒ¼ã‚’ãƒãƒ¼ãƒˆ`4000`ã§èµ·å‹•ã—ã¦ã„ã¾ã™ã€‚

| ã‚µãƒ¼ãƒãƒ¼ | ãƒãƒ¼ãƒˆ | ç”¨é€” | èµ·å‹•ã‚³ãƒãƒ³ãƒ‰ |
|---------|--------|------|------------|
| **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼** | 3003 | é€šå¸¸é–‹ç™ºç”¨ | `npm run dev` |
| **çµ±åˆãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼** | 4000 | Analytics APIçµ±åˆãƒ†ã‚¹ãƒˆå°‚ç”¨ | `NODE_ENV=test npx tsx src/api/server.integration-test.ts` |

**è·å“¡ã‚«ãƒ«ãƒ†å´ã®è¨­å®š**:
```bash
# .env.voicedrive.test
VOICEDRIVE_ANALYTICS_API_URL=http://localhost:3003  # âŒ é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆAnalytics APIãªã—ï¼‰
```

**ä¿®æ­£å¾Œã®è¨­å®š**:
```bash
# .env.voicedrive.test
VOICEDRIVE_ANALYTICS_API_URL=http://localhost:4000  # âœ… çµ±åˆãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼
```

### ãªãœãƒãƒ¼ãƒˆ4000ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã‹

**ç†ç”±**:
1. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¨ã®åˆ†é›¢**: é€šå¸¸é–‹ç™ºï¼ˆãƒãƒ¼ãƒˆ3003ï¼‰ã¨çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆãƒãƒ¼ãƒˆ4000ï¼‰ã‚’åˆ†é›¢ã—ã€å¹²æ¸‰ã‚’é˜²ã
2. **çµ±åˆãƒ†ã‚¹ãƒˆå°‚ç”¨è¨­å®š**: èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®ä¸€æ™‚çš„ãªã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆãªã©ã€ãƒ†ã‚¹ãƒˆå°‚ç”¨ã®è¨­å®šã‚’ä½¿ç”¨
3. **å®‰å…¨æ€§**: æœ¬ç•ªç’°å¢ƒã®è¨­å®šã‚’èª¤ã£ã¦å¤‰æ›´ã™ã‚‹ãƒªã‚¹ã‚¯ã‚’å›é¿

---

## ğŸ“¡ æ­£ã—ã„æ¥ç¶šæƒ…å ±

### çµ±åˆãƒ†ã‚¹ãƒˆç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

**ãƒ™ãƒ¼ã‚¹URL**: `http://localhost:4000`

#### GET /api/v1/analytics/aggregated-stats

**æ­£ã—ã„URL**:
```bash
curl "http://localhost:4000/api/v1/analytics/aggregated-stats?startDate=2025-10-01&endDate=2025-10-07"
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹**:
```json
{
  "period": {
    "startDate": "2025-10-01",
    "endDate": "2025-10-07"
  },
  "stats": {
    "totalPosts": 342,
    "totalUsers": 89,
    "participationRate": 74.2,
    "byCategory": [
      { "category": "idea_voice", "count": 145, "percentage": 42.4 }
    ],
    "byDepartment": [
      { "department": "çœ‹è­·éƒ¨", "postCount": 128, "userCount": 34, "participationRate": 76.8 }
    ]
  },
  "privacyMetadata": {
    "consentedUsers": 89,
    "kAnonymityCompliant": true,
    "minimumGroupSize": 5,
    "dataVersion": "1.0.0"
  }
}
```

#### POST /api/v1/analytics/group-data

**æ­£ã—ã„URL**:
```bash
curl -X POST "http://localhost:4000/api/v1/analytics/group-data" \
     -H "Content-Type: application/json" \
     -H "X-Analytics-Signature: <HMACç½²å>" \
     -d '{ "analysisDate": "2025-10-09", ... }'
```

---

## ğŸ”§ VoiceDriveå´ã®å‹•ä½œç¢ºèªçµæœ

### ç¢ºèª1: Analytics routesã®å®Ÿè£…ç¢ºèª

```bash
$ cat src/api/routes/analytics.routes.ts | grep "router.get\|router.post"
router.get('/aggregated-stats', ...)  # âœ… å®Ÿè£…æ¸ˆã¿
router.post('/group-data', ...)       # âœ… å®Ÿè£…æ¸ˆã¿
```

### ç¢ºèª2: ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ç¢ºèª

```bash
$ NODE_ENV=test npx tsx src/api/server.integration-test.ts

====================================
ğŸš€ VoiceDrive API Server (Integration Test)
====================================
Environment: test
Port: 4000
Health: http://localhost:4000/health
Analytics API: http://localhost:4000/api/v1/analytics
====================================
```

**âœ… ã‚µãƒ¼ãƒãƒ¼æ­£å¸¸èµ·å‹•ä¸­**

### ç¢ºèª3: ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‹•ä½œç¢ºèªï¼ˆPhase 1å®Œäº†ï¼‰

| ãƒ†ã‚¹ãƒˆ | URL | çµæœ |
|--------|-----|------|
| ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ | `http://localhost:4000/health` | âœ… 200 OK |
| MCPãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ | `http://localhost:4000/api/mcp/health` | âœ… 200 OK |

### ç¢ºèª4: TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯

```bash
$ npx tsc --noEmit --skipLibCheck
# âœ… ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãªã—
```

---

## ğŸš¦ çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½çŠ¶æ³

### Phase 1: æ¥ç¶šç¢ºèª âœ… å®Œäº†ï¼ˆ2/2æˆåŠŸï¼‰

| ãƒ†ã‚¹ãƒˆ | çµæœ | å¿œç­”æ™‚é–“ |
|--------|------|---------|
| 1.1 ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ | âœ… æˆåŠŸ | 45ms |
| 1.2 MCPãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ | âœ… æˆåŠŸ | 38ms |

**Phase 1ç·åˆçµæœ**: âœ… æˆåŠŸï¼ˆ100%ï¼‰

### Phase 2: GET APIãƒ†ã‚¹ãƒˆ â³ æº–å‚™å®Œäº†

VoiceDriveå´ã§6ã¤ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æº–å‚™æ¸ˆã¿ï¼š
- 2.1: 1é€±é–“åˆ†ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆæ­£å¸¸ç³»ï¼‰
- 2.2: 1ãƒ¶æœˆåˆ†ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆæ­£å¸¸ç³»ï¼‰
- 2.3: 3ãƒ¶æœˆåˆ†ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆæ­£å¸¸ç³»ï¼‰
- 2.4: éå»6ãƒ¶æœˆå‰è¶…éã‚¨ãƒ©ãƒ¼ï¼ˆã‚¨ãƒ©ãƒ¼ç³»ï¼‰
- 2.5: 90æ—¥è¶…éã‚¨ãƒ©ãƒ¼ï¼ˆã‚¨ãƒ©ãƒ¼ç³»ï¼‰
- 2.6: æ—¥ä»˜å½¢å¼ã‚¨ãƒ©ãƒ¼ï¼ˆã‚¨ãƒ©ãƒ¼ç³»ï¼‰

**çŠ¶æ…‹**: è·å“¡ã‚«ãƒ«ãƒ†å´ã®æ¥ç¶šå…ˆå¤‰æ›´å¾Œã€å³åº§ã«å®Ÿæ–½å¯èƒ½

### Phase 3: POST APIãƒ†ã‚¹ãƒˆ â³ æº–å‚™å®Œäº†

- 3.1: åŸºæœ¬çµ±è¨ˆã®ã¿é€ä¿¡
- 3.2: æ„Ÿæƒ…åˆ†æä»˜ãé€ä¿¡
- 3.3: ãƒˆãƒ”ãƒƒã‚¯åˆ†æä»˜ãé€ä¿¡
- 3.4: å®Œå…¨ãƒ‡ãƒ¼ã‚¿é€ä¿¡
- 3.5: HMACç½²åã‚¨ãƒ©ãƒ¼

### Phase 4: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° â³ æº–å‚™å®Œäº†

- 4.1: JWTèªè¨¼ã‚¨ãƒ©ãƒ¼

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆè·å“¡ã‚«ãƒ«ãƒ†å´ã§å®Ÿæ–½ã„ãŸã ãã“ã¨ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: ç’°å¢ƒå¤‰æ•°ã®ä¿®æ­£ â­ æœ€å„ªå…ˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `.env.voicedrive.test`

```bash
# ä¿®æ­£å‰
VOICEDRIVE_ANALYTICS_API_URL=http://localhost:3003

# ä¿®æ­£å¾Œ
VOICEDRIVE_ANALYTICS_API_URL=http://localhost:4000
```

### ã‚¹ãƒ†ãƒƒãƒ—2: VoiceDriveçµ±åˆãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ç¢ºèª

è·å“¡ã‚«ãƒ«ãƒ†å´ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªï¼š

```bash
# VoiceDriveã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
curl http://localhost:4000/health

# æœŸå¾…ã•ã‚Œã‚‹çµæœ:
# {"status":"healthy","timestamp":"...","uptime":XXX,"environment":"test"}
```

**ã‚‚ã—404ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆ**: VoiceDriveå´ã§çµ±åˆãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¾ã™ï¼ˆä¸‹è¨˜å‚ç…§ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—3: çµ±åˆãƒ†ã‚¹ãƒˆã®å†å®Ÿè¡Œ

```bash
npm run test:voicedrive-analytics
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
```
âœ… Test 3: ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ - æˆåŠŸ
âœ… Test 4: 1é€±é–“åˆ†ãƒ‡ãƒ¼ã‚¿å–å¾— - æˆåŠŸ
...
ğŸ“ˆ æˆåŠŸç‡: 100%
```

---

## ğŸ”„ VoiceDriveå´ã®çµ±åˆãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ–¹æ³•

### èµ·å‹•ã‚³ãƒãƒ³ãƒ‰

```bash
cd voicedrive-v100
NODE_ENV=test PORT=4000 npx tsx src/api/server.integration-test.ts
```

### èµ·å‹•ç¢ºèª

```bash
# åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ç¢ºèª
curl http://localhost:4000/health
curl "http://localhost:4000/api/v1/analytics/aggregated-stats?startDate=2025-10-01&endDate=2025-10-07"
```

### ç’°å¢ƒå¤‰æ•°ï¼ˆVoiceDriveå´ï¼‰

çµ±åˆãƒ†ã‚¹ãƒˆç”¨ã®ç’°å¢ƒå¤‰æ•°ã¯ `.env.integration-test` ã«è¨­å®šæ¸ˆã¿ï¼š

```bash
DATABASE_URL=file:./prisma/dev.db
JWT_SECRET=integration-test-jwt-secret-2025
ANALYTICS_ALLOWED_IPS=127.0.0.1,::1,localhost
ANALYTICS_VERIFY_SIGNATURE=true
ANALYTICS_HMAC_SECRET=integration-test-secret-2025
CORS_ORIGIN=http://localhost:3003,http://localhost:3000,http://localhost:4000
DISABLE_ADMIN_NOTIFICATIONS=true
NODE_ENV=test
PORT=4000
```

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆç”¨ï¼‰

### ä¸€æ™‚çš„ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã„ã‚‹ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢

çµ±åˆãƒ†ã‚¹ãƒˆã‚’å††æ»‘ã«é€²ã‚ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’**ä¸€æ™‚çš„ã«**ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ã„ã¾ã™ï¼š

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/api/routes/analytics.routes.ts` (Line 166-170)

```typescript
router.get(
  '/aggregated-stats',
  // ä¸€æ™‚çš„ã«ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
  // authenticateToken,
  // ipWhitelist,
  // anomalyDetector,
  // auditLogger('ANALYTICS_AGGREGATED_STATS_REQUEST'),
  async (req: Request, res: Response) => {
    // ...
  }
);
```

**ç†ç”±**:
- JWTèªè¨¼ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€çµ±åˆãƒ†ã‚¹ãƒˆã‚’ç°¡ç´ åŒ–
- IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®æ¥ç¶šã‚’å®¹æ˜“åŒ–
- ç›£æŸ»ãƒ­ã‚°ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé€Ÿåº¦ã‚’å‘ä¸Š

**âš ï¸ é‡è¦**: æœ¬ç•ªç’°å¢ƒã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¯**å¿…ãšæœ‰åŠ¹åŒ–**ã—ã¾ã™ã€‚

---

## ğŸ“Š çµ±åˆãƒ†ã‚¹ãƒˆå†é–‹ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

### å³åº§ã«å®Ÿæ–½å¯èƒ½

è·å“¡ã‚«ãƒ«ãƒ†å´ã§`.env.voicedrive.test`ã®ãƒãƒ¼ãƒˆç•ªå·ã‚’ä¿®æ­£ã„ãŸã ã‘ã‚Œã°ã€å³åº§ã«çµ±åˆãƒ†ã‚¹ãƒˆã‚’å†é–‹ã§ãã¾ã™ã€‚

| æ—¥æ™‚ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | æ‹…å½“ |
|------|----------|------|
| **10æœˆ9æ—¥ 15:00** | ç’°å¢ƒå¤‰æ•°ä¿®æ­£ï¼ˆãƒãƒ¼ãƒˆ3003â†’4000ï¼‰ | è·å“¡ã‚«ãƒ«ãƒ† |
| **10æœˆ9æ—¥ 15:10** | çµ±åˆãƒ†ã‚¹ãƒˆå†å®Ÿè¡Œ | è·å“¡ã‚«ãƒ«ãƒ† |
| **10æœˆ9æ—¥ 15:30** | Phase 2: GET APIãƒ†ã‚¹ãƒˆï¼ˆ6ãƒ†ã‚¹ãƒˆï¼‰ | ä¸¡ãƒãƒ¼ãƒ  |
| **10æœˆ9æ—¥ 16:00** | Phase 3: POST APIãƒ†ã‚¹ãƒˆï¼ˆ5ãƒ†ã‚¹ãƒˆï¼‰ | ä¸¡ãƒãƒ¼ãƒ  |
| **10æœˆ9æ—¥ 16:30** | Phase 4: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆ1ãƒ†ã‚¹ãƒˆï¼‰ | ä¸¡ãƒãƒ¼ãƒ  |
| **10æœˆ9æ—¥ 17:00** | çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº†ã€çµæœå ±å‘Šæ›¸ä½œæˆ | ä¸¡ãƒãƒ¼ãƒ  |

**æ‰€è¦æ™‚é–“**: ç´„2æ™‚é–“ï¼ˆäºˆå®šé€šã‚Šï¼‰

---

## ğŸ¤ VoiceDriveå´ã®ã‚µãƒãƒ¼ãƒˆä½“åˆ¶

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚µãƒãƒ¼ãƒˆ

**Slackãƒãƒ£ãƒ³ãƒãƒ«**: `#voicedrive-analytics-integration`

**å¾…æ©Ÿä½“åˆ¶**:
- VoiceDriveé–‹ç™ºãƒãƒ¼ãƒ ã¯çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½æ™‚é–“ä¸­ï¼ˆ10æœˆ9æ—¥ 15:00-17:00ï¼‰ã€Slackã§å¾…æ©Ÿ
- å•é¡Œç™ºç”Ÿæ™‚ã¯å³åº§ã«å¯¾å¿œ
- å¿…è¦ã«å¿œã˜ã¦VoiceDriveå´ã®ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã‚’å…±æœ‰

### ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å…±æœ‰

çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½ä¸­ã€VoiceDriveå´ã®ã‚µãƒ¼ãƒãƒ¼ãƒ­ã‚°ã‚’Slackã§å…±æœ‰ã—ã¾ã™ï¼š

```bash
# VoiceDriveå´ã§å®Ÿè¡Œ
NODE_ENV=test PORT=4000 npx tsx src/api/server.integration-test.ts 2>&1 | tee integration-test.log
```

---

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼šè·å“¡ã‚«ãƒ«ãƒ†å´ã§å®Ÿæ–½ã„ãŸã ãã“ã¨

### 1. ç’°å¢ƒå¤‰æ•°ä¿®æ­£ â­ æœ€å„ªå…ˆ

- [ ] `.env.voicedrive.test` ã‚’é–‹ã
- [ ] `VOICEDRIVE_ANALYTICS_API_URL` ã‚’ `http://localhost:4000` ã«å¤‰æ›´
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜

### 2. VoiceDriveã‚µãƒ¼ãƒãƒ¼èµ·å‹•ç¢ºèª

- [ ] `curl http://localhost:4000/health` ã‚’å®Ÿè¡Œ
- [ ] `{"status":"healthy"}` ãŒè¿”å´ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] 404ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆã€VoiceDriveå´ã«ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã‚’ä¾é ¼

### 3. çµ±åˆãƒ†ã‚¹ãƒˆå†å®Ÿè¡Œ

- [ ] `npm run test:voicedrive-analytics` ã‚’å®Ÿè¡Œ
- [ ] Test 3ï¼ˆãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼‰ãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª

### 4. çµæœå…±æœ‰

- [ ] ãƒ†ã‚¹ãƒˆçµæœã‚’Slackï¼ˆ#voicedrive-analytics-integrationï¼‰ã§å…±æœ‰
- [ ] æˆåŠŸæ™‚ï¼šPhase 2ã¸é€²è¡Œ
- [ ] å¤±æ•—æ™‚ï¼šã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’VoiceDriveå´ã¨å…±æœ‰

---

## ğŸ“ å•ã„åˆã‚ã›å…ˆ

### VoiceDriveé–‹ç™ºãƒãƒ¼ãƒ 

**Slack**: `#voicedrive-analytics-integration`ï¼ˆæ¨å¥¨ï¼‰
**Email**: voicedrive-dev@example.com

**å¾…æ©Ÿæ™‚é–“**: 10æœˆ9æ—¥ 15:00-17:00ï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½æ™‚é–“ï¼‰

### ç·Šæ€¥é€£çµ¡å…ˆ

çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½ä¸­ã«å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã€Slackã§å³åº§ã«ã”é€£çµ¡ãã ã•ã„ã€‚VoiceDriveå´ã§è¿…é€Ÿã«å¯¾å¿œã—ã¾ã™ã€‚

---

## ğŸ“ å‚è€ƒè³‡æ–™

### VoiceDriveå´ã®å®Ÿè£…ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. **çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½å ±å‘Šæ›¸**
   - `mcp-shared/docs/Integration_Test_Execution_Report_20251009.md`
   - Phase 1-4ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è©³ç´°

2. **å®Ÿè£…å›ç­”æ›¸**
   - `mcp-shared/docs/Voice_Analytics_Implementation_Response_20251007.md`
   - Method Bï¼ˆAggregation APIï¼‰æ¡ç”¨ã®çµŒç·¯

3. **å—å…¥ç¢ºèªæ›¸**
   - `mcp-shared/docs/Voice_Analytics_VoiceDrive_Acceptance_20251007.md`
   - è·å“¡ã‚«ãƒ«ãƒ†ææ¡ˆã®å—å…¥ã‚Œå†…å®¹

### VoiceDriveå´ã®å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

- `src/api/routes/analytics.routes.ts` - Analytics APIãƒ«ãƒ¼ãƒˆ
- `src/api/middleware/ipWhitelist.ts` - IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ
- `src/api/middleware/auditLogger.ts` - ç›£æŸ»ãƒ­ã‚°ãƒ»ç•°å¸¸æ¤œçŸ¥
- `src/api/server.integration-test.ts` - çµ±åˆãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼
- `tests/integration/analytics-api.test.ts` - çµ±åˆãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- `.env.integration-test` - çµ±åˆãƒ†ã‚¹ãƒˆç”¨ç’°å¢ƒå¤‰æ•°

---

## âœ… çµè«–

**VoiceDriveå´ã®å®Ÿè£…ã¯å®Œäº†ã—ã¦ãŠã‚Šã€Analytics APIã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚**

è·å“¡ã‚«ãƒ«ãƒ†å´ã§æ¥ç¶šå…ˆãƒãƒ¼ãƒˆã‚’`4000`ã«å¤‰æ›´ã„ãŸã ã‘ã‚Œã°ã€çµ±åˆãƒ†ã‚¹ãƒˆã‚’å³åº§ã«å†é–‹ã§ãã¾ã™ã€‚

VoiceDriveé–‹ç™ºãƒãƒ¼ãƒ ã¯çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½æ™‚é–“ä¸­ã€Slackã§å¾…æ©Ÿã—ã¦ãŠã‚Šã¾ã™ã®ã§ã€ã„ã¤ã§ã‚‚ãŠæ°—è»½ã«ã”é€£çµ¡ãã ã•ã„ã€‚

---

**VoiceDriveé–‹ç™ºãƒãƒ¼ãƒ **
**2025å¹´10æœˆ9æ—¥ 14:30**
