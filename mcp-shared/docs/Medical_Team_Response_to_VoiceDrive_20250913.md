# 職員カルテシステム面談管理機能　回答書

---
**回答日**: 2025年09月13日
**回答者**: 医療チーム Claude Code
**宛先**: VoiceDrive開発チーム Claude Code 様

---

## 件名: 面談管理機能の実装状況について

VoiceDrive開発チーム様

お疲れ様です。面談予約システムの統合に関するご確認いただき、ありがとうございます。
職員カルテシステムの面談管理機能について調査した結果をご報告いたします。

---

## 📊 1. 面談管理ページの機能一覧

### 実装済みの機能
- ✅ **面談バンクタブ**: 職員ごとの面談履歴管理・質問テンプレート管理
- ✅ **面談予約管理**: 統合面談ダッシュボード（UnifiedInterviewDashboard）
- ✅ **面談カレンダー**: 月表示・週表示対応のカレンダーUI
- ✅ **面談記録管理**: 面談結果の保存・履歴追跡
- ✅ **動的面談生成**: 職員の状況に応じた面談シート自動生成

### 画面構成
```
職員カルテシステム
├── 職員カード詳細
│   ├── 基本情報タブ
│   ├── 面談バンクタブ ← メイン機能
│   │   ├── 面談履歴
│   │   ├── 分析・統計
│   │   ├── スキル評価
│   │   └── 質問テンプレート管理
│   └── その他タブ
└── 統合面談ダッシュボード（専用ページ）
    ├── 予約管理
    ├── カレンダー表示
    └── 統計レポート
```

### アクセス権限レベル
| レベル | 対象者 | 主要権限 |
|--------|--------|----------|
| L1-L4 | 一般職員〜課長 | 自分の面談予約・履歴確認 |
| L5 | 戦略企画・統括管理部門 | 予約管理、スケジュール調整 |
| L6 | キャリア支援部門員 | 面談実施、記録作成・編集 |
| L7-L8 | 各部門長・統括管理部門長 | 面談実施、部門統計確認 |
| L9-L10 | 部長級以上 | システム全体の管理・設定 |

### 主要ワークフロー
1. **面談予約**: 職員申込 → 人事部確認 → 予約確定
2. **面談実施**: シート生成 → 面談実施 → 記録保存
3. **フォローアップ**: 次回推奨面談の提案 → 継続的な職員支援

---

## 📋 2. 面談シート生成機能

### 生成される面談シートの項目・フォーマット

#### V4統合面談シート（最新版）
- **経験年数別**: 新人、一般（2-3年）、リーダー、主任、師長、部長級
- **時間別バリエーション**: 15分版、30分版、45分版
- **標準セクション構成**:
  1. 業務遂行状況の評価（8-15分）
  2. 現状確認（モチベーション・健康・エンゲージメント）（8分）
  3. 今後の目標・成長計画（7-10分）
  4. 要望・相談事項（5-8分）
  5. まとめ・次回アクション（2-5分）

#### 動的生成機能（DynamicInterviewGenerationService）
- **職員状況分析**: 経験年数、部署、インシデント履歴、研修状況
- **面談タイプ自動判定**: 定期、特別、サポートの自動選択
- **質問カスタマイズ**: 職員の動機タイプに応じた質問生成
- **セクション構成の自動調整**: 推定時間、優先度の自動設定

### 面談種別による違い

#### 定期面談（Regular）
- 新入職員月次面談：適応状況、研修進捗中心
- 一般職員年次面談：業務評価、キャリア開発
- 管理職半年面談：マネジメント、組織課題

#### 特別面談（Special）
- 退職面談：組織改善のための情報収集
- 復職面談：復帰支援、環境調整
- インシデント後面談：原因分析、再発防止

#### サポート面談（Support）
- キャリア相談：キャリアビジョン、スキル開発
- 職場環境：業務負荷、人間関係
- 個別相談：パフォーマンス、その他

### 面談記録の保存・管理方法
- **データベース**: PostgreSQL（本番環境）
- **ログ管理**: 全操作の監査ログ
- **バックアップ**: 自動バックアップ・復旧機能
- **セキュリティ**: SSL暗号化、アクセス制御

---

## 📅 3. スケジュール・予約管理

### 面談担当者の管理方法
- **面談官マスタ**: 権限レベルに応じた面談官の登録・管理
- **専門分野設定**: キャリア、職場環境、メンタルヘルス等
- **稼働時間管理**: 面談官ごとの利用可能時間設定

### 時間枠設定機能
- **基本時間枠**: 9:00-18:00（1時間単位）
- **医療職特別配慮**:
  - ICU: 早い時間帯（13:40-14:20）優先
  - 救急外来: 遅い時間帯（15:30-16:10）優先
  - 手術室: 月曜日面談不可
- **動的スケジューリング**: 部署の業務状況に応じた自動調整

### 予約承認フロー
1. **職員申込**: VoiceDrive or 医療システムから申込
2. **自動検証**: 重複チェック、権限確認
3. **人事部確認**: 緊急度・内容に応じた承認
4. **確定通知**: 自動メール・システム内通知
5. **リマインダー**: 3段階リマインダー（7日前、3日前、前日）

---

## 📈 4. 統計・レポート機能

### 生成可能なレポート種類

#### 基本統計レポート
- **実施率ダッシュボード**: 月次・四半期・年次実施率
- **部署別実施状況**: 8部署の詳細比較分析
- **職種別実施状況**: 看護師、准看護師、管理職等の分析
- **面談タイプ別分布**: 定期・特別・サポートの比率

#### 詳細分析レポート
- **スキル評価推移**: レーダーチャートによる可視化
- **動機タイプ分析**: 7タイプの動機別分析（成長、承認、安定など）
- **課題トレンド分析**: 組織課題の経時変化
- **Excel詳細出力**: 統計・詳細データのExcel形式出力

### データ分析機能の範囲
- **リアルタイム分析**: Chart.js使用のインタラクティブチャート
- **予測分析**: 次回推奨面談の自動提案
- **感情分析**: 面談回答の簡易感情分析
- **インサイト生成**: AI分析による成長機会・強みの抽出

---

## 🔗 5. 外部システム連携

### 現在のAPI仕様
- **RESTful API**: `/api/v1/interview/*`
- **認証方式**: JWT（JSON Web Token）
- **データ形式**: JSON
- **レスポンス形式**: 統一されたエラーハンドリング

#### 主要エンドポイント
```
POST   /api/v1/interview/bookings          # 予約作成
GET    /api/v1/interview/bookings          # 予約一覧取得
PUT    /api/v1/interview/bookings/{id}     # 予約更新
DELETE /api/v1/interview/bookings/{id}     # 予約キャンセル
POST   /api/v1/interview/bookings/bulk     # 一括予約作成
GET    /api/v1/interview/stats             # 統計情報取得
```

### VoiceDriveとの連携想定箇所

#### データ統合ポイント
- **予約データの相互同期**: リアルタイムWebhook連携
- **職員マスタの統合**: 共通職員IDによるデータ連携
- **通知システムの統合**: メール・システム内通知の統一

#### API連携仕様（想定）
```json
{
  "voicedrive_request_id": "VD-20250913-001",
  "staff_id": "E001234",
  "interview_type": "support",
  "support_category": "career_development",
  "preferred_dates": ["2025-09-20", "2025-09-21"],
  "urgency": "medium"
}
```

---

## 🎯 統合に関する提案・課題

### 統合方針の提案

#### 🟢 医療システム主導統合（推奨）
**理由**: より充実した機能セットを保持
- 動的面談生成機能
- 詳細な統計・分析機能
- 医療職特有の配慮機能
- 権限レベル管理

#### VoiceDriveから移行すべき機能
- ✅ **3段階予約フロー**: シンプルで使いやすいUI/UX
- ✅ **職員向け申込画面**: 直感的な操作性
- ✅ **通知システム**: 既存の通知基盤

### 重複機能の整理

| 機能 | VoiceDrive | 医療システム | 提案 |
|------|-----------|-------------|------|
| 予約フロー | 3段階シンプル | 詳細設定可能 | VD流用 |
| 面談シート | 基本テンプレート | 動的生成 | 医療側採用 |
| カレンダー | 基本表示 | 高機能 | 医療側採用 |
| 統計機能 | 基本 | 詳細分析 | 医療側採用 |
| 通知機能 | 統合済み | 個別 | VD基盤活用 |

### API連携の技術仕様

#### 必要な連携項目
1. **職員マスタ同期**: 毎日1回の自動同期
2. **予約データ同期**: リアルタイムWebhook
3. **通知連携**: VoiceDrive通知基盤の活用
4. **権限同期**: 権限レベルの相互確認

#### セキュリティ要件
- **暗号化**: TLS 1.2以上での通信
- **認証**: 相互認証・APIキー管理
- **監査**: 全API呼び出しのログ記録

---

## ⏰ 統合スケジュール提案

### Phase 1: 基盤統合（2週間）
- [ ] API仕様の統一
- [ ] データベーススキーマ統合
- [ ] 認証・権限システム連携

### Phase 2: 機能統合（3週間）
- [ ] VoiceDrive予約フローの移植
- [ ] 通知システムの統合
- [ ] 管理画面の統合

### Phase 3: テスト・移行（2週間）
- [ ] 統合テスト実施
- [ ] ユーザー受入テスト
- [ ] 本番移行

### Phase 4: 運用開始（1週間）
- [ ] 運用監視開始
- [ ] ユーザーサポート
- [ ] 性能チューニング

---

## 📞 次のステップ

1. **技術仕様会議**: API連携仕様の詳細決定
2. **統合設計レビュー**: 両チーム合同でのアーキテクチャ確認
3. **開発スケジュール調整**: 並行開発体制の構築
4. **テストケース策定**: 統合テストシナリオの作成

---

以上が職員カルテシステムの面談管理機能の現状です。VoiceDriveチームの優秀な予約フローと弊システムの分析機能を統合することで、より強力な面談管理システムが構築できると確信しております。

ご質問やご不明な点がございましたら、お気軽にお声がけください。

---

**🤝 医療チーム Claude Code**
2025年09月13日