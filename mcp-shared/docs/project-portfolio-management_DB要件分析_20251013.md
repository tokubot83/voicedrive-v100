# Project Portfolio Managementãƒšãƒ¼ã‚¸ DBè¦ä»¶åˆ†æ

**æ–‡æ›¸ç•ªå·**: DB-REQ-2025-1013-003
**ä½œæˆæ—¥**: 2025å¹´10æœˆ13æ—¥
**å¯¾è±¡ãƒšãƒ¼ã‚¸**: https://voicedrive-v100.vercel.app/project-portfolio-management
**å‚ç…§æ–‡æ›¸**:
- [PersonalStation_DBè¦ä»¶åˆ†æ_20251008.md](./PersonalStation_DBè¦ä»¶åˆ†æ_20251008.md)
- [project-org-development_DBè¦ä»¶åˆ†æ_20251013.md](./project-org-development_DBè¦ä»¶åˆ†æ_20251013.md)
- [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md](./ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md)
- C:\projects\voicedrive-v100\src\pages\ProjectPortfolioManagementPage.tsx

---

## ğŸ“‹ åˆ†æã‚µãƒãƒªãƒ¼

### çµè«–
Project Portfolio Managementãƒšãƒ¼ã‚¸ã¯**Level 18ï¼ˆç†äº‹ä¼šï¼‰å‘ã‘ã®æˆ¦ç•¥çš„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†æ©Ÿèƒ½**ã§ã€**å®Œå…¨ã«ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã§æ§‹æˆ**ã•ã‚Œã¦ã„ã¾ã™ã€‚å®Ÿãƒ‡ãƒ¼ã‚¿é€£æºã®ãŸã‚ã«ã¯**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ‡ãƒ¼ã‚¿ã®è¿½åŠ ã¨é›†è¨ˆæ©Ÿèƒ½ã®å®Ÿè£…**ãŒå¿…è¦ã§ã™ã€‚

### ğŸ”´ é‡å¤§ãªä¸è¶³é …ç›®ï¼ˆå³å¯¾å¿œå¿…è¦ï¼‰

1. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ä¸è¶³**
   - æŠ•è³‡é¡ã€æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ã€ROIï¼ˆ17-29è¡Œç›®ï¼‰
   - ç¾åœ¨å®Œå…¨ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ï¼ˆ38-142è¡Œç›®ï¼‰

2. **æˆ¦ç•¥çš„è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«ä¸è¶³**
   - æˆ¦ç•¥çš„å½±éŸ¿åº¦ã€ç·Šæ€¥åº¦ã€æˆ¦ç•¥æ•´åˆæ€§ã‚¹ã‚³ã‚¢
   - ç¾åœ¨å®Œå…¨ã«ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰

3. **ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ãƒ†ãƒ¼ãƒ–ãƒ«ä¸è¶³**
   - äººæ—¥æ•°ã€ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ç‡
   - ProjectTeamMemberã¯å­˜åœ¨ã™ã‚‹ãŒã€ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆãƒ†ãƒ¼ãƒ–ãƒ«ãŒä¸è¶³

4. **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ä¸è¶³**
   - DXæ¨é€²ã€åƒãæ–¹æ”¹é©ã€åŒ»ç™‚é€£æºãªã©ï¼ˆ596-611è¡Œç›®ï¼‰
   - ç¾åœ¨ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰

5. **å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ä¸è¶³**
   - å½±éŸ¿åº¦Ã—ç·Šæ€¥åº¦ã®ãƒãƒˆãƒªã‚¯ã‚¹ï¼ˆ164-169è¡Œç›®ã€228-286è¡Œç›®ï¼‰
   - ç¾åœ¨é™çš„ãƒ‡ãƒ¼ã‚¿

### ğŸ¯ ãƒšãƒ¼ã‚¸ã®ç›®çš„ã¨è¡¨ç¤ºå†…å®¹

**ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™**: Level 18ï¼ˆç†äº‹ä¼šï¼‰

**ãƒšãƒ¼ã‚¸æ¦‚è¦**:
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªç®¡ç†ãƒšãƒ¼ã‚¸ - å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆ¦ç•¥çš„ç®¡ç†ã¨æ„æ€æ±ºå®šæ”¯æ´

**4ã¤ã®ã‚¿ãƒ–æ§‹æˆ**:

#### 1. å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã‚¿ãƒ–ï¼ˆmatrixï¼‰
- **ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰**ï¼ˆ181-225è¡Œç›®ï¼‰:
  - ç·ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°: 8ä»¶
  - æœ€å„ªå…ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: 2ä»¶ï¼ˆå½±éŸ¿åº¦ãƒ»ç·Šæ€¥åº¦ãŒé«˜ï¼‰
  - ç·æŠ•è³‡é¡: 1.583å„„å††
  - å¹³å‡ROI: 176%

- **æˆ¦ç•¥çš„å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹**ï¼ˆ228-286è¡Œç›®ï¼‰:
  - å½±éŸ¿åº¦ï¼ˆ1-5ï¼‰Ã— ç·Šæ€¥åº¦ï¼ˆ1-5ï¼‰ã®æ•£å¸ƒå›³
  - 4è±¡é™ï¼ˆæœ€å„ªå…ˆã€é‡è¦ã€ç·Šæ€¥ã€é€šå¸¸ï¼‰
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒƒãƒˆè¡¨ç¤º

- **å„ªå…ˆåº¦åˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§**ï¼ˆ289-322è¡Œç›®ï¼‰:
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ã‚«ãƒ†ã‚´ãƒªãƒ¼
  - å½±éŸ¿åº¦ã€ç·Šæ€¥åº¦ã‚¹ã‚³ã‚¢
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆè¨ˆç”»ä¸­ã€é€²è¡Œä¸­ã€å®Œäº†ã€ä¸­æ–­ï¼‰

#### 2. ROIåˆ†æã‚¿ãƒ–ï¼ˆroiï¼‰
- **ROIã‚µãƒãƒªãƒ¼**ï¼ˆ329-342è¡Œç›®ï¼‰:
  - ç·æŠ•è³‡é¡: 1.58å„„å††
  - æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³: 3.07å„„å††
  - ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªROI: 94.1%

- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¥ROI**ï¼ˆ345-387è¡Œç›®ï¼‰:
  - æŠ•è³‡é¡ã€æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ã€ROIï¼ˆ%ï¼‰
  - ROIé™é †ã‚½ãƒ¼ãƒˆ

- **ROIåˆ†å¸ƒ**ï¼ˆ390-413è¡Œç›®ï¼‰:
  - 300%ä»¥ä¸Š: 1ä»¶
  - 200-299%: 3ä»¶
  - 100-199%: 2ä»¶
  - 50-99%: 2ä»¶
  - 50%æœªæº€: 0ä»¶

#### 3. ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–ï¼ˆresourcesï¼‰
- **ãƒªã‚½ãƒ¼ã‚¹ã‚µãƒãƒªãƒ¼**ï¼ˆ420-436è¡Œç›®ï¼‰:
  - ç·ãƒªã‚½ãƒ¼ã‚¹é…åˆ†: 1200äººæ—¥
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¹³å‡: 150äººæ—¥/PJ
  - æœ€å¤§ãƒªã‚½ãƒ¼ã‚¹PJ: 450äººæ—¥

- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¥ãƒªã‚½ãƒ¼ã‚¹é…åˆ†**ï¼ˆ439-467è¡Œç›®ï¼‰:
  - ãƒªã‚½ãƒ¼ã‚¹é…åˆ†é‡ï¼ˆäººæ—¥ï¼‰
  - å…¨ä½“æ¯”ç‡ï¼ˆ%ï¼‰

- **æœ€é©åŒ–ææ¡ˆ**ï¼ˆ470-482è¡Œç›®ï¼‰:
  - ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ææ¡ˆï¼ˆAIç”Ÿæˆæƒ³å®šï¼‰

#### 4. æˆ¦ç•¥æ•´åˆæ€§ã‚¿ãƒ–ï¼ˆstrategic_alignmentï¼‰
- **æ•´åˆæ€§ã‚µãƒãƒªãƒ¼**ï¼ˆ489-511è¡Œç›®ï¼‰:
  - å¹³å‡æ•´åˆæ€§ã‚¹ã‚³ã‚¢: 85ç‚¹
  - é«˜æ•´åˆæ€§PJï¼ˆ80ç‚¹ä»¥ä¸Šï¼‰: 6ä»¶
  - è¦å†è©•ä¾¡PJï¼ˆ70ç‚¹æœªæº€ï¼‰: 1ä»¶

- **çµŒå–¶æˆ¦ç•¥ã¨ã®æ•´åˆæ€§è©•ä¾¡**ï¼ˆ514-556è¡Œç›®ï¼‰:
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ã‚«ãƒ†ã‚´ãƒªãƒ¼
  - æˆ¦ç•¥æ•´åˆæ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
  - æ•´åˆæ€§ã‚¹ã‚³ã‚¢é™é †ã‚½ãƒ¼ãƒˆ

- **æˆ¦ç•¥çš„æè¨€**ï¼ˆ559-571è¡Œç›®ï¼‰:
  - ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®è©•ä¾¡ãƒ»æè¨€

---

## ğŸ” è©³ç´°åˆ†æ

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ‡ãƒ¼ã‚¿ï¼ˆ17-29è¡Œç›®ã€38-142è¡Œç›®ï¼‰

#### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```typescript
interface Project {
  id: string;
  name: string;
  status: 'planning' | 'in_progress' | 'completed' | 'suspended';
  strategicImpact: number;    // 1-5
  urgency: number;            // 1-5
  investment: number;         // ä¸‡å††
  expectedReturn: number;     // ä¸‡å††
  roi: number;                // %
  resourceAllocation: number; // äººæ—¥
  strategicAlignment: number; // 0-100
  category: string;
}
```

#### å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

| ãƒ‡ãƒ¼ã‚¿é …ç›® | VoiceDrive | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»» | æä¾›æ–¹æ³• | çŠ¶æ…‹ |
|-----------|-----------|-------------|--------------|---------|------|
| `id` | âœ… Post.id | âŒ | VoiceDrive | æ—¢å­˜ | âœ… OK |
| `name` | âœ… Post.title | âŒ | VoiceDrive | æ—¢å­˜ | âœ… OK |
| `status` | âœ… Post.approvalStatus | âŒ | VoiceDrive | æ—¢å­˜ | âœ… OK |
| `strategicImpact` | âŒ **æ–°è¦** | âŒ | VoiceDrive | æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« | ğŸ”´ **è¦è¿½åŠ ** |
| `urgency` | âŒ **æ–°è¦** | âŒ | VoiceDrive | æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« | ğŸ”´ **è¦è¿½åŠ ** |
| `investment` | âŒ **æ–°è¦** | âŒ | VoiceDrive | æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« | ğŸ”´ **è¦è¿½åŠ ** |
| `expectedReturn` | âŒ **æ–°è¦** | âŒ | VoiceDrive | æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« | ğŸ”´ **è¦è¿½åŠ ** |
| `roi` | âŒ **è¨ˆç®—** | âŒ | VoiceDrive | è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ | ğŸ”´ **è¦å®Ÿè£…** |
| `resourceAllocation` | âš ï¸ **é›†è¨ˆ** | âŒ | VoiceDrive | é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ | ğŸ”´ **è¦å®Ÿè£…** |
| `strategicAlignment` | âŒ **æ–°è¦** | âŒ | VoiceDrive | æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ« | ğŸ”´ **è¦è¿½åŠ ** |
| `category` | âš ï¸ Postæ‹¡å¼µ | âŒ | VoiceDrive | DBæ‹¡å¼µ | ğŸ”´ **è¦è¿½åŠ ** |

#### è§£æ±ºç­–1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ»æˆ¦ç•¥ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«: `ProjectFinancial`**
```prisma
// VoiceDrive: prisma/schema.prisma
model ProjectFinancial {
  id                    String    @id @default(cuid())
  projectId             String    @unique @map("project_id")

  // è²¡å‹™ãƒ‡ãƒ¼ã‚¿
  investmentAmount      Int       @default(0) @map("investment_amount")  // æŠ•è³‡é¡ï¼ˆä¸‡å††ï¼‰
  expectedReturn        Int       @default(0) @map("expected_return")    // æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ï¼ˆä¸‡å††ï¼‰
  roi                   Float     @default(0) @map("roi")                // ROIï¼ˆ%ï¼‰
  actualCost            Int?      @map("actual_cost")                    // å®Ÿã‚³ã‚¹ãƒˆï¼ˆä¸‡å††ï¼‰
  actualReturn          Int?      @map("actual_return")                  // å®Ÿãƒªã‚¿ãƒ¼ãƒ³ï¼ˆä¸‡å††ï¼‰

  // äºˆç®—ç®¡ç†
  budgetYear            Int       @map("budget_year")                    // äºˆç®—å¹´åº¦
  budgetDepartment      String?   @map("budget_department")              // äºˆç®—éƒ¨ç½²
  approvedBudget        Int?      @map("approved_budget")                // æ‰¿èªæ¸ˆã¿äºˆç®—

  // è²¡å‹™æ‰¿èª
  financialApprovalStatus String?  @map("financial_approval_status")     // pending, approved, rejected
  financialApprovedBy     String?  @map("financial_approved_by")
  financialApprovedAt     DateTime? @map("financial_approved_at")

  // ROIè¨ˆç®—æ—¥æ™‚
  calculatedAt          DateTime  @default(now()) @map("calculated_at")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  project               Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([budgetYear])
  @@index([roi])
  @@index([investmentAmount])
  @@map("project_financial")
}
```

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«: `ProjectStrategicEvaluation`**
```prisma
model ProjectStrategicEvaluation {
  id                    String    @id @default(cuid())
  projectId             String    @unique @map("project_id")

  // æˆ¦ç•¥çš„è©•ä¾¡
  strategicImpact       Int       @default(3) @map("strategic_impact")     // 1-5
  urgency               Int       @default(3) @map("urgency")               // 1-5
  strategicAlignment    Int       @default(50) @map("strategic_alignment")  // 0-100

  // å„ªå…ˆåº¦è¨ˆç®—
  priorityQuadrant      String?   @map("priority_quadrant")
  // "high_priority" (æœ€å„ªå…ˆ), "important" (é‡è¦), "urgent" (ç·Šæ€¥), "normal" (é€šå¸¸)

  // è©•ä¾¡æ ¹æ‹ 
  impactReason          String?   @map("impact_reason")     @db.Text
  urgencyReason         String?   @map("urgency_reason")    @db.Text
  alignmentReason       String?   @map("alignment_reason")  @db.Text

  // è©•ä¾¡è€…ãƒ»æ—¥æ™‚
  evaluatedBy           String?   @map("evaluated_by")
  evaluatedAt           DateTime? @map("evaluated_at")
  lastReviewedAt        DateTime? @map("last_reviewed_at")

  // æ›´æ–°æ—¥æ™‚
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  project               Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([strategicImpact])
  @@index([urgency])
  @@index([strategicAlignment])
  @@index([priorityQuadrant])
  @@map("project_strategic_evaluation")
}
```

**Postãƒ¢ãƒ‡ãƒ«ã«è¿½åŠ **:
```prisma
model Post {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒª
  projectCategory       String?   @map("project_category")
  // DXæ¨é€²ã€åƒãæ–¹æ”¹é©ã€åŒ»ç™‚é€£æºã€äººæè‚²æˆã€æ‚£è€…ã‚µãƒ¼ãƒ“ã‚¹ã€è¨­å‚™æŠ•è³‡ã€æ¥­å‹™åŠ¹ç‡åŒ–ã€åŒ»ç™‚å®‰å…¨

  // ğŸ†• Relations
  financial             ProjectFinancial?
  strategicEvaluation   ProjectStrategicEvaluation?
}
```

**ROIè¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯**:
```typescript
// src/services/ProjectFinancialService.ts
export async function calculateProjectROI(projectId: string): Promise<number> {
  const financial = await prisma.projectFinancial.findUnique({
    where: { projectId }
  });

  if (!financial || financial.investmentAmount === 0) return 0;

  // ROI = ((æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ - æŠ•è³‡é¡) / æŠ•è³‡é¡) * 100
  const roi = ((financial.expectedReturn - financial.investmentAmount) / financial.investmentAmount) * 100;

  // ROIã‚’æ›´æ–°
  await prisma.projectFinancial.update({
    where: { projectId },
    data: { roi, calculatedAt: new Date() }
  });

  return roi;
}

export async function calculatePortfolioROI(): Promise<number> {
  const allFinancials = await prisma.projectFinancial.findMany();

  const totalInvestment = allFinancials.reduce((sum, f) => sum + f.investmentAmount, 0);
  const totalReturn = allFinancials.reduce((sum, f) => sum + f.expectedReturn, 0);

  if (totalInvestment === 0) return 0;

  return ((totalReturn - totalInvestment) / totalInvestment) * 100;
}
```

**å„ªå…ˆåº¦è±¡é™è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯**:
```typescript
// src/services/StrategicEvaluationService.ts
export function calculatePriorityQuadrant(
  impact: number,
  urgency: number
): 'high_priority' | 'important' | 'urgent' | 'normal' {
  if (impact >= 4 && urgency >= 4) return 'high_priority';  // æœ€å„ªå…ˆ
  if (impact >= 4 && urgency < 4) return 'important';       // é‡è¦
  if (impact < 4 && urgency >= 4) return 'urgent';          // ç·Šæ€¥
  return 'normal';                                           // é€šå¸¸
}

export async function updateProjectPriority(projectId: string) {
  const evaluation = await prisma.projectStrategicEvaluation.findUnique({
    where: { projectId }
  });

  if (!evaluation) return;

  const quadrant = calculatePriorityQuadrant(
    evaluation.strategicImpact,
    evaluation.urgency
  );

  await prisma.projectStrategicEvaluation.update({
    where: { projectId },
    data: { priorityQuadrant: quadrant }
  });
}
```

---

### 2. ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ãƒ‡ãƒ¼ã‚¿ï¼ˆ417-483è¡Œç›®ï¼‰

#### è¡¨ç¤ºå†…å®¹
```typescript
const totalResourceAllocation = projects.reduce((sum, p) => sum + p.resourceAllocation, 0);
// ç·ãƒªã‚½ãƒ¼ã‚¹é…åˆ†: 1200äººæ—¥
// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¹³å‡: 150äººæ—¥
// æœ€å¤§ãƒªã‚½ãƒ¼ã‚¹PJ: 450äººæ—¥
```

#### å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

| ãƒ‡ãƒ¼ã‚¿é …ç›® | VoiceDrive | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  | ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»» | æä¾›æ–¹æ³• | çŠ¶æ…‹ |
|-----------|-----------|-------------|--------------|---------|------|
| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼æ•° | âœ… ProjectTeamMember | âŒ | VoiceDrive | æ—¢å­˜ | âœ… OK |
| äººæ—¥é›†è¨ˆ | âŒ é›†è¨ˆå¿…è¦ | âŒ | VoiceDrive | é›†è¨ˆãƒ†ãƒ¼ãƒ–ãƒ« | ğŸ”´ **è¦è¿½åŠ ** |
| ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ç‡ | âŒ è¨ˆç®—å¿…è¦ | âŒ | VoiceDrive | è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ | ğŸ”´ **è¦å®Ÿè£…** |

#### è§£æ±ºç­–2: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«: `ProjectResourceSummary`**
```prisma
model ProjectResourceSummary {
  id                    String    @id @default(cuid())
  projectId             String    @unique @map("project_id")

  // ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆ
  totalMembers          Int       @default(0) @map("total_members")
  estimatedPersonDays   Int       @default(0) @map("estimated_person_days")  // è¦‹ç©äººæ—¥
  actualPersonDays      Int?      @map("actual_person_days")                // å®Ÿç¸¾äººæ—¥
  resourceAllocationRate Float    @default(0) @map("resource_allocation_rate") // é…åˆ†ç‡ï¼ˆ%ï¼‰

  // è·ç¨®åˆ¥ãƒªã‚½ãƒ¼ã‚¹
  nursesCount           Int       @default(0) @map("nurses_count")
  doctorsCount          Int       @default(0) @map("doctors_count")
  adminCount            Int       @default(0) @map("admin_count")
  othersCount           Int       @default(0) @map("others_count")

  // ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡
  resourceEfficiency    Float?    @map("resource_efficiency")  // åŠ¹ç‡æ€§æŒ‡æ¨™

  // è¨ˆç®—æ—¥æ™‚
  calculatedAt          DateTime  @default(now()) @map("calculated_at")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  project               Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([estimatedPersonDays])
  @@index([resourceAllocationRate])
  @@map("project_resource_summary")
}
```

**é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯**:
```typescript
// src/services/ProjectResourceService.ts
export async function calculateProjectResourceSummary(projectId: string) {
  // ãƒ¡ãƒ³ãƒãƒ¼æ•°å–å¾—
  const members = await prisma.projectTeamMember.findMany({
    where: { projectId },
    include: { user: true }
  });

  const totalMembers = members.length;

  // è·ç¨®åˆ¥é›†è¨ˆ
  const professionCounts = members.reduce((acc, member) => {
    const prof = member.user.professionCategory || 'others';
    acc[prof] = (acc[prof] || 0) + 1;
    return acc;
  }, {} as Record<string, number>);

  // è¦‹ç©äººæ—¥ï¼ˆä»®å®šï¼šãƒ¡ãƒ³ãƒãƒ¼æ•° Ã— å¹³å‡ç¨¼åƒæ—¥æ•°ï¼‰
  // å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæœŸé–“ã‚„ãƒ¡ãƒ³ãƒãƒ¼ã®ç¨¼åƒç‡ã‹ã‚‰è¨ˆç®—
  const project = await prisma.post.findUnique({ where: { id: projectId } });
  const estimatedPersonDays = totalMembers * 30; // æš«å®š: 1ãƒ¡ãƒ³ãƒãƒ¼ã‚ãŸã‚Š30äººæ—¥

  // å…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚½ãƒ¼ã‚¹åˆè¨ˆ
  const allSummaries = await prisma.projectResourceSummary.findMany();
  const totalResourceAllocation = allSummaries.reduce((sum, s) => sum + s.estimatedPersonDays, 0);
  const resourceAllocationRate = totalResourceAllocation > 0
    ? (estimatedPersonDays / totalResourceAllocation) * 100
    : 0;

  await prisma.projectResourceSummary.upsert({
    where: { projectId },
    create: {
      projectId,
      totalMembers,
      estimatedPersonDays,
      resourceAllocationRate,
      nursesCount: professionCounts['nurse'] || 0,
      doctorsCount: professionCounts['doctor'] || 0,
      adminCount: professionCounts['admin'] || 0,
      othersCount: totalMembers - (professionCounts['nurse'] || 0) - (professionCounts['doctor'] || 0) - (professionCounts['admin'] || 0),
      calculatedAt: new Date()
    },
    update: {
      totalMembers,
      estimatedPersonDays,
      resourceAllocationRate,
      nursesCount: professionCounts['nurse'] || 0,
      doctorsCount: professionCounts['doctor'] || 0,
      adminCount: professionCounts['admin'] || 0,
      othersCount: totalMembers - (professionCounts['nurse'] || 0) - (professionCounts['doctor'] || 0) - (professionCounts['admin'] || 0),
      calculatedAt: new Date()
    }
  });
}
```

---

### 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ï¼ˆ596-611è¡Œç›®ï¼‰

#### ç¾åœ¨ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
```typescript
<select>
  <option value="all">å…¨ã‚«ãƒ†ã‚´ãƒªãƒ¼</option>
  <option value="DXæ¨é€²">DXæ¨é€²</option>
  <option value="åƒãæ–¹æ”¹é©">åƒãæ–¹æ”¹é©</option>
  <option value="åŒ»ç™‚é€£æº">åŒ»ç™‚é€£æº</option>
  <option value="äººæè‚²æˆ">äººæè‚²æˆ</option>
  <option value="æ‚£è€…ã‚µãƒ¼ãƒ“ã‚¹">æ‚£è€…ã‚µãƒ¼ãƒ“ã‚¹</option>
  <option value="è¨­å‚™æŠ•è³‡">è¨­å‚™æŠ•è³‡</option>
  <option value="æ¥­å‹™åŠ¹ç‡åŒ–">æ¥­å‹™åŠ¹ç‡åŒ–</option>
  <option value="åŒ»ç™‚å®‰å…¨">åŒ»ç™‚å®‰å…¨</option>
</select>
```

#### è§£æ±ºç­–3: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«: `ProjectCategory`**
```prisma
model ProjectCategory {
  id                    String    @id @default(cuid())
  categoryCode          String    @unique @map("category_code")
  categoryName          String    @map("category_name")
  categoryNameEn        String?   @map("category_name_en")
  description           String?   @db.Text
  color                 String?   @map("color")  // è¡¨ç¤ºç”¨ã‚«ãƒ©ãƒ¼
  icon                  String?   @map("icon")   // ã‚¢ã‚¤ã‚³ãƒ³å
  sortOrder             Int       @default(0) @map("sort_order")
  isActive              Boolean   @default(true) @map("is_active")

  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  @@index([sortOrder])
  @@index([isActive])
  @@map("project_categories")
}
```

**åˆæœŸãƒ‡ãƒ¼ã‚¿æŒ¿å…¥**:
```typescript
// prisma/seed.ts
const categories = [
  { categoryCode: 'dx', categoryName: 'DXæ¨é€²', color: '#3b82f6', sortOrder: 1 },
  { categoryCode: 'workstyle', categoryName: 'åƒãæ–¹æ”¹é©', color: '#10b981', sortOrder: 2 },
  { categoryCode: 'collaboration', categoryName: 'åŒ»ç™‚é€£æº', color: '#8b5cf6', sortOrder: 3 },
  { categoryCode: 'training', categoryName: 'äººæè‚²æˆ', color: '#f59e0b', sortOrder: 4 },
  { categoryCode: 'service', categoryName: 'æ‚£è€…ã‚µãƒ¼ãƒ“ã‚¹', color: '#ec4899', sortOrder: 5 },
  { categoryCode: 'equipment', categoryName: 'è¨­å‚™æŠ•è³‡', color: '#6366f1', sortOrder: 6 },
  { categoryCode: 'efficiency', categoryName: 'æ¥­å‹™åŠ¹ç‡åŒ–', color: '#14b8a6', sortOrder: 7 },
  { categoryCode: 'safety', categoryName: 'åŒ»ç™‚å®‰å…¨', color: '#ef4444', sortOrder: 8 }
];

for (const cat of categories) {
  await prisma.projectCategory.upsert({
    where: { categoryCode: cat.categoryCode },
    create: cat,
    update: cat
  });
}
```

---

### 4. ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªçµ±è¨ˆã‚µãƒãƒªãƒ¼ï¼ˆ171-177è¡Œç›®ã€181-225è¡Œç›®ï¼‰

#### ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰è¨ˆç®—
```typescript
const totalInvestment = projects.reduce((sum, p) => sum + p.investment, 0);
const totalExpectedReturn = projects.reduce((sum, p) => sum + p.expectedReturn, 0);
const averageROI = projects.reduce((sum, p) => sum + p.roi, 0) / projects.length;
const totalResourceAllocation = projects.reduce((sum, p) => sum + p.resourceAllocation, 0);
const highPriorityCount = projects.filter(p => p.strategicImpact >= 4 && p.urgency >= 4).length;
```

#### è§£æ±ºç­–4: ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 

**æ–°è¦ãƒ†ãƒ¼ãƒ–ãƒ«: `PortfolioSummary`**
```prisma
model PortfolioSummary {
  id                        String    @id @default(cuid())

  // é›†è¨ˆæœŸé–“
  periodType                String    @map("period_type")  // quarter, year, all
  periodStart               DateTime  @map("period_start")
  periodEnd                 DateTime  @map("period_end")

  // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµ±è¨ˆ
  totalProjects             Int       @default(0) @map("total_projects")
  activeProjects            Int       @default(0) @map("active_projects")
  completedProjects         Int       @default(0) @map("completed_projects")
  highPriorityProjects      Int       @default(0) @map("high_priority_projects")

  // è²¡å‹™çµ±è¨ˆ
  totalInvestment           Int       @default(0) @map("total_investment")         // ä¸‡å††
  totalExpectedReturn       Int       @default(0) @map("total_expected_return")    // ä¸‡å††
  portfolioROI              Float     @default(0) @map("portfolio_roi")            // %
  averageProjectROI         Float     @default(0) @map("average_project_roi")     // %

  // ãƒªã‚½ãƒ¼ã‚¹çµ±è¨ˆ
  totalResourceAllocation   Int       @default(0) @map("total_resource_allocation") // äººæ—¥
  averageResourcePerProject Int       @default(0) @map("average_resource_per_project")

  // æˆ¦ç•¥æ•´åˆæ€§çµ±è¨ˆ
  averageStrategicAlignment Float     @default(0) @map("average_strategic_alignment")
  highAlignmentProjects     Int       @default(0) @map("high_alignment_projects")  // 80ç‚¹ä»¥ä¸Š

  // è¨ˆç®—æ—¥æ™‚
  calculatedAt              DateTime  @default(now()) @map("calculated_at")
  createdAt                 DateTime  @default(now()) @map("created_at")
  updatedAt                 DateTime  @updatedAt @map("updated_at")

  @@unique([periodType, periodStart])
  @@index([periodType])
  @@index([calculatedAt])
  @@map("portfolio_summary")
}
```

**é›†è¨ˆãƒãƒƒãƒ**:
```typescript
// src/jobs/calculatePortfolioSummary.ts
export async function calculatePortfolioSummary(
  periodType: 'quarter' | 'year' | 'all',
  periodStart: Date,
  periodEnd: Date
) {
  // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå–å¾—
  const projects = await prisma.post.findMany({
    where: {
      type: 'improvement',  // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—
      createdAt: periodType === 'all' ? undefined : { gte: periodStart, lte: periodEnd }
    },
    include: {
      financial: true,
      strategicEvaluation: true,
      resourceSummary: true
    }
  });

  // çµ±è¨ˆè¨ˆç®—
  const totalProjects = projects.length;
  const activeProjects = projects.filter(p => p.approvalStatus === 'in_progress').length;
  const completedProjects = projects.filter(p => p.approvalStatus === 'completed').length;

  const highPriorityProjects = projects.filter(p =>
    p.strategicEvaluation &&
    p.strategicEvaluation.strategicImpact >= 4 &&
    p.strategicEvaluation.urgency >= 4
  ).length;

  const totalInvestment = projects.reduce((sum, p) => sum + (p.financial?.investmentAmount || 0), 0);
  const totalExpectedReturn = projects.reduce((sum, p) => sum + (p.financial?.expectedReturn || 0), 0);
  const portfolioROI = totalInvestment > 0 ? ((totalExpectedReturn - totalInvestment) / totalInvestment) * 100 : 0;
  const averageProjectROI = projects.reduce((sum, p) => sum + (p.financial?.roi || 0), 0) / totalProjects;

  const totalResourceAllocation = projects.reduce((sum, p) => sum + (p.resourceSummary?.estimatedPersonDays || 0), 0);
  const averageResourcePerProject = totalProjects > 0 ? totalResourceAllocation / totalProjects : 0;

  const averageStrategicAlignment = projects.reduce((sum, p) => sum + (p.strategicEvaluation?.strategicAlignment || 0), 0) / totalProjects;
  const highAlignmentProjects = projects.filter(p =>
    p.strategicEvaluation && p.strategicEvaluation.strategicAlignment >= 80
  ).length;

  // ä¿å­˜
  await prisma.portfolioSummary.upsert({
    where: {
      periodType_periodStart: {
        periodType,
        periodStart
      }
    },
    create: {
      periodType,
      periodStart,
      periodEnd,
      totalProjects,
      activeProjects,
      completedProjects,
      highPriorityProjects,
      totalInvestment,
      totalExpectedReturn,
      portfolioROI,
      averageProjectROI,
      totalResourceAllocation,
      averageResourcePerProject,
      averageStrategicAlignment,
      highAlignmentProjects,
      calculatedAt: new Date()
    },
    update: {
      totalProjects,
      activeProjects,
      completedProjects,
      highPriorityProjects,
      totalInvestment,
      totalExpectedReturn,
      portfolioROI,
      averageProjectROI,
      totalResourceAllocation,
      averageResourcePerProject,
      averageStrategicAlignment,
      highAlignmentProjects,
      calculatedAt: new Date()
    }
  });
}
```

---

## ğŸ“‹ å¿…è¦ãªè¿½åŠ ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

### 1. VoiceDriveå´ã§è¿½åŠ ãŒå¿…è¦

#### ğŸ”´ å„ªå…ˆåº¦: æœ€é«˜ï¼ˆå³å¯¾å¿œï¼‰

**A. ProjectFinancialï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ‡ãƒ¼ã‚¿ï¼‰**
```prisma
model ProjectFinancial {
  id                      String    @id @default(cuid())
  projectId               String    @unique @map("project_id")
  investmentAmount        Int       @default(0) @map("investment_amount")
  expectedReturn          Int       @default(0) @map("expected_return")
  roi                     Float     @default(0) @map("roi")
  budgetYear              Int       @map("budget_year")
  financialApprovalStatus String?   @map("financial_approval_status")
  calculatedAt            DateTime  @default(now()) @map("calculated_at")
  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")

  project                 Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([budgetYear])
  @@index([roi])
  @@map("project_financial")
}
```

**ç†ç”±**:
- ROIåˆ†æã‚¿ãƒ–ï¼ˆ326-415è¡Œç›®ï¼‰ã«å¿…é ˆ
- æŠ•è³‡é¡ã€æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ã€ROIã®ç®¡ç†

---

**B. ProjectStrategicEvaluationï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæˆ¦ç•¥è©•ä¾¡ï¼‰**
```prisma
model ProjectStrategicEvaluation {
  id                    String    @id @default(cuid())
  projectId             String    @unique @map("project_id")
  strategicImpact       Int       @default(3) @map("strategic_impact")
  urgency               Int       @default(3) @map("urgency")
  strategicAlignment    Int       @default(50) @map("strategic_alignment")
  priorityQuadrant      String?   @map("priority_quadrant")
  evaluatedBy           String?   @map("evaluated_by")
  evaluatedAt           DateTime? @map("evaluated_at")
  createdAt             DateTime  @default(now()) @map("created_at")
  updatedAt             DateTime  @updatedAt @map("updated_at")

  project               Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([strategicImpact])
  @@index([urgency])
  @@index([strategicAlignment])
  @@map("project_strategic_evaluation")
}
```

**ç†ç”±**:
- å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã‚¿ãƒ–ï¼ˆ178-324è¡Œç›®ï¼‰ã«å¿…é ˆ
- æˆ¦ç•¥æ•´åˆæ€§ã‚¿ãƒ–ï¼ˆ486-573è¡Œç›®ï¼‰ã«å¿…é ˆ

---

**C. ProjectResourceSummaryï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆï¼‰**
```prisma
model ProjectResourceSummary {
  id                      String    @id @default(cuid())
  projectId               String    @unique @map("project_id")
  totalMembers            Int       @default(0) @map("total_members")
  estimatedPersonDays     Int       @default(0) @map("estimated_person_days")
  actualPersonDays        Int?      @map("actual_person_days")
  resourceAllocationRate  Float     @default(0) @map("resource_allocation_rate")
  calculatedAt            DateTime  @default(now()) @map("calculated_at")
  createdAt               DateTime  @default(now()) @map("created_at")
  updatedAt               DateTime  @updatedAt @map("updated_at")

  project                 Post      @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([estimatedPersonDays])
  @@map("project_resource_summary")
}
```

**ç†ç”±**:
- ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–ï¼ˆ417-484è¡Œç›®ï¼‰ã«å¿…é ˆ

---

#### ğŸ”´ å„ªå…ˆåº¦: é«˜ï¼ˆæ¨å¥¨ï¼‰

**D. PortfolioSummaryï¼ˆãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼ï¼‰**
```prisma
model PortfolioSummary {
  id                        String    @id @default(cuid())
  periodType                String    @map("period_type")
  periodStart               DateTime  @map("period_start")
  periodEnd                 DateTime  @map("period_end")
  totalProjects             Int       @default(0) @map("total_projects")
  activeProjects            Int       @default(0) @map("active_projects")
  totalInvestment           Int       @default(0) @map("total_investment")
  totalExpectedReturn       Int       @default(0) @map("total_expected_return")
  portfolioROI              Float     @default(0) @map("portfolio_roi")
  totalResourceAllocation   Int       @default(0) @map("total_resource_allocation")
  averageStrategicAlignment Float     @default(0) @map("average_strategic_alignment")
  calculatedAt              DateTime  @default(now()) @map("calculated_at")
  createdAt                 DateTime  @default(now()) @map("created_at")
  updatedAt                 DateTime  @updatedAt @map("updated_at")

  @@unique([periodType, periodStart])
  @@index([periodType])
  @@map("portfolio_summary")
}
```

**ç†ç”±**:
- ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ã®é«˜é€Ÿè¡¨ç¤º
- æ—¥æ¬¡ãƒãƒƒãƒã§äº‹å‰é›†è¨ˆ

---

#### ğŸŸ¡ å„ªå…ˆåº¦: ä¸­ï¼ˆæ¨å¥¨ï¼‰

**E. ProjectCategoryï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ï¼‰**
```prisma
model ProjectCategory {
  id            String    @id @default(cuid())
  categoryCode  String    @unique @map("category_code")
  categoryName  String    @map("category_name")
  description   String?   @db.Text
  color         String?   @map("color")
  sortOrder     Int       @default(0) @map("sort_order")
  isActive      Boolean   @default(true) @map("is_active")
  createdAt     DateTime  @default(now()) @map("created_at")
  updatedAt     DateTime  @updatedAt @map("updated_at")

  @@index([sortOrder])
  @@map("project_categories")
}
```

**ç†ç”±**:
- ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆ596-611è¡Œç›®ï¼‰ã®å‹•çš„ç”Ÿæˆ
- ã‚«ãƒ†ã‚´ãƒªãƒ¼ç®¡ç†ã®æŸ”è»Ÿæ€§å‘ä¸Š

---

### 2. æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ä¿®æ­£ï¼ˆ1ä»¶ï¼‰

#### Modify-1: Postãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒªè¿½åŠ 

```prisma
model Post {
  // ... æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

  // ğŸ†• ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ†ã‚´ãƒª
  projectCategory       String?   @map("project_category")

  // ğŸ†• Relations
  financial             ProjectFinancial?
  strategicEvaluation   ProjectStrategicEvaluation?
  resourceSummary       ProjectResourceSummary?
}
```

---

### 3. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§è¿½åŠ ãŒå¿…è¦

**ãªã—**

Project Portfolio Managementãƒšãƒ¼ã‚¸ã¯å®Œå…¨ã«VoiceDriveå´ã®ç®¡ç†æ©Ÿèƒ½ã®ãŸã‚ã€åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§ã®è¿½åŠ å®Ÿè£…ã¯ä¸è¦ã€‚

---

## ğŸ¯ å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ»æˆ¦ç•¥è©•ä¾¡æ©Ÿèƒ½ï¼ˆ3-4æ—¥ï¼‰

**ç›®æ¨™**: å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã¨ROIåˆ†æã‚¿ãƒ–ãŒå‹•ä½œã™ã‚‹

1. ğŸ”´ **ProjectFinancialãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ **
   ```bash
   npx prisma migrate dev --name add_project_financial
   ```

2. ğŸ”´ **ProjectStrategicEvaluationãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ **
   ```bash
   npx prisma migrate dev --name add_project_strategic_evaluation
   ```

3. ğŸ”´ **Post.projectCategoryè¿½åŠ **
   ```prisma
   model Post {
     projectCategory  String?  @map("project_category")
   }
   ```

4. ğŸ”´ **ROIè¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…**
   ```typescript
   // src/services/ProjectFinancialService.ts
   export async function calculateProjectROI(projectId: string) { /* ... */ }
   ```

5. ğŸ”´ **å„ªå…ˆåº¦è±¡é™è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…**
   ```typescript
   // src/services/StrategicEvaluationService.ts
   export function calculatePriorityQuadrant() { /* ... */ }
   ```

**ã“ã®Phaseã§å‹•ä½œã™ã‚‹æ©Ÿèƒ½**:
- âœ… å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã‚¿ãƒ–ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- âœ… ROIåˆ†æã‚¿ãƒ–ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- âœ… æˆ¦ç•¥æ•´åˆæ€§ã‚¿ãƒ–ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- âš ï¸ ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–ï¼ˆç°¡æ˜“ç‰ˆï¼‰

---

### Phase 2: ãƒªã‚½ãƒ¼ã‚¹é…åˆ†æ©Ÿèƒ½ï¼ˆ2-3æ—¥ï¼‰

**ç›®æ¨™**: ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–ãŒå®Œå…¨å‹•ä½œã™ã‚‹

1. ğŸ”´ **ProjectResourceSummaryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ **
   ```bash
   npx prisma migrate dev --name add_project_resource_summary
   ```

2. ğŸ”´ **ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…**
   ```typescript
   // src/services/ProjectResourceService.ts
   export async function calculateProjectResourceSummary(projectId: string) { /* ... */ }
   ```

3. ğŸ”´ **ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆãƒãƒƒãƒå®Ÿè£…**
   ```typescript
   // src/jobs/calculateProjectResources.ts
   ```

**ã“ã®Phaseã§å‹•ä½œã™ã‚‹æ©Ÿèƒ½**:
- âœ… ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–ï¼ˆå®Ÿãƒ‡ãƒ¼ã‚¿ï¼‰
- âœ… ãƒªã‚½ãƒ¼ã‚¹æœ€é©åŒ–ææ¡ˆï¼ˆåŸºæœ¬ç‰ˆï¼‰

---

### Phase 3: ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼é›†è¨ˆï¼ˆ1-2æ—¥ï¼‰

**ç›®æ¨™**: ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ã®é«˜é€Ÿè¡¨ç¤º

1. ğŸ”´ **PortfolioSummaryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ **
   ```bash
   npx prisma migrate dev --name add_portfolio_summary
   ```

2. ğŸ”´ **ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªé›†è¨ˆãƒãƒƒãƒå®Ÿè£…**
   ```typescript
   // src/jobs/calculatePortfolioSummary.ts
   ```

3. ğŸ”´ **æ—¥æ¬¡ãƒãƒƒãƒã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š**

**ã“ã®Phaseã§å‹•ä½œã™ã‚‹æ©Ÿèƒ½**:
- âœ… é«˜é€Ÿãªã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
- âœ… æœŸé–“åˆ¥ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªåˆ†æ

---

### Phase 4: ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ»æ‹¡å¼µæ©Ÿèƒ½ï¼ˆ1-2æ—¥ï¼‰

**ç›®æ¨™**: ã‚«ãƒ†ã‚´ãƒªãƒ¼ç®¡ç†ã®æŸ”è»Ÿæ€§å‘ä¸Š

1. ğŸŸ¡ **ProjectCategoryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ **
   ```bash
   npx prisma migrate dev --name add_project_category
   ```

2. ğŸŸ¡ **ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥**

3. ğŸŸ¡ **ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ã®å‹•çš„ç”Ÿæˆ**

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³

### ãƒ•ãƒ­ãƒ¼1: å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º

```
ProjectPortfolioManagementPage - å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã‚¿ãƒ–
  â†“ ãƒ‡ãƒ¼ã‚¿å–å¾—
ProjectStrategicEvaluation (æˆ¦ç•¥è©•ä¾¡)
  â† Post (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æƒ…å ±)

  â†“ è¡¨ç¤º
- å½±éŸ¿åº¦Ã—ç·Šæ€¥åº¦ãƒãƒˆãƒªã‚¯ã‚¹
- å„ªå…ˆåº¦è±¡é™ï¼ˆæœ€å„ªå…ˆã€é‡è¦ã€ç·Šæ€¥ã€é€šå¸¸ï¼‰
```

---

### ãƒ•ãƒ­ãƒ¼2: ROIåˆ†æè¡¨ç¤º

```
ProjectPortfolioManagementPage - ROIåˆ†æã‚¿ãƒ–
  â†“ ãƒ‡ãƒ¼ã‚¿å–å¾—
ProjectFinancial (è²¡å‹™ãƒ‡ãƒ¼ã‚¿)
  â† Post (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æƒ…å ±)

  â†“ è¨ˆç®—
ROI = ((æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ - æŠ•è³‡é¡) / æŠ•è³‡é¡) * 100

  â†“ è¡¨ç¤º
- æŠ•è³‡é¡ã€æœŸå¾…ãƒªã‚¿ãƒ¼ãƒ³ã€ROI
- ROIåˆ†å¸ƒã‚°ãƒ©ãƒ•
```

---

### ãƒ•ãƒ­ãƒ¼3: ãƒªã‚½ãƒ¼ã‚¹é…åˆ†è¡¨ç¤º

```
ProjectPortfolioManagementPage - ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–
  â†“ ãƒ‡ãƒ¼ã‚¿å–å¾—
ProjectResourceSummary (ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆ)
  â† ProjectTeamMember (ãƒ¡ãƒ³ãƒãƒ¼ãƒªã‚¹ãƒˆ)
  â† User (è·å“¡æƒ…å ±)

  â†“ è¡¨ç¤º
- ç·ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ï¼ˆäººæ—¥ï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¥é…åˆ†ç‡
```

---

### ãƒ•ãƒ­ãƒ¼4: ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼é›†è¨ˆ

```
æ—¥æ¬¡ãƒãƒƒãƒ (æ·±å¤œ2:00)
  â†“ é›†è¨ˆ
Post (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§)
  + ProjectFinancial (è²¡å‹™ãƒ‡ãƒ¼ã‚¿)
  + ProjectStrategicEvaluation (æˆ¦ç•¥è©•ä¾¡)
  + ProjectResourceSummary (ãƒªã‚½ãƒ¼ã‚¹)

  â†“ ä¿å­˜
PortfolioSummary (ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼)

  â†“ è¡¨ç¤º
ProjectPortfolioManagementPage - ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰
```

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### VoiceDriveå´ã®å®Ÿè£…

#### Phase 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè²¡å‹™ãƒ»æˆ¦ç•¥è©•ä¾¡
- [ ] ProjectFinancialãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- [ ] ProjectStrategicEvaluationãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- [ ] Post.projectCategoryè¿½åŠ 
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] ROIè¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…
- [ ] å„ªå…ˆåº¦è±¡é™è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] å„ªå…ˆåº¦ãƒãƒˆãƒªã‚¯ã‚¹ã‚¿ãƒ–å®Ÿè£…
- [ ] ROIåˆ†æã‚¿ãƒ–å®Ÿè£…
- [ ] æˆ¦ç•¥æ•´åˆæ€§ã‚¿ãƒ–å®Ÿè£…

#### Phase 2: ãƒªã‚½ãƒ¼ã‚¹é…åˆ†
- [ ] ProjectResourceSummaryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆã‚µãƒ¼ãƒ“ã‚¹å®Ÿè£…
- [ ] ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆãƒãƒƒãƒå®Ÿè£…
- [ ] ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã‚¿ãƒ–å®Ÿè£…

#### Phase 3: ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µãƒãƒªãƒ¼
- [ ] PortfolioSummaryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªé›†è¨ˆãƒãƒƒãƒå®Ÿè£…
- [ ] æ—¥æ¬¡ãƒãƒƒãƒã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
- [ ] ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ã®å®Ÿãƒ‡ãƒ¼ã‚¿é€£æº

#### Phase 4: ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿
- [ ] ProjectCategoryãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
- [ ] ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ã®å‹•çš„ç”Ÿæˆ

### ãƒ†ã‚¹ãƒˆ

- [ ] ROIè¨ˆç®—ã®å˜ä½“ãƒ†ã‚¹ãƒˆ
- [ ] å„ªå…ˆåº¦è±¡é™è¨ˆç®—ã®å˜ä½“ãƒ†ã‚¹ãƒˆ
- [ ] ãƒªã‚½ãƒ¼ã‚¹é›†è¨ˆã®å˜ä½“ãƒ†ã‚¹ãƒˆ
- [ ] ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªé›†è¨ˆã®å˜ä½“ãƒ†ã‚¹ãƒˆ
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆå…¨ã‚¿ãƒ–ï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ100ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼‰
- [ ] E2Eãƒ†ã‚¹ãƒˆï¼ˆProjectPortfolioManagementå…¨æ©Ÿèƒ½ï¼‰

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [PersonalStation_DBè¦ä»¶åˆ†æ](./PersonalStation_DBè¦ä»¶åˆ†æ_20251008.md)
- [project-org-development_DBè¦ä»¶åˆ†æ](./project-org-development_DBè¦ä»¶åˆ†æ_20251013.md)
- [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸](./ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md)
- [å…±é€šDBæ§‹ç¯‰å¾Œçµ±åˆä½œæ¥­å†é–‹è¨ˆç”»æ›¸](./å…±é€šDBæ§‹ç¯‰å¾Œçµ±åˆä½œæ¥­å†é–‹è¨ˆç”»æ›¸_20251008.md)

---

**æ–‡æ›¸çµ‚äº†**

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ13æ—¥
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼: Phase 1å®Ÿè£…å¾Œ
