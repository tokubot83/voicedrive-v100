# EnhancedProjectListPage (/projects) æš«å®šãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ

**æ–‡æ›¸ç•ªå·**: MASTER-2025-1026-003
**ä½œæˆæ—¥**: 2025å¹´10æœˆ26æ—¥
**å¯¾è±¡ãƒšãƒ¼ã‚¸**: https://voicedrive-v100.vercel.app/projects EnhancedProjectListPage
**å‚ç…§æ–‡æ›¸**: [Projects_DBè¦ä»¶åˆ†æ_20251026.md](./Projects_DBè¦ä»¶åˆ†æ_20251026.md)

---

## ğŸ“‹ æ¦‚è¦

EnhancedProjectListPageï¼ˆ/projectsï¼‰ã®å®Ÿè£…ã«å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ»APIãƒ»ã‚µãƒ¼ãƒ“ã‚¹ã®å®Œå…¨ãªãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆã§ã™ã€‚

**é‡è¦**: æœ¬ãƒšãƒ¼ã‚¸ã¯**Phase 2ã¾ã§å®Œå…¨å®Ÿè£…æ¸ˆã¿**ã§ã‚ã‚Šã€å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã‚µãƒ¼ãƒ“ã‚¹ãŒå‹•ä½œã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ—‚ï¸ ãƒ‡ãƒ¼ã‚¿é …ç›®ã‚«ã‚¿ãƒ­ã‚°ï¼ˆ47é …ç›®ï¼‰

### ã‚«ãƒ†ã‚´ãƒªåˆ¥åˆ†é¡

1. **åŸºæœ¬æƒ…å ±**: 9é …ç›®
2. **ãƒãƒ¼ãƒ æƒ…å ±**: 2é …ç›®
3. **çµ„ç¹”æƒ…å ±**: 2é …ç›®
4. **Phase 2æ‹¡å¼µ**: 6é …ç›®
5. **çµ±è¨ˆã‚µãƒãƒªãƒ¼**: 4é …ç›®
6. **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: 4é …ç›®
7. **UIçŠ¶æ…‹**: 3é …ç›®
8. **å†…éƒ¨ç®¡ç†ç”¨**: 17é …ç›®

---

## 1ï¸âƒ£ åŸºæœ¬æƒ…å ±ï¼ˆ9é …ç›®ï¼‰

### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID
| é …ç›®å | `id` |
|--------|------|
| **å‹** | string |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.id |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸€æ„è­˜åˆ¥å­ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰ |
| **ç”Ÿæˆæ–¹æ³•** | cuid() |

---

### 1.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå
| é …ç›®å | `title` |
|--------|------|
| **å‹** | string |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.title |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¿ã‚¤ãƒˆãƒ« |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ã®ãƒ˜ãƒƒãƒ€ãƒ¼ |
| **æ¤œç´¢å¯¾è±¡** | âœ… Yesï¼ˆsearchTermã§éƒ¨åˆ†ä¸€è‡´ï¼‰ |

---

### 1.3 èª¬æ˜æ–‡
| é …ç›®å | `description` |
|--------|------|
| **å‹** | string |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.description |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜æ–‡ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ã®æœ¬æ–‡ |
| **æ¤œç´¢å¯¾è±¡** | âœ… Yesï¼ˆsearchTermã§éƒ¨åˆ†ä¸€è‡´ï¼‰ |

---

### 1.4 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
| é …ç›®å | `status` |
|--------|------|
| **å‹** | enum: 'proposed' \| 'active' \| 'completed' \| 'paused' |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.status |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ã®å³ä¸Šï¼ˆã‚¢ã‚¤ã‚³ãƒ³ï¼‹ãƒ©ãƒ™ãƒ«ï¼‰ |
| **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼** | âœ… Yesï¼ˆfilterStatusï¼‰ |

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¸€è¦§**:
| å€¤ | æ—¥æœ¬èªè¡¨ç¤º | ã‚¢ã‚¤ã‚³ãƒ³ | è‰² |
|----|----------|---------|-----|
| `proposed` | ææ¡ˆä¸­ | AlertCircle | blue-400 |
| `active` | é€²è¡Œä¸­ | Clock | yellow-400 |
| `completed` | å®Œäº† | CheckCircle | green-400 |
| `paused` | ä¸€æ™‚åœæ­¢ | AlertCircle | gray-400 |

---

### 1.5 ã‚«ãƒ†ã‚´ãƒªãƒ¼
| é …ç›®å | `category` |
|--------|------|
| **å‹** | enum: 'improvement' \| 'community' \| 'facility' \| 'system' |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.category |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†é¡ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ã®ãƒãƒƒã‚¸ |
| **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼** | âœ… Yesï¼ˆfilterCategoryï¼‰ |

**ã‚«ãƒ†ã‚´ãƒªãƒ¼ä¸€è¦§**:
| å€¤ | æ—¥æœ¬èªè¡¨ç¤º | èƒŒæ™¯è‰² | æ–‡å­—è‰² |
|----|----------|-------|--------|
| `improvement` | æ¥­å‹™æ”¹å–„ | blue-500/20 | blue-400 |
| `community` | ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ | green-500/20 | green-400 |
| `facility` | æ–½è¨­ç®¡ç† | purple-500/20 | purple-400 |
| `system` | ã‚·ã‚¹ãƒ†ãƒ  | orange-500/20 | orange-400 |

---

### 1.6 å„ªå…ˆåº¦
| é …ç›®å | `priority` |
|--------|------|
| **å‹** | enum?: 'urgent' \| 'high' \| 'medium' \| 'low' \| null |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.priority |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å„ªå…ˆåº¦ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ã®ä¸‹éƒ¨ï¼ˆTrendingUpã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰ |
| **NULLè¨±å¯** | âœ… Yesï¼ˆè¡¨ç¤º: "æœªè¨­å®š"ï¼‰ |

**å„ªå…ˆåº¦ä¸€è¦§**:
| å€¤ | æ—¥æœ¬èªè¡¨ç¤º | è‰² |
|----|----------|-----|
| `urgent` | ç·Šæ€¥ | red-500 |
| `high` | é«˜ | red-400 |
| `medium` | ä¸­ | yellow-400 |
| `low` | ä½ | gray-400 |
| `null` | æœªè¨­å®š | gray-400 |

---

### 1.7 é€²æ—ç‡
| é …ç›®å | `progress` |
|--------|------|
| **å‹** | number (0-100) |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.progressRate |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€²æ—ç‡ï¼ˆ0-100%ï¼‰ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ä¸‹éƒ¨ã®ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ |
| **è¡¨ç¤ºæ¡ä»¶** | status === 'active'ã®å ´åˆã®ã¿ |

**è¡¨ç¤ºä¾‹**:
```tsx
<div className="w-full bg-slate-700 rounded-full h-2">
  <div
    className="bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full"
    style={{ width: `${progress}%` }}
  />
</div>
```

---

### 1.8 é–‹å§‹æ—¥
| é …ç›®å | `startDate` |
|--------|------|
| **å‹** | string? (ISO 8601å½¢å¼) |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.startedAt |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é–‹å§‹æ—¥ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ä¸‹éƒ¨ï¼ˆCalendarã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰ |
| **NULLè¨±å¯** | âœ… Yesï¼ˆéè¡¨ç¤ºï¼‰ |
| **ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ** | `new Date().toLocaleDateString('ja-JP')` |

---

### 1.9 å®Œäº†æ—¥
| é …ç›®å | `endDate` |
|--------|------|
| **å‹** | string? (ISO 8601å½¢å¼) |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.completedAt |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Œäº†æ—¥ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ä¸‹éƒ¨ï¼ˆCalendarã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰ |
| **NULLè¨±å¯** | âœ… Yesï¼ˆéè¡¨ç¤ºï¼‰ |
| **è¡¨ç¤ºæ¡ä»¶** | status === 'completed'ã®å ´åˆã®ã¿ |

---

## 2ï¸âƒ£ ãƒãƒ¼ãƒ æƒ…å ±ï¼ˆ2é …ç›®ï¼‰

### 2.1 å‚åŠ è€…æ•°
| é …ç›®å | `participants` |
|--------|------|
| **å‹** | number |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | COUNT(ProjectTeamMember WHERE leftAt IS NULL) + 1 (proposer) |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç¾åœ¨ã®å‚åŠ è€…æ•° |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ä¸‹éƒ¨ï¼ˆUsersã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰ |
| **è¨ˆç®—æ–¹æ³•** | ProjectRoleService.getProjectParticipantCounts() |

**Phase 3æœ€é©åŒ–**:
- ProjectSummary.activeParticipants ã‚’å„ªå…ˆä½¿ç”¨
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—

---

### 2.2 ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å½¹å‰²
| é …ç›®å | `myRole` |
|--------|------|
| **å‹** | enum: 'owner' \| 'participant' \| 'viewer' |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | ProjectRoleService.getUserProjectRole() |
| **èª¬æ˜** | ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ã®å½¹å‰² |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ã®ãƒãƒƒã‚¸ï¼ˆownerã®å ´åˆã®ã¿ï¼‰ |
| **åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯** | ProjectRoleServiceå‚ç…§ |

**å½¹å‰²åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯**:
1. `Project.proposerId === currentUserId` â†’ `owner`
2. `ProjectTeamMember.role === 'owner'` â†’ `owner`
3. `ProjectTeamMember.role === 'member'` and `leftAt === null` â†’ `participant`
4. ãã®ä»– â†’ `viewer`

---

## 3ï¸âƒ£ çµ„ç¹”æƒ…å ±ï¼ˆ2é …ç›®ï¼‰

### 3.1 éƒ¨ç½²å
| é …ç›®å | `department` |
|--------|------|
| **å‹** | string |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | User.department (proposer) |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆææ¡ˆè€…ã®éƒ¨ç½²å |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ä¸‹éƒ¨ |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** | "æœªè¨­å®š" |

---

### 3.2 æ–½è¨­å
| é …ç›®å | `facility` |
|--------|------|
| **å‹** | string |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | MedicalSystemService.getFacilitiesFromDepartments() |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆææ¡ˆè€…ã®æ‰€å±æ–½è¨­å |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ä¸‹éƒ¨ï¼ˆé’è‰²è¡¨ç¤ºï¼‰ |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥** | 24æ™‚é–“ |
| **API** | GET /api/v2/departments |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** | "æœªè¨­å®š" or Project.facilityName |

**ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼**:
```
1. MedicalSystemService.getFacilitiesFromDepartments([department])
   â†“
2. ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèªï¼ˆ24æ™‚é–“æœ‰åŠ¹ï¼‰
   â†“ (ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹)
3. GET https://åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ /api/v2/departments
   â†“
4. éƒ¨ç½²å â†’ facilityName ãƒãƒƒãƒ”ãƒ³ã‚°ä½œæˆ
   â†“
5. 24æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜
   â†“
6. facilityMapã‚’è¿”å´
```

---

## 4ï¸âƒ£ Phase 2æ‹¡å¼µï¼ˆ6é …ç›®ï¼‰

### 4.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¬ãƒ™ãƒ«
| é …ç›®å | `projectLevel` |
|--------|------|
| **å‹** | enum?: 'DEPARTMENT' \| 'FACILITY' \| 'CORPORATE' \| 'EMERGENCY' \| null |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.projectLevel |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¹ã‚±ãƒ¼ãƒ«ãƒ¬ãƒ™ãƒ« |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ã®ãƒãƒƒã‚¸ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰ |
| **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼** | âœ… Yesï¼ˆfilterLevelï¼‰ |
| **è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹** | ProjectLevelEngine.calculateProjectLevel() |

**ãƒ¬ãƒ™ãƒ«ä¸€è¦§**:
| å€¤ | æ—¥æœ¬èªè¡¨ç¤º | ã‚¢ã‚¤ã‚³ãƒ³ | åˆ¤å®šæ¡ä»¶ |
|----|----------|---------|---------|
| `DEPARTMENT` | éƒ¨ç½²ãƒ¬ãƒ™ãƒ« | ğŸ¢ | å˜ä¸€éƒ¨ç½²å†… |
| `FACILITY` | æ–½è¨­ãƒ¬ãƒ™ãƒ« | ğŸ¥ | å˜ä¸€æ–½è¨­ãƒ»è¤‡æ•°éƒ¨ç½² |
| `CORPORATE` | æ³•äººãƒ¬ãƒ™ãƒ« | ğŸ›ï¸ | è¤‡æ•°æ–½è¨­ |
| `EMERGENCY` | ç·Šæ€¥ | ğŸš¨ | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ |

**è‡ªå‹•è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯**:
```typescript
if (isEmergencyEscalated) return 'EMERGENCY';
if (facilitiesCount > 1) return 'CORPORATE';
if (departmentsCount > 1) return 'FACILITY';
return 'DEPARTMENT';
```

---

### 4.2 ç·Šæ€¥ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æœ‰ç„¡
| é …ç›®å | `isEmergencyEscalated` |
|--------|------|
| **å‹** | boolean |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.isEmergencyEscalated |
| **èª¬æ˜** | ç·Šæ€¥ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‹ã©ã†ã‹ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ä¸Šéƒ¨ï¼ˆç·Šæ€¥ãƒãƒƒã‚¸ï¼‰ |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** | false |

**è¡¨ç¤ºä¾‹**:
```tsx
{isEmergencyEscalated && (
  <div className="mb-3 flex items-center gap-2">
    <AlertTriangle className="w-5 h-5 text-red-500" />
    <span className="text-red-500 text-sm font-semibold">ç·Šæ€¥ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</span>
  </div>
)}
```

---

### 4.3 ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œè€…ID
| é …ç›®å | `escalatedBy` |
|--------|------|
| **å‹** | string? |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.escalatedBy |
| **èª¬æ˜** | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ID |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | è©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆProjectListPageã§ã¯éè¡¨ç¤ºï¼‰ |
| **NULLè¨±å¯** | âœ… Yes |

---

### 4.4 ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ—¥æ™‚
| é …ç›®å | `escalatedDate` |
|--------|------|
| **å‹** | string? (ISO 8601å½¢å¼) |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.escalatedDate |
| **èª¬æ˜** | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Ÿè¡Œã•ã‚ŒãŸæ—¥æ™‚ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | è©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆProjectListPageã§ã¯éè¡¨ç¤ºï¼‰ |
| **NULLè¨±å¯** | âœ… Yes |

---

### 4.5 æ‰¿èªçŠ¶æ…‹
| é …ç›®å | `approvalStatus` |
|--------|------|
| **å‹** | enum: 'pending' \| 'in_review' \| 'approved' \| 'rejected' |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.approvalStatus |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ‰¿èªçŠ¶æ…‹ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚«ãƒ¼ãƒ‰ã®ãƒãƒƒã‚¸ï¼ˆpendingä»¥å¤–ï¼‰ |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** | 'pending' |

**æ‰¿èªçŠ¶æ…‹ä¸€è¦§**:
| å€¤ | æ—¥æœ¬èªè¡¨ç¤º | è‰² | è¡¨ç¤ºæ¡ä»¶ |
|----|----------|-----|---------|
| `pending` | æ‰¿èªå¾…ã¡ | - | éè¡¨ç¤º |
| `in_review` | å¯©æŸ»ä¸­ | blue-300 | è¡¨ç¤º |
| `approved` | æ‰¿èªæ¸ˆã¿ | green-300 | è¡¨ç¤º |
| `rejected` | å´ä¸‹ | red-300 | è¡¨ç¤º |

**è¡¨ç¤ºä¾‹**:
```tsx
{approvalStatus && approvalStatus !== 'pending' && (
  <span className="px-2 py-1 bg-blue-500/20 text-blue-300 rounded-full text-xs flex items-center gap-1">
    <Shield className="w-3 h-3" />
    <span>{getApprovalStatusLabel(approvalStatus)}</span>
  </span>
)}
```

---

### 4.6 ç¾åœ¨ã®æ‰¿èªè€…ID
| é …ç›®å | `currentApprover` |
|--------|------|
| **å‹** | string? |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.currentApprover |
| **èª¬æ˜** | ç¾åœ¨ã®æ‰¿èªå¾…ã¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ID |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | è©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆProjectListPageã§ã¯éè¡¨ç¤ºï¼‰ |
| **NULLè¨±å¯** | âœ… Yes |

---

## 5ï¸âƒ£ çµ±è¨ˆã‚µãƒãƒªãƒ¼ï¼ˆ4é …ç›®ï¼‰

### 5.1 å‚åŠ ä¸­ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°
| é …ç›®å | `stats.active` |
|--------|------|
| **å‹** | number |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | ProjectListService.getProjectStats() |
| **èª¬æ˜** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå‚åŠ ä¸­ï¼ˆactiveï¼‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•° |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã®çµ±è¨ˆã‚«ãƒ¼ãƒ‰ï¼ˆé»„è‰²ï¼‰ |

**è¨ˆç®—SQL**:
```typescript
await prisma.project.count({
  where: {
    status: 'active',
    OR: [
      { proposerId: currentUserId },
      { teamMembers: { some: { userId: currentUserId, leftAt: null } } }
    ]
  }
})
```

---

### 5.2 å®Œäº†æ¸ˆã¿ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°
| é …ç›®å | `stats.completed` |
|--------|------|
| **å‹** | number |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | ProjectListService.getProjectStats() |
| **èª¬æ˜** | å®Œäº†æ¸ˆã¿ï¼ˆcompletedï¼‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç·æ•° |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã®çµ±è¨ˆã‚«ãƒ¼ãƒ‰ï¼ˆç·‘è‰²ï¼‰ |

**è¨ˆç®—SQL**:
```typescript
await prisma.project.count({
  where: { status: 'completed' }
})
```

---

### 5.3 ææ¡ˆä¸­ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°
| é …ç›®å | `stats.proposed` |
|--------|------|
| **å‹** | number |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | ProjectListService.getProjectStats() |
| **èª¬æ˜** | ææ¡ˆä¸­ï¼ˆproposedï¼‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç·æ•° |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã®çµ±è¨ˆã‚«ãƒ¼ãƒ‰ï¼ˆé’è‰²ï¼‰ |

**è¨ˆç®—SQL**:
```typescript
await prisma.project.count({
  where: { status: 'proposed' }
})
```

---

### 5.4 ã‚ªãƒ¼ãƒŠãƒ¼ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°
| é …ç›®å | `stats.owned` |
|--------|------|
| **å‹** | number |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | ProjectListService.getProjectStats() |
| **èª¬æ˜** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ªãƒ¼ãƒŠãƒ¼ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•° |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã®çµ±è¨ˆã‚«ãƒ¼ãƒ‰ï¼ˆç´«è‰²ï¼‰ |

**è¨ˆç®—SQL**:
```typescript
await prisma.project.count({
  where: { proposerId: currentUserId }
})
```

---

## 6ï¸âƒ£ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆ4é …ç›®ï¼‰

### 6.1 æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
| é …ç›®å | `searchTerm` |
|--------|------|
| **å‹** | string |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | React state |
| **èª¬æ˜** | ã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜æ–‡ã®æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **æ¤œç´¢å¯¾è±¡** | Project.title, Project.description |
| **æ¤œç´¢æ–¹å¼** | éƒ¨åˆ†ä¸€è‡´ï¼ˆå¤§æ–‡å­—å°æ–‡å­—åŒºåˆ¥ãªã—ï¼‰ |

**SQLã‚¯ã‚¨ãƒª**:
```typescript
where: {
  OR: [
    { title: { contains: searchTerm, mode: 'insensitive' } },
    { description: { contains: searchTerm, mode: 'insensitive' } }
  ]
}
```

---

### 6.2 ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
| é …ç›®å | `filterStatus` |
|--------|------|
| **å‹** | enum: 'all' \| 'active' \| 'completed' \| 'proposed' |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | React state |
| **èª¬æ˜** | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** | 'all' |
| **URLé€£æº** | âœ… Yesï¼ˆ?filter=activeï¼‰ |

---

### 6.3 ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
| é …ç›®å | `filterCategory` |
|--------|------|
| **å‹** | enum: 'all' \| 'improvement' \| 'community' \| 'facility' \| 'system' |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | React state |
| **èª¬æ˜** | ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** | 'all' |
| **URLé€£æº** | âœ… Yesï¼ˆ?filter=department/facility/corporateï¼‰ |

---

### 6.4 ãƒ¬ãƒ™ãƒ«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
| é …ç›®å | `filterLevel` |
|--------|------|
| **å‹** | enum: 'all' \| 'DEPARTMENT' \| 'FACILITY' \| 'CORPORATE' \| 'EMERGENCY' |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | React state |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¬ãƒ™ãƒ«ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº†ï¼ˆPhase 2ï¼‰ |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** | 'all' |

---

## 7ï¸âƒ£ UIçŠ¶æ…‹ï¼ˆ3é …ç›®ï¼‰

### 7.1 èª­ã¿è¾¼ã¿ä¸­ãƒ•ãƒ©ã‚°
| é …ç›®å | `loading` |
|--------|------|
| **å‹** | boolean |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | React state |
| **èª¬æ˜** | ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­ã‹ã©ã†ã‹ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒšãƒ¼ã‚¸ä¸­å¤®ï¼ˆ"èª­ã¿è¾¼ã¿ä¸­..."ï¼‰ |

---

### 7.2 ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
| é …ç›®å | `error` |
|--------|------|
| **å‹** | string? |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | React state |
| **èª¬æ˜** | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è¡¨ç¤ºå ´æ‰€** | ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ï¼ˆèµ¤è‰²èƒŒæ™¯ï¼‰ |

---

### 7.3 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§é…åˆ—
| é …ç›®å | `projects` |
|--------|------|
| **å‹** | ProjectListItem[] |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | React state |
| **èª¬æ˜** | è¡¨ç¤ºã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **åˆæœŸå€¤** | [] |

---

## 8ï¸âƒ£ å†…éƒ¨ç®¡ç†ç”¨ï¼ˆ17é …ç›®ï¼‰

### 8.1 ææ¡ˆè€…ID
| é …ç›®å | `proposerId` |
|--------|------|
| **å‹** | string |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.proposerId |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆææ¡ˆè€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **ç”¨é€”** | å½¹å‰²åˆ¤å®šï¼ˆowneråˆ¤å®šï¼‰ |

---

### 8.2 ä½œæˆæ—¥æ™‚
| é …ç›®å | `createdAt` |
|--------|------|
| **å‹** | DateTime |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.createdAt |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ—¥æ™‚ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** | now() |

---

### 8.3 æ›´æ–°æ—¥æ™‚
| é …ç›®å | `updatedAt` |
|--------|------|
| **å‹** | DateTime |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.updatedAt |
| **èª¬æ˜** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæœ€çµ‚æ›´æ–°æ—¥æ™‚ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **è‡ªå‹•æ›´æ–°** | âœ… Yesï¼ˆPrisma @updatedAtï¼‰ |

---

### 8.4 ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç†ç”±
| é …ç›®å | `escalationReason` |
|--------|------|
| **å‹** | string? |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.escalationReason |
| **èª¬æ˜** | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ç†ç”± |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **NULLè¨±å¯** | âœ… Yes |

---

### 8.5 æ–½è¨­IDï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
| é …ç›®å | `facilityId` |
|--------|------|
| **å‹** | string? |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.facilityId |
| **èª¬æ˜** | æ–½è¨­IDï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨ï¼‰ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **NULLè¨±å¯** | âœ… Yes |
| **ç”¨é€”** | ãƒ¬ãƒ™ãƒ«è¨ˆç®—ã®é«˜é€ŸåŒ– |

---

### 8.6 æ–½è¨­åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
| é …ç›®å | `facilityName` |
|--------|------|
| **å‹** | string? |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | Project.facilityName |
| **èª¬æ˜** | æ–½è¨­åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨ï¼‰ |
| **å®Ÿè£…çŠ¶æ³** | âœ… å®Œäº† |
| **NULLè¨±å¯** | âœ… Yes |
| **ç”¨é€”** | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIå‘¼ã³å‡ºã—ã®å‰Šæ¸› |

---

### 8.7-8.17 ãã®ä»–ã®å†…éƒ¨ç®¡ç†ç”¨é …ç›®
- ProjectTeamMemberé–¢é€£ï¼ˆid, projectId, userId, role, joinedAt, leftAtç­‰ï¼‰
- ProjectApprovalé–¢é€£ï¼ˆæ‰¿èªå±¥æ­´ï¼‰
- ProjectLevelHistoryé–¢é€£ï¼ˆãƒ¬ãƒ™ãƒ«å¤‰æ›´å±¥æ­´ï¼‰
- EmergencyDeactivationé–¢é€£ï¼ˆã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è§£é™¤å±¥æ­´ï¼‰

---

## ğŸ“Š ã‚µãƒ¼ãƒ“ã‚¹å±¤ãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ

### 1. ProjectListService.ts âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/ProjectListService.ts` (368è¡Œ)

| ãƒ¡ã‚½ãƒƒãƒ‰å | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|-------|------|
| `getProjectList` | filters, currentUserId | Promise\<ProjectListItem[]\> | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§å–å¾— |
| `getProjectStats` | currentUserId | Promise\<ProjectStats\> | ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆå–å¾— |
| `getProjectWithDetails` | projectId, currentUserId | Promise\<ProjectWithDetails?\> | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°å–å¾— |
| `searchProjects` | searchTerm, limit? | Promise\<Array\<{id, title, description}\>\> | ç°¡æ˜“æ¤œç´¢ |

---

### 2. ProjectRoleService.ts âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/ProjectRoleService.ts`

| ãƒ¡ã‚½ãƒƒãƒ‰å | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|-------|------|
| `getUserProjectRole` | userId, projectId | Promise\<'owner'\|'participant'\|'viewer'\> | å½¹å‰²åˆ¤å®š |
| `getUserProjectRoles` | userId, projectIds[] | Promise\<Record\<string, ProjectRole\>\> | ä¸€æ‹¬å½¹å‰²åˆ¤å®š |
| `getProjectParticipantCounts` | projectIds[] | Promise\<Record\<string, number\>\> | å‚åŠ è€…æ•°ä¸€æ‹¬å–å¾— |

---

### 3. MedicalSystemService.ts âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/MedicalSystemService.ts`

| ãƒ¡ã‚½ãƒƒãƒ‰å | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|-------|------|
| `getFacilitiesFromDepartments` | departments[] | Promise\<Record\<string, string\>\> | éƒ¨ç½²â†’æ–½è¨­åãƒãƒƒãƒ”ãƒ³ã‚° |

---

### 4. ProjectLevelEngine.ts âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/ProjectLevelEngine.ts` (344è¡Œ)

| ãƒ¡ã‚½ãƒƒãƒ‰å | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|-------|------|
| `calculateProjectLevel` | projectId | Promise\<ProjectLevelResult\> | ãƒ¬ãƒ™ãƒ«è‡ªå‹•è¨ˆç®— |
| `updateProjectLevel` | projectId | Promise\<void\> | ãƒ¬ãƒ™ãƒ«DBæ›´æ–° |
| `trackLevelChange` | projectId, previousLevel, newLevel, reason? | Promise\<void\> | ãƒ¬ãƒ™ãƒ«å¤‰æ›´å±¥æ­´è¨˜éŒ² |
| `getLevelLabel` | level | string | æ—¥æœ¬èªãƒ©ãƒ™ãƒ«å–å¾— |
| `getLevelIcon` | level | string | ã‚¢ã‚¤ã‚³ãƒ³æ–‡å­—åˆ—å–å¾— |
| `getProjectLevelStats` | userId? | Promise\<ProjectLevelStats\> | ãƒ¬ãƒ™ãƒ«åˆ¥çµ±è¨ˆ |

---

### 5. ProjectApprovalService.ts âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/ProjectApprovalService.ts` (380è¡Œ)

| ãƒ¡ã‚½ãƒƒãƒ‰å | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|-------|------|
| `getProjectApprovalInfo` | projectId, currentUserId | Promise\<ProjectApprovalInfo\> | æ‰¿èªæƒ…å ±å–å¾— |
| `createApprovalRequest` | projectId, requesterId | Promise\<ProjectApprovalInfo\> | æ‰¿èªãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ |
| `processApproval` | projectId, approverId, action, comment? | Promise\<ProjectApprovalInfo\> | æ‰¿èªå‡¦ç† |
| `getPendingApprovalsCount` | approverId | Promise\<number\> | æ‰¿èªå¾…ã¡æ•° |
| `getPendingApprovals` | approverId | Promise\<ProjectApprovalInfo[]\> | æ‰¿èªå¾…ã¡ä¸€è¦§ |
| `getApprovalStats` | userId | Promise\<ApprovalStats\> | æ‰¿èªçµ±è¨ˆ |
| `getApprovalStatusLabel` | status | string | æ‰¿èªçŠ¶æ…‹ãƒ©ãƒ™ãƒ« |

---

### 6. ProjectEscalationService.ts âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `src/services/ProjectEscalationService.ts` (403è¡Œ)

| ãƒ¡ã‚½ãƒƒãƒ‰å | å¼•æ•° | æˆ»ã‚Šå€¤ | èª¬æ˜ |
|----------|------|-------|------|
| `getEscalationInfo` | projectId, currentUserId | Promise\<EscalationInfo\> | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±å–å¾— |
| `escalateProject` | request | Promise\<EscalationInfo\> | ç·Šæ€¥ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ |
| `deescalateProject` | request | Promise\<EscalationInfo\> | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è§£é™¤ |
| `getEscalatedProjects` | filters | Promise\<EscalationInfo[]\> | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ä¸€è¦§ |
| `getEscalationStats` | userId? | Promise\<EscalationStats\> | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµ±è¨ˆ |

---

## ğŸ—„ï¸ ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚¹ã‚¿ãƒ¼ãƒªã‚¹ãƒˆ

### 1. Projectãƒ†ãƒ¼ãƒ–ãƒ«
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `prisma/schema.prisma` (lines 308-365)

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | NULLè¨±å¯ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ | èª¬æ˜ |
|-----------|---|------------|---------|-----------|------|
| `id` | String | cuid() | âŒ | PRIMARY | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| `title` | String | - | âŒ | âŒ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå |
| `description` | String | - | âŒ | âŒ | èª¬æ˜æ–‡ |
| `category` | String | - | âŒ | âœ… | ã‚«ãƒ†ã‚´ãƒªãƒ¼ |
| `status` | String | "proposed" | âŒ | âœ… | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| `priority` | String? | null | âœ… | âŒ | å„ªå…ˆåº¦ |
| `proposerId` | String | - | âŒ | âœ… | ææ¡ˆè€…ID |
| `progressRate` | Float | 0 | âŒ | âŒ | é€²æ—ç‡ |
| `startedAt` | DateTime? | null | âœ… | âŒ | é–‹å§‹æ—¥ |
| `completedAt` | DateTime? | null | âœ… | âŒ | å®Œäº†æ—¥ |
| `createdAt` | DateTime | now() | âŒ | âœ… | ä½œæˆæ—¥æ™‚ |
| `updatedAt` | DateTime | - | âŒ | âŒ | æ›´æ–°æ—¥æ™‚ |
| **Phase 2æ‹¡å¼µ** |||||
| `isEmergencyEscalated` | Boolean | false | âŒ | âœ… | ç·Šæ€¥ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| `escalatedBy` | String? | null | âœ… | âŒ | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œè€… |
| `escalatedDate` | DateTime? | null | âœ… | âŒ | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ—¥æ™‚ |
| `escalationReason` | String? | null | âœ… | âŒ | ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç†ç”± |
| `projectLevel` | String? | null | âœ… | âœ… | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¬ãƒ™ãƒ« |
| `approvalStatus` | String | "pending" | âŒ | âœ… | æ‰¿èªçŠ¶æ…‹ |
| `currentApprover` | String? | null | âœ… | âŒ | ç¾åœ¨ã®æ‰¿èªè€… |
| `facilityId` | String? | null | âœ… | âœ… | æ–½è¨­IDï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰ |
| `facilityName` | String? | null | âœ… | âŒ | æ–½è¨­åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰ |

**è©•ä¾¡**: âœ… **å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®Ÿè£…æ¸ˆã¿**

---

### 2. ProjectTeamMemberãƒ†ãƒ¼ãƒ–ãƒ«
**ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `prisma/schema.prisma` (lines 1866-1883)

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | NULLè¨±å¯ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ | èª¬æ˜ |
|-----------|---|------------|---------|-----------|------|
| `id` | String | cuid() | âŒ | PRIMARY | ãƒ¡ãƒ³ãƒãƒ¼ID |
| `projectId` | String | - | âŒ | âœ… | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| `userId` | String | - | âŒ | âœ… | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `role` | String | "member" | âŒ | âœ… | å½¹å‰² |
| `joinedAt` | DateTime | now() | âŒ | âŒ | å‚åŠ æ—¥æ™‚ |
| `leftAt` | DateTime? | null | âœ… | âœ… | é€€å‡ºæ—¥æ™‚ |
| `createdAt` | DateTime | now() | âŒ | âŒ | ä½œæˆæ—¥æ™‚ |
| `updatedAt` | DateTime | - | âŒ | âŒ | æ›´æ–°æ—¥æ™‚ |

**è©•ä¾¡**: âœ… **å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å®Ÿè£…æ¸ˆã¿**

---

### 3. ProjectApprovalãƒ†ãƒ¼ãƒ–ãƒ«
| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ | èª¬æ˜ |
|-----------|---|-----------|------|
| `id` | String | PRIMARY | æ‰¿èªID |
| `projectId` | String | âœ… | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| `requesterId` | String | âŒ | ãƒªã‚¯ã‚¨ã‚¹ã‚¿ãƒ¼ |
| `approverId` | String | âœ… | æ‰¿èªè€… |
| `approverLevel` | String | âŒ | æ‰¿èªè€…ãƒ¬ãƒ™ãƒ« |
| `status` | String | âœ… | æ‰¿èªçŠ¶æ…‹ |
| `comment` | String? | âŒ | ã‚³ãƒ¡ãƒ³ãƒˆ |
| `approvedAt` | DateTime? | âŒ | æ‰¿èªæ—¥æ™‚ |
| `createdAt` | DateTime | âŒ | ä½œæˆæ—¥æ™‚ |

**è©•ä¾¡**: âœ… **Phase 2ã§ä½¿ç”¨ä¸­**

---

### 4. ProjectLevelHistoryãƒ†ãƒ¼ãƒ–ãƒ«
| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ | èª¬æ˜ |
|-----------|---|-----------|------|
| `id` | String | PRIMARY | å±¥æ­´ID |
| `projectId` | String | âœ… | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| `previousLevel` | String? | âŒ | å¤‰æ›´å‰ãƒ¬ãƒ™ãƒ« |
| `newLevel` | String | âŒ | å¤‰æ›´å¾Œãƒ¬ãƒ™ãƒ« |
| `changedBy` | String? | âŒ | å¤‰æ›´è€… |
| `reason` | String? | âŒ | å¤‰æ›´ç†ç”± |
| `changedAt` | DateTime | âŒ | å¤‰æ›´æ—¥æ™‚ |

**è©•ä¾¡**: âœ… **Phase 2ã§ä½¿ç”¨ä¸­**

---

### 5. EmergencyDeactivationãƒ†ãƒ¼ãƒ–ãƒ«
| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ | èª¬æ˜ |
|-----------|---|-----------|------|
| `id` | String | PRIMARY | è§£é™¤ID |
| `projectId` | String | âœ… | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| `deescalatedBy` | String | âŒ | è§£é™¤è€… |
| `reason` | String? | âŒ | è§£é™¤ç†ç”± |
| `deescalatedAt` | DateTime | âŒ | è§£é™¤æ—¥æ™‚ |

**è©•ä¾¡**: âœ… **Phase 2ã§ä½¿ç”¨ä¸­**

---

### 6. ProjectSummaryãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆPhase 3ãƒ»æœªå®Ÿè£…ï¼‰
| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å | å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ | èª¬æ˜ |
|-----------|---|------------|-----------|------|
| `id` | String | cuid() | PRIMARY | ã‚µãƒãƒªãƒ¼ID |
| `projectId` | String | - | âœ… UNIQUE | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID |
| `totalParticipants` | Int | 0 | âœ… | ç·å‚åŠ è€…æ•° |
| `activeParticipants` | Int | 0 | âœ… | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–å‚åŠ è€…æ•° |
| `ownerCount` | Int | 0 | âŒ | ã‚ªãƒ¼ãƒŠãƒ¼æ•° |
| `memberCount` | Int | 0 | âŒ | ãƒ¡ãƒ³ãƒãƒ¼æ•° |
| `lastCalculatedAt` | DateTime | now() | âŒ | æœ€çµ‚é›†è¨ˆæ—¥æ™‚ |
| `updatedAt` | DateTime | - | âŒ | æ›´æ–°æ—¥æ™‚ |

**è©•ä¾¡**: ğŸŸ¡ **ã‚¹ã‚­ãƒ¼ãƒå®šç¾©æ¸ˆã¿ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å¾…ã¡**

---

## ğŸ”— åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIé€£æº

### éƒ¨ç½²ãƒã‚¹ã‚¿API
**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/v2/departments`
**çŠ¶æ…‹**: âœ… åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´å®Ÿè£…æ¸ˆã¿

| é …ç›® | è©³ç´° |
|------|------|
| **èªè¨¼** | X-API-Key ãƒ˜ãƒƒãƒ€ãƒ¼ |
| **Rate Limit** | 100 req/min/IP |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥** | 24æ™‚é–“ï¼ˆVoiceDriveå´ï¼‰ |
| **ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰** | departmentId, departmentName, facilityId, facilityName, facilityCode, levelç­‰ |
| **VoiceDriveå´å®Ÿè£…** | MedicalSystemService.getFacilitiesFromDepartments() |

---

## âœ… å®Ÿè£…å®Œäº†åº¦ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: åŸºæœ¬æ©Ÿèƒ½ï¼ˆâœ… 100%å®Œäº†ï¼‰
- [x] Projectãƒ†ãƒ¼ãƒ–ãƒ«ç¢ºèª
- [x] ProjectTeamMemberãƒ†ãƒ¼ãƒ–ãƒ«ç¢ºèª
- [x] ProjectListService.tså®Ÿè£…
- [x] ProjectRoleService.tså®Ÿè£…
- [x] MedicalSystemService.tså®Ÿè£…
- [x] ProjectListPage.tsxå®Ÿè£…
- [x] æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½å®Ÿè£…
- [x] çµ±è¨ˆã‚µãƒãƒªãƒ¼å®Ÿè£…
- [x] åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIçµ±åˆ

### Phase 2: ãƒ¬ãƒ™ãƒ«ãƒ»æ‰¿èªæ©Ÿèƒ½ï¼ˆâœ… 100%å®Œäº†ï¼‰
- [x] Projectãƒ†ãƒ¼ãƒ–ãƒ«æ‹¡å¼µãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
- [x] ProjectLevelEngine.tså®Ÿè£…
- [x] ProjectApprovalService.tså®Ÿè£…
- [x] ProjectEscalationService.tså®Ÿè£…
- [x] ProjectListPage.tsxæ‹¡å¼µï¼ˆãƒ¬ãƒ™ãƒ«ãƒ»æ‰¿èªè¡¨ç¤ºï¼‰

### Phase 3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆğŸŸ¡ 20%å®Œäº†ï¼‰
- [x] ProjectSummaryãƒ†ãƒ¼ãƒ–ãƒ«ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
- [ ] ProjectSummaryãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- [ ] æ—¥æ¬¡ãƒãƒƒãƒå®Ÿè£…
- [ ] ProjectListServiceæœ€é©åŒ–

---

## ğŸ“ schema.prismaæ›´æ–°ã®å¿…è¦æ€§

**çµè«–**: âŒ **æ›´æ–°ä¸è¦**

å…¨ã¦ã®å¿…è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ—¢ã«å­˜åœ¨ã—ã¦ãŠã‚Šã€schema.prismaã®æ›´æ–°ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚

Phase 3å®Ÿè£…æ™‚ã«ProjectSummaryãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¯æ—¢ã«å®Œäº†ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. [Projects_DBè¦ä»¶åˆ†æ_20251026.md](./Projects_DBè¦ä»¶åˆ†æ_20251026.md) - DBè¦ä»¶åˆ†æ
2. [ProjectListPage_DBè¦ä»¶åˆ†æ_20251026.md](./ProjectListPage_DBè¦ä»¶åˆ†æ_20251026.md) - è­°é¡Œãƒ¢ãƒ¼ãƒ‰åˆ†æï¼ˆå‚è€ƒï¼‰
3. [ProjectListPage_åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœ_20251026.md](./ProjectListPage_åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç¢ºèªçµæœ_20251026.md) - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ APIç¢ºèª
4. [ProjectListPage_Phase2å®Ÿè£…å®Œäº†å ±å‘Š_20251026.md](./ProjectListPage_Phase2å®Ÿè£…å®Œäº†å ±å‘Š_20251026.md) - Phase 2å®Ÿè£…å ±å‘Š
5. [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md](./ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹å®šç¾©æ›¸_20251008.md) - ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»

---

**æ–‡æ›¸çµ‚äº†**

æœ€çµ‚æ›´æ–°: 2025å¹´10æœˆ26æ—¥
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 1.0
æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼: Phase 3å®Ÿè£…é–‹å§‹æ™‚
