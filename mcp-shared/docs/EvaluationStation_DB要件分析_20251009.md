# VoiceDrive è©•ä¾¡ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³DBè¦ä»¶åˆ†æ
**ä½œæˆæ—¥**: 2025å¹´10æœˆ9æ—¥
**å¯¾è±¡æ©Ÿèƒ½**: è©•ä¾¡ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆV3è©•ä¾¡é€šçŸ¥ãƒ»ç•°è­°ç”³ç«‹ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡ï¼‰
**åˆ†æç¯„å›²**: EvaluationStation, EvaluationNotificationPage, AppealV3, FeedbackInterview

---

## ğŸ“‹ ç›®æ¬¡
1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [V3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#v3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
3. [è©•ä¾¡é€šçŸ¥ãƒ•ãƒ­ãƒ¼](#è©•ä¾¡é€šçŸ¥ãƒ•ãƒ­ãƒ¼)
4. [ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹](#ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹)
5. [ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ](#ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ)
6. [APIè¨­è¨ˆ](#apiè¨­è¨ˆ)
7. [å®Ÿè£…å„ªå…ˆåº¦](#å®Ÿè£…å„ªå…ˆåº¦)

---

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### è©•ä¾¡ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®å½¹å‰²
VoiceDriveã®è©•ä¾¡ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€åŒ»ç™‚è·å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰è©•ä¾¡çµæœé€šçŸ¥ã‚’å—ã‘å–ã‚Šã€è·å“¡ãŒ **è©•ä¾¡ç¢ºèªãƒ»ç•°è­°ç”³ç«‹ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡äºˆç´„** ã‚’ä¸€å…ƒç®¡ç†ã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½
1. **V3è©•ä¾¡çµæœé€šçŸ¥å—ä¿¡**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰WebhookçµŒç”±ã§è©•ä¾¡çµæœã‚’å—ä¿¡ãƒ»è¡¨ç¤º
2. **3è»¸è©•ä¾¡è¡¨ç¤º**: æ–½è¨­å†…è©•ä¾¡ãƒ»æ³•äººå†…è©•ä¾¡ãƒ»ç·åˆè©•ä¾¡ã®3è»¸ã‚°ãƒ¬ãƒ¼ãƒ‰è¡¨ç¤º
3. **ç•°è­°ç”³ç«‹**: è©•ä¾¡çµæœã«å¯¾ã™ã‚‹ç•°è­°ç”³ç«‹ï¼ˆæœŸé™14æ—¥ä»¥å†…ï¼‰
4. **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡äºˆç´„**: è©•ä¾¡ã«ã¤ã„ã¦ä¸Šå¸ã¨é¢è«‡äºˆç´„
5. **è©•ä¾¡å±¥æ­´è¿½è·¡**: éå»ã®è©•ä¾¡ãƒ»ç”³ç«‹å±¥æ­´ã®é–²è¦§
6. **é€šçŸ¥è¨­å®š**: ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ãƒ»ç· åˆ‡ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼é€šçŸ¥ç®¡ç†

### è©•ä¾¡å¯¾è±¡è€…
- **Level 1-3**: ä¸€èˆ¬è·å“¡ãƒ»ä¸»ä»»ï¼ˆè©•ä¾¡å¯¾è±¡ï¼‰
- **Level 4ä»¥ä¸Š**: éƒ¨é•·ãƒ»å‰¯é™¢é•·ãƒ»é™¢é•·ï¼ˆç®¡ç†è·è©•ä¾¡åˆ¶åº¦ã€è©•ä¾¡ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å¯¾è±¡å¤–ï¼‰

---

## V3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### 100ç‚¹æº€ç‚¹åˆ¶ãƒ»7æ®µéšã‚°ãƒ¬ãƒ¼ãƒ‰

| ã‚°ãƒ¬ãƒ¼ãƒ‰ | ç‚¹æ•°ç¯„å›² | èª¬æ˜ |
|----------|----------|------|
| **S** | 95-100ç‚¹ | æ¥µã‚ã¦å„ªç§€ |
| **A+** | 90-94ç‚¹ | å„ªç§€ |
| **A** | 85-89ç‚¹ | è‰¯å¥½ï¼ˆæ–½è¨­æ¨™æº–ä»¥ä¸Šï¼‰ |
| **B+** | 80-84ç‚¹ | æ¨™æº–ä»¥ä¸Š |
| **B** | 75-79ç‚¹ | æ¨™æº– |
| **C** | 70-74ç‚¹ | ã‚„ã‚„æ”¹å–„ãŒå¿…è¦ |
| **D** | 0-69ç‚¹ | æ”¹å–„ãŒå¿…è¦ |

### 3è»¸è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ 

```typescript
// 3è»¸è©•ä¾¡ã®æ§‹æˆ
interface TripleGradeEvaluation {
  facilityGrade: string;      // æ–½è¨­å†…è©•ä¾¡ (S, A, B, C, D ã®5æ®µéš)
  corporateGrade: string;     // æ³•äººå†…è©•ä¾¡ (S, A, B, C, D ã®5æ®µéš)
  overallGrade: string;       // ç·åˆè©•ä¾¡ (S, A+, A, B+, B, C, D ã®7æ®µéš)
  overallScore: number;       // ç·åˆè©•ä¾¡ç‚¹æ•° (0-100ç‚¹)
}
```

#### æ–½è¨­å†…è©•ä¾¡ (Facility Grade)
- **ç›®çš„**: åŒã˜æ–½è¨­ï¼ˆç—…é™¢ï¼‰å†…ã§ã®ç›¸å¯¾è©•ä¾¡
- **åŸºæº–**: æ–½è¨­å†…ã®åŒè·ç¨®ãƒ»åŒãƒ¬ãƒ™ãƒ«è·å“¡ã¨ã®æ¯”è¼ƒ
- **ç¯„å›²**: S, A, B, C, D ã®5æ®µéš
- **ç”¨é€”**: åŒåƒšã¨ã®æ¯”è¼ƒã€éƒ¨ç½²å†…é †ä½ä»˜ã‘

#### æ³•äººå†…è©•ä¾¡ (Corporate Grade)
- **ç›®çš„**: æ³•äººå…¨ä½“ï¼ˆè¤‡æ•°æ–½è¨­å«ã‚€ï¼‰ã§ã®ç›¸å¯¾è©•ä¾¡
- **åŸºæº–**: æ³•äººå…¨ä½“ã®åŒè·ç¨®ãƒ»åŒãƒ¬ãƒ™ãƒ«è·å“¡ã¨ã®æ¯”è¼ƒ
- **ç¯„å›²**: S, A, B, C, D ã®5æ®µéš
- **ç”¨é€”**: æ³•äººå†…ã®äººäº‹é…ç½®ã€æ˜‡é€²åˆ¤æ–­

#### ç·åˆè©•ä¾¡ (Overall Grade)
- **ç›®çš„**: æ–½è¨­å†…è©•ä¾¡ãƒ»æ³•äººå†…è©•ä¾¡ã‚’çµ±åˆã—ãŸæœ€çµ‚è©•ä¾¡
- **è¨ˆç®—**: æ–½è¨­å†…40% + æ³•äººå†…30% + çµ¶å¯¾è©•ä¾¡30%
- **ç¯„å›²**: S, A+, A, B+, B, C, D ã®7æ®µéšï¼ˆã‚ˆã‚Šç´°ã‹ã„è©•ä¾¡ï¼‰
- **ç”¨é€”**: æ˜‡çµ¦ãƒ»è³ä¸ãƒ»ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹ã®åˆ¤æ–­

---

## è©•ä¾¡é€šçŸ¥ãƒ•ãƒ­ãƒ¼

### Phase 1: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰è©•ä¾¡é€šçŸ¥é€ä¿¡

```mermaid
graph TD
    A[åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ : è©•ä¾¡é–‹ç¤ºå‡¦ç†] --> B[Webhooké€ä¿¡]
    B --> C[VoiceDrive: è©•ä¾¡é€šçŸ¥å—ä¿¡API]
    C --> D{ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³}
    D -->|æˆåŠŸ| E[EvaluationNotificationãƒ†ãƒ¼ãƒ–ãƒ«ä¿å­˜]
    D -->|å¤±æ•—| F[ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ä¿å­˜]
    E --> G[è·å“¡ã¸ã®é€šçŸ¥é€ä¿¡]
    G --> H[ãƒ¡ãƒ¼ãƒ«é€šçŸ¥]
    G --> I[ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥]
    G --> J[ã‚¢ãƒ—ãƒªå†…é€šçŸ¥]
```

### Phase 2: è·å“¡ã«ã‚ˆã‚‹è©•ä¾¡ç¢ºèªãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

```mermaid
graph TD
    A[è·å“¡: è©•ä¾¡ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³é–²è¦§] --> B{è©•ä¾¡å†…å®¹ç¢ºèª}
    B -->|ç´å¾—| C[å®Œäº†ï¼ˆä½•ã‚‚ã—ãªã„ï¼‰]
    B -->|è©³ã—ãèããŸã„| D[ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡äºˆç´„]
    B -->|ç•°è­°ã‚ã‚Š| E[ç•°è­°ç”³ç«‹]

    D --> F[InterviewStationã¸é·ç§»]
    F --> G[é¢è«‡äºˆç´„å®Œäº†]

    E --> H{ç•°è­°ç”³ç«‹æ›¸ä½œæˆ}
    H --> I[è¨¼æ‹ æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰]
    I --> J[ç•°è­°ç”³ç«‹é€ä¿¡]
    J --> K[åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸Webhooké€šçŸ¥]
    K --> L[ç•°è­°å¯©æŸ»é–‹å§‹]
```

### Phase 3: ç•°è­°ç”³ç«‹å¯©æŸ»ãƒ»å›ç­”

```mermaid
graph TD
    A[åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ : ç•°è­°ç”³ç«‹å—ç†] --> B[å¯©æŸ»æ‹…å½“è€…ã‚¢ã‚µã‚¤ãƒ³]
    B --> C[å¯©æŸ»ãƒ»èª¿æŸ»]
    C --> D{å¯©æŸ»çµæœ}
    D -->|èªå®¹| E[è©•ä¾¡ä¿®æ­£]
    D -->|ä¸€éƒ¨èªå®¹| F[è©•ä¾¡ä¸€éƒ¨ä¿®æ­£]
    D -->|æ£„å´| G[è©•ä¾¡æ®ãˆç½®ã]

    E --> H[VoiceDriveã¸Webhooké€šçŸ¥]
    F --> H
    G --> H

    H --> I[è·å“¡ã¸ã®çµæœé€šçŸ¥]
    I --> J[ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥]
```

---

## ãƒ‡ãƒ¼ã‚¿ç®¡ç†è²¬ä»»åˆ†ç•Œç‚¹

### VoiceDriveç®¡è½„ï¼ˆA: å®Œå…¨ç®¡ç†ï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | ç†ç”± |
|----------|------------|------|
| **è©•ä¾¡é€šçŸ¥ç®¡ç†** | EvaluationNotificationï¼ˆå—ä¿¡ã—ãŸè©•ä¾¡é€šçŸ¥ï¼‰ | VoiceDriveç‹¬è‡ªã®é€šçŸ¥ç®¡ç†æ©Ÿèƒ½ |
| **ç•°è­°ç”³ç«‹** | Appealï¼ˆç•°è­°ç”³ç«‹æ›¸ãƒ»è¨¼æ‹ ãƒ»å¯©æŸ»çŠ¶æ³ï¼‰ | VoiceDriveç‹¬è‡ªã®ç”³ç«‹ç®¡ç† |
| **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡** | Interviewï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡äºˆç´„ï¼‰ | InterviewStationã¨çµ±åˆç®¡ç† |
| **é€šçŸ¥è¨­å®š** | NotificationSettingsï¼ˆå€‹äººé€šçŸ¥è¨­å®šï¼‰ | VoiceDriveç‹¬è‡ªã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š |
| **è©•ä¾¡é–²è¦§å±¥æ­´** | EvaluationViewLogï¼ˆã„ã¤èª°ãŒç¢ºèªã—ãŸã‹ï¼‰ | VoiceDriveç‹¬è‡ªã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° |

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ç®¡è½„ï¼ˆB: å‚ç…§ã®ã¿ï¼‰

| ã‚«ãƒ†ã‚´ãƒª | ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | å–å¾—æ–¹æ³• |
|----------|------------|----------|
| **è©•ä¾¡ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿** | Evaluationï¼ˆå®Ÿéš›ã®è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ï¼‰ | WebhookçµŒç”±ã§å—ä¿¡ãƒ»ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚° |
| **è·å“¡åŸºæœ¬æƒ…å ±** | Employeeï¼ˆè·å“¡IDãƒ»æ°åãƒ»éƒ¨ç½²ï¼‰ | GET /api/employees/:employeeId |
| **è©•ä¾¡æœŸé–“æƒ…å ±** | EvaluationPeriodï¼ˆè©•ä¾¡æœŸé–“ãƒ»ç· åˆ‡ï¼‰ | Webhooké€šçŸ¥ã«å«ã‚€ |

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸ã®é€šçŸ¥ï¼ˆC: Webhooké€ä¿¡ï¼‰

| ã‚¤ãƒ™ãƒ³ãƒˆ | ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ãƒ‡ãƒ¼ã‚¿å†…å®¹ |
|----------|-----------|-----------|
| **ç•°è­°ç”³ç«‹å—ç†** | è·å“¡ãŒç•°è­°ç”³ç«‹é€ä¿¡æ™‚ | ç”³ç«‹IDã€è·å“¡IDã€ç”³ç«‹ç†ç”±ã€è¨¼æ‹ URL |
| **ç•°è­°ç”³ç«‹å–ã‚Šä¸‹ã’** | è·å“¡ãŒç”³ç«‹å–ã‚Šä¸‹ã’æ™‚ | ç”³ç«‹IDã€å–ã‚Šä¸‹ã’ç†ç”± |
| **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡äºˆç´„** | è·å“¡ãŒé¢è«‡äºˆç´„æ™‚ | äºˆç´„IDã€è·å“¡IDã€å¸Œæœ›æ—¥æ™‚ã€è©•ä¾¡ID |

---

## ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ

### 1. EvaluationNotificationï¼ˆè©•ä¾¡é€šçŸ¥ï¼‰

```prisma
model EvaluationNotification {
  id                    String    @id @default(cuid())

  // åŸºæœ¬æƒ…å ±
  employeeId            String    // User.employeeIdï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ IDï¼‰
  employeeName          String    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  evaluationPeriod      String    // "2025å¹´å†¬æœŸè©•ä¾¡"
  evaluationPeriodId    String?   // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®è©•ä¾¡æœŸé–“ID

  // V3è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ï¼ˆ3è»¸è©•ä¾¡ï¼‰
  facilityGrade         String?   // æ–½è¨­å†…è©•ä¾¡ (S, A, B, C, D)
  corporateGrade        String?   // æ³•äººå†…è©•ä¾¡ (S, A, B, C, D)
  overallGrade          String    // ç·åˆè©•ä¾¡ (S, A+, A, B+, B, C, D)
  overallScore          Int       // ç·åˆè©•ä¾¡ç‚¹æ•° (0-100ç‚¹)

  // æ—§è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ äº’æ›ï¼ˆå»ƒæ­¢äºˆå®šï¼‰
  evaluationScore       Int?      // æ—§ã‚¹ã‚³ã‚¢
  evaluationGrade       String?   // æ—§ã‚°ãƒ¬ãƒ¼ãƒ‰

  // æ—¥æ™‚æƒ…å ±
  disclosureDate        DateTime  // è©•ä¾¡é–‹ç¤ºæ—¥
  appealDeadline        DateTime  // ç•°è­°ç”³ç«‹æœŸé™ï¼ˆé€šå¸¸é–‹ç¤ºã‹ã‚‰14æ—¥å¾Œï¼‰

  // é€šçŸ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  notificationStatus    String    @default("pending") // pending | sent | delivered | read | failed
  notificationSentAt    DateTime? // é€šçŸ¥é€ä¿¡æ—¥æ™‚
  notificationReadAt    DateTime? // é€šçŸ¥æ—¢èª­æ—¥æ™‚
  hasUnreadNotification Boolean   @default(true)

  // ç•°è­°ç”³ç«‹é–¢é€£
  appealSubmitted       Boolean   @default(false)
  appealId              String?   // ç•°è­°ç”³ç«‹IDï¼ˆAppeal.idã¸ã®å‚ç…§ï¼‰

  // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é€£æº
  medicalSystemUrl      String?   // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®è©•ä¾¡è©³ç´°ç”»é¢URL
  additionalMessage     String?   // è¿½åŠ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  appeal                Appeal?   @relation(fields: [appealId], references: [id])
  viewLogs              EvaluationViewLog[]

  @@index([employeeId])
  @@index([evaluationPeriod])
  @@index([notificationStatus])
  @@index([appealDeadline])
}
```

### 2. Appealï¼ˆç•°è­°ç”³ç«‹ï¼‰

```prisma
model Appeal {
  id                    String    @id @default(cuid())

  // ç”³ç«‹è€…æƒ…å ±
  employeeId            String    // User.employeeId
  employeeName          String    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  departmentId          String?   // éƒ¨ç½²ID
  jobCategory           String?   // è·ç¨®

  // è©•ä¾¡æƒ…å ±
  evaluationPeriod      String    // "2025å¹´å†¬æœŸè©•ä¾¡"
  evaluationPeriodId    String    // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®è©•ä¾¡æœŸé–“ID
  originalScore         Int       // å…ƒã®è©•ä¾¡ç‚¹æ•°
  requestedScore        Int?      // å¸Œæœ›ã™ã‚‹è©•ä¾¡ç‚¹æ•°ï¼ˆä»»æ„ï¼‰

  // ç”³ç«‹å†…å®¹
  appealCategory        String    // CALCULATION_ERROR | ACHIEVEMENT_OVERSIGHT | CRITERIA_MISINTERPRETATION | OTHER
  appealReason          String    // ç•°è­°ç”³ç«‹ç†ç”±ï¼ˆè©³ç´°èª¬æ˜ï¼‰
  specificPoints        Json      // å…·ä½“çš„ãªæŒ‡æ‘˜ç‚¹ï¼ˆé…åˆ—ï¼‰
  evidenceDocuments     Json      // è¨¼æ‹ æ›¸é¡URLï¼ˆé…åˆ—ï¼‰
  desiredOutcome        String    // å¸Œæœ›ã™ã‚‹çµæœ

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status                String    @default("draft") // draft | submitted | under_review | approved | partially_approved | rejected | withdrawn
  urgencyLevel          String    @default("medium") // low | medium | high | urgent

  // å¯©æŸ»æƒ…å ±
  reviewedBy            String?   // å¯©æŸ»æ‹…å½“è€…ID
  reviewedAt            DateTime? // å¯©æŸ»é–‹å§‹æ—¥æ™‚
  respondedAt           DateTime? // å›ç­”æ—¥æ™‚
  reviewComments        String?   // å¯©æŸ»ã‚³ãƒ¡ãƒ³ãƒˆ
  finalScore            Int?      // æœ€çµ‚è©•ä¾¡ç‚¹æ•°ï¼ˆä¿®æ­£å¾Œï¼‰

  // é€£çµ¡æ–¹æ³•
  preferredContactMethod String   @default("email") // email | phone | in_person

  // åŒæ„äº‹é …
  acknowledgement       Boolean   @default(false) // ç”³ç«‹ã®ãƒ«ãƒ¼ãƒ«ã«åŒæ„ã—ãŸã‹

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  submittedAt           DateTime? // æå‡ºæ—¥æ™‚
  expectedResponseDate  DateTime? // å›ç­”äºˆå®šæ—¥
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  notifications         EvaluationNotification[]
  appealHistory         AppealHistory[]

  @@index([employeeId])
  @@index([evaluationPeriodId])
  @@index([status])
  @@index([submittedAt])
}
```

### 3. AppealHistoryï¼ˆç•°è­°ç”³ç«‹å±¥æ­´ï¼‰

```prisma
model AppealHistory {
  id          String    @id @default(cuid())
  appealId    String

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³æƒ…å ±
  action      String    // submitted | under_review | additional_info_requested | approved | rejected | withdrawn
  performedBy String    // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œè€…ID
  performedByName String? // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  comments    String?   // ã‚³ãƒ¡ãƒ³ãƒˆ
  metadata    Json?     // è¿½åŠ æƒ…å ±

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  performedAt DateTime  @default(now())

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  appeal      Appeal    @relation(fields: [appealId], references: [id], onDelete: Cascade)

  @@index([appealId])
  @@index([performedAt])
}
```

### 4. EvaluationViewLogï¼ˆè©•ä¾¡é–²è¦§ãƒ­ã‚°ï¼‰

```prisma
model EvaluationViewLog {
  id                  String    @id @default(cuid())
  notificationId      String

  // é–²è¦§æƒ…å ±
  employeeId          String    // é–²è¦§ã—ãŸè·å“¡
  viewedAt            DateTime  @default(now())
  viewDuration        Int?      // é–²è¦§æ™‚é–“ï¼ˆç§’ï¼‰
  deviceType          String?   // mobile | tablet | desktop
  ipAddress           String?

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  notification        EvaluationNotification @relation(fields: [notificationId], references: [id], onDelete: Cascade)

  @@index([notificationId])
  @@index([employeeId])
  @@index([viewedAt])
}
```

### 5. NotificationSettingsï¼ˆé€šçŸ¥è¨­å®šï¼‰

```prisma
model NotificationSettings {
  id                        String    @id @default(cuid())
  employeeId                String    @unique // User.employeeId

  // é€šçŸ¥ãƒãƒ£ãƒãƒ«
  enableEmailNotifications  Boolean   @default(true)
  enablePushNotifications   Boolean   @default(true)
  enableSmsNotifications    Boolean   @default(false)

  // ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š
  reminderDaysBefore        Int       @default(3) // ç•°è­°ç”³ç«‹ç· åˆ‡å‰ã®é€šçŸ¥æ—¥æ•°
  autoMarkAsRead            Boolean   @default(false)

  // é€šçŸ¥æ™‚é–“å¸¯
  preferredNotificationTime String?   // "09:00-17:00"
  quietHoursEnabled         Boolean   @default(false)
  quietHoursStart           String?   // "22:00"
  quietHoursEnd             String?   // "08:00"

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt                 DateTime  @default(now())
  updatedAt                 DateTime  @updatedAt

  @@index([employeeId])
}
```

### 6. EvaluationNotificationTemplateï¼ˆé€šçŸ¥ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰

```prisma
model EvaluationNotificationTemplate {
  id              String    @id @default(cuid())

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæƒ…å ±
  templateType    String    @unique // evaluation_disclosure | appeal_deadline_reminder | appeal_submitted_confirmation | appeal_response_available
  title           String    // é€šçŸ¥ã‚¿ã‚¤ãƒˆãƒ«
  bodyTemplate    String    // æœ¬æ–‡ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼ˆå¤‰æ•°ç½®æ›å¯èƒ½ï¼‰
  actionText      String    // ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
  actionUrlPattern String   // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³URLï¼ˆå¤‰æ•°ç½®æ›å¯èƒ½ï¼‰

  // å„ªå…ˆåº¦ãƒ»è¨­å®š
  priority        String    @default("medium") // low | medium | high | urgent
  isActive        Boolean   @default(true)

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([templateType])
}
```

---

## APIè¨­è¨ˆ

### VoiceDriveå†…éƒ¨APIï¼ˆ5å€‹ï¼‰

#### 1. POST /api/evaluation-notifications
**è©•ä¾¡é€šçŸ¥ä¸€è¦§å–å¾—**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "employeeId": "OH-NS-2024-001",
  "filter": {
    "evaluationPeriod": "2025å¹´å†¬æœŸè©•ä¾¡",
    "notificationStatus": ["unread", "read"],
    "scoreRange": { "min": 80, "max": 100 }
  }
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "notifications": [
    {
      "id": "EVAL_1A2B3C",
      "employeeName": "å±±ç”°å¤ªéƒ",
      "evaluationPeriod": "2025å¹´å†¬æœŸè©•ä¾¡",
      "facilityGrade": "A",
      "corporateGrade": "B",
      "overallGrade": "A+",
      "overallScore": 87,
      "disclosureDate": "2025-03-15",
      "appealDeadline": "2025-03-29",
      "notificationStatus": "delivered",
      "appealStatus": "none",
      "daysUntilDeadline": 14,
      "isUrgent": false
    }
  ],
  "total": 1
}
```

#### 2. GET /api/evaluation-notifications/:notificationId
**ç‰¹å®šã®è©•ä¾¡é€šçŸ¥å–å¾—**

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "notification": {
    "id": "EVAL_1A2B3C",
    "employeeId": "OH-NS-2024-001",
    "employeeName": "å±±ç”°å¤ªéƒ",
    "evaluationPeriod": "2025å¹´å†¬æœŸè©•ä¾¡",
    "facilityGrade": "A",
    "corporateGrade": "B",
    "overallGrade": "A+",
    "overallScore": 87,
    "disclosureDate": "2025-03-15T00:00:00Z",
    "appealDeadline": "2025-03-29T23:59:59Z",
    "notificationStatus": "read",
    "notificationReadAt": "2025-03-16T10:30:00Z",
    "medicalSystemUrl": "https://medical-system.example.com/evaluations/12345"
  }
}
```

#### 3. PATCH /api/evaluation-notifications/:notificationId/read
**è©•ä¾¡é€šçŸ¥ã‚’æ—¢èª­ã«ã™ã‚‹**

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "notificationId": "EVAL_1A2B3C",
  "readAt": "2025-03-16T10:30:00Z"
}
```

#### 4. POST /api/appeals
**ç•°è­°ç”³ç«‹æå‡º**

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```json
{
  "employeeId": "OH-NS-2024-001",
  "employeeName": "å±±ç”°å¤ªéƒ",
  "evaluationPeriod": "2025å¹´å†¬æœŸè©•ä¾¡",
  "evaluationPeriodId": "eval_2025_winter",
  "appealCategory": "ACHIEVEMENT_OVERSIGHT",
  "appealReason": "ä»¥ä¸‹ã®æˆæœãŒè©•ä¾¡ã«åæ˜ ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼š\n1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆAã®ãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦...",
  "specificPoints": [
    "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆAã®æˆåŠŸï¼ˆå£²ä¸Š20%å¢—ï¼‰",
    "æ–°äººæ•™è‚²ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ç«‹ã¡ä¸Šã’",
    "æ‚£è€…æº€è¶³åº¦èª¿æŸ»ã§éƒ¨ç½²1ä½"
  ],
  "originalScore": 82,
  "requestedScore": 88,
  "evidenceDocuments": [
    "https://storage.example.com/evidence/project_a_report.pdf",
    "https://storage.example.com/evidence/patient_satisfaction.pdf"
  ],
  "desiredOutcome": "ä¸Šè¨˜æˆæœã‚’è©•ä¾¡ã«åæ˜ ã—ã€é©æ­£ãªè©•ä¾¡ç‚¹æ•°ã¸ã®ä¿®æ­£ã‚’å¸Œæœ›ã—ã¾ã™",
  "preferredContactMethod": "email",
  "acknowledgement": true
}
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "appealId": "APPEAL_XYZ123",
  "message": "ç•°è­°ç”³ç«‹ã‚’å—ç†ã—ã¾ã—ãŸ",
  "expectedResponseDate": "2025-04-05T23:59:59Z",
  "submittedAt": "2025-03-20T14:30:00Z"
}
```

#### 5. GET /api/appeals/:appealId/status
**ç•°è­°ç”³ç«‹çŠ¶æ³ç¢ºèª**

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "success": true,
  "appeal": {
    "id": "APPEAL_XYZ123",
    "status": "under_review",
    "submittedAt": "2025-03-20T14:30:00Z",
    "reviewedBy": "è©•ä¾¡å¯©æŸ»å§”å“¡ä¼š",
    "expectedResponseDate": "2025-04-05T23:59:59Z",
    "history": [
      {
        "action": "submitted",
        "performedAt": "2025-03-20T14:30:00Z",
        "comments": "ç•°è­°ç”³ç«‹ã‚’å—ç†ã—ã¾ã—ãŸ"
      },
      {
        "action": "under_review",
        "performedAt": "2025-03-22T09:00:00Z",
        "comments": "å¯©æŸ»ã‚’é–‹å§‹ã—ã¾ã—ãŸ",
        "performedBy": "è©•ä¾¡å¯©æŸ»å§”å“¡ä¼š"
      }
    ]
  }
}
```

### åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é€£æºAPIï¼ˆ1å€‹ï¼‰

#### API-ES-M-1: GET /api/employees/:employeeId
**è·å“¡åŸºæœ¬æƒ…å ±å–å¾—**

â€» PostManagementã¨å…±é€šã®APIã‚’ä½¿ç”¨

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:
```
GET /api/employees/OH-NS-2024-001
```

ãƒ¬ã‚¹ãƒãƒ³ã‚¹:
```json
{
  "employeeId": "OH-NS-2024-001",
  "name": "å±±ç”°å¤ªéƒ",
  "department": "çœ‹è­·éƒ¨",
  "permissionLevel": 3,
  "position": "çœ‹è­·å¸«",
  "email": "yamada@example.com"
}
```

**Phase**: 1
**å„ªå…ˆåº¦**: é«˜
**è¦‹ç©å·¥æ•°**: å…±æœ‰æ¸ˆã¿ï¼ˆPostManagementå‚ç…§ï¼‰
**è¦‹ç©é‡‘é¡**: å…±æœ‰æ¸ˆã¿

### Webhookï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ â†’VoiceDrive: 1å€‹ï¼‰

#### WH-ES-M-1: POST /webhook/evaluation-disclosure
**è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ â†’VoiceDriveï¼‰**

åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰VoiceDriveã¸ã®é€ä¿¡:
```json
{
  "event": "evaluation_disclosure",
  "timestamp": "2025-03-15T10:00:00Z",
  "data": {
    "employeeId": "OH-NS-2024-001",
    "employeeName": "å±±ç”°å¤ªéƒ",
    "evaluationPeriod": "2025å¹´å†¬æœŸè©•ä¾¡",
    "evaluationPeriodId": "eval_2025_winter",
    "facilityGrade": "A",
    "corporateGrade": "B",
    "overallGrade": "A+",
    "overallScore": 87,
    "disclosureDate": "2025-03-15",
    "appealDeadline": "2025-03-29",
    "medicalSystemUrl": "https://medical-system.example.com/evaluations/12345",
    "additionalMessage": "ç·åˆè©•ä¾¡A+ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™"
  },
  "signature": "HMAC-SHA256-SIGNATURE-HERE"
}
```

VoiceDriveã‹ã‚‰ã®å¿œç­”:
```json
{
  "success": true,
  "notificationId": "EVAL_1A2B3C",
  "message": "è©•ä¾¡é€šçŸ¥ã‚’å—ç†ã—ã¾ã—ãŸ",
  "deliveryMethods": {
    "email": true,
    "push": true,
    "sms": false
  },
  "estimatedDeliveryTime": "2025-03-15T10:01:00Z"
}
```

**Phase**: 1
**å„ªå…ˆåº¦**: æœ€é«˜
**è¦‹ç©å·¥æ•°**: 3æ—¥
**è¦‹ç©é‡‘é¡**: Â¥240,000

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **HMAC-SHA256ç½²å**: å…±æœ‰ç§˜å¯†éµã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’ç½²å
- **ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ¤œè¨¼**: 5åˆ†ä»¥å†…ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿å—ã‘ä»˜ã‘
- **IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‚µãƒ¼ãƒãƒ¼IPã®ã¿è¨±å¯

### Webhookï¼ˆVoiceDriveâ†’åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ : 2å€‹ï¼‰

#### WH-ES-V-1: POST /webhook/appeal-submitted
**ç•°è­°ç”³ç«‹å—ç†é€šçŸ¥ï¼ˆVoiceDriveâ†’åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼‰**

VoiceDriveã‹ã‚‰åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸ã®é€ä¿¡:
```json
{
  "event": "appeal_submitted",
  "timestamp": "2025-03-20T14:30:00Z",
  "data": {
    "appealId": "APPEAL_XYZ123",
    "employeeId": "OH-NS-2024-001",
    "employeeName": "å±±ç”°å¤ªéƒ",
    "evaluationPeriodId": "eval_2025_winter",
    "appealCategory": "ACHIEVEMENT_OVERSIGHT",
    "appealReason": "ä»¥ä¸‹ã®æˆæœãŒè©•ä¾¡ã«åæ˜ ã•ã‚Œã¦ã„ã¾ã›ã‚“...",
    "specificPoints": ["point1", "point2"],
    "evidenceDocuments": [
      "https://voicedrive-storage.example.com/evidence/doc1.pdf"
    ],
    "originalScore": 82,
    "requestedScore": 88,
    "submittedAt": "2025-03-20T14:30:00Z"
  },
  "signature": "HMAC-SHA256-SIGNATURE-HERE"
}
```

åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®å¿œç­”:
```json
{
  "success": true,
  "medicalSystemAppealId": "MS-APPEAL-001",
  "assignedReviewer": "è©•ä¾¡å¯©æŸ»å§”å“¡ä¼š",
  "expectedResponseDate": "2025-04-05T23:59:59Z"
}
```

**Phase**: 2
**å„ªå…ˆåº¦**: é«˜
**è¦‹ç©å·¥æ•°**: 4æ—¥
**è¦‹ç©é‡‘é¡**: Â¥320,000

#### WH-ES-V-2: POST /webhook/appeal-withdrawn
**ç•°è­°ç”³ç«‹å–ã‚Šä¸‹ã’é€šçŸ¥ï¼ˆVoiceDriveâ†’åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ï¼‰**

VoiceDriveã‹ã‚‰åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸ã®é€ä¿¡:
```json
{
  "event": "appeal_withdrawn",
  "timestamp": "2025-03-25T16:00:00Z",
  "data": {
    "appealId": "APPEAL_XYZ123",
    "employeeId": "OH-NS-2024-001",
    "withdrawalReason": "è©•ä¾¡ã«ã¤ã„ã¦ä¸Šå¸ã¨é¢è«‡ã—ã€ç´å¾—ã—ã¾ã—ãŸ",
    "withdrawnAt": "2025-03-25T16:00:00Z"
  },
  "signature": "HMAC-SHA256-SIGNATURE-HERE"
}
```

**Phase**: 2
**å„ªå…ˆåº¦**: ä¸­
**è¦‹ç©å·¥æ•°**: 2æ—¥
**è¦‹ç©é‡‘é¡**: Â¥160,000

---

## å®Ÿè£…å„ªå…ˆåº¦

### Phase 1: è©•ä¾¡é€šçŸ¥å—ä¿¡ãƒ»è¡¨ç¤ºï¼ˆ2é€±é–“ï¼‰- Â¥800,000

#### Week 1-2: åŸºæœ¬è©•ä¾¡é€šçŸ¥æ©Ÿèƒ½
1. **EvaluationNotificationãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ** (2æ—¥)
   - 3è»¸è©•ä¾¡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ 
   - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

2. **Webhookå—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£…** (3æ—¥)
   - WH-ES-M-1: è©•ä¾¡çµæœé–‹ç¤ºé€šçŸ¥
   - HMACç½²åæ¤œè¨¼
   - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

3. **EvaluationStation UIå®Ÿè£…** (3æ—¥)
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆè©•ä¾¡ã‚µãƒãƒªãƒ¼ï¼‰
   - è©•ä¾¡å±¥æ­´ã‚¿ãƒ–
   - 3è»¸ã‚°ãƒ¬ãƒ¼ãƒ‰è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

4. **é€šçŸ¥é€ä¿¡æ©Ÿèƒ½** (2æ—¥)
   - ãƒ¡ãƒ¼ãƒ«é€šçŸ¥
   - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
   - ç· åˆ‡ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

5. **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ Webhookå®Ÿè£…** (4æ—¥)
   - WH-ES-M-1ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæº–å‚™
   - ãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰

**æˆæœç‰©**:
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰è©•ä¾¡é€šçŸ¥å—ä¿¡å¯èƒ½
- è©•ä¾¡ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§é€šçŸ¥ç¢ºèªå¯èƒ½
- ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥å‹•ä½œ

### Phase 2: ç•°è­°ç”³ç«‹ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡ï¼ˆ2é€±é–“ï¼‰- Â¥1,040,000

#### Week 3-4: ç•°è­°ç”³ç«‹ãƒ»é¢è«‡äºˆç´„
1. **Appealãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»AppealHistoryãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ** (2æ—¥)
   - ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

2. **ç•°è­°ç”³ç«‹ãƒ•ã‚©ãƒ¼ãƒ å®Ÿè£…** (3æ—¥)
   - AppealFormV3ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
   - è¨¼æ‹ æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

3. **ç•°è­°ç”³ç«‹APIå®Ÿè£…** (2æ—¥)
   - POST /api/appeals
   - GET /api/appeals/:appealId/status

4. **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡äºˆç´„çµ±åˆ** (2æ—¥)
   - InterviewStationã¨ã®é€£æº
   - è©•ä¾¡ãƒ‡ãƒ¼ã‚¿å—ã‘æ¸¡ã—

5. **åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ Webhookå®Ÿè£…** (5æ—¥)
   - WH-ES-V-1: ç•°è­°ç”³ç«‹å—ç†é€šçŸ¥
   - WH-ES-V-2: ç•°è­°ç”³ç«‹å–ã‚Šä¸‹ã’é€šçŸ¥
   - ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°

**æˆæœç‰©**:
- ç•°è­°ç”³ç«‹æ©Ÿèƒ½å‹•ä½œ
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸ç”³ç«‹é€šçŸ¥
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡äºˆç´„å¯èƒ½

### Phase 3: é€šçŸ¥è¨­å®šãƒ»é«˜åº¦æ©Ÿèƒ½ï¼ˆ1é€±é–“ï¼‰- Â¥400,000

#### Week 5: é€šçŸ¥è¨­å®šãƒ»åˆ†ææ©Ÿèƒ½
1. **NotificationSettingsãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ** (1æ—¥)
   - å€‹äººé€šçŸ¥è¨­å®šç®¡ç†

2. **EvaluationViewLogãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ** (1æ—¥)
   - é–²è¦§ãƒ­ã‚°è¨˜éŒ²

3. **é€šçŸ¥è¨­å®šUIå®Ÿè£…** (2æ—¥)
   - ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ãƒ»SMSè¨­å®š
   - ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š

4. **çµ±è¨ˆãƒ»åˆ†ææ©Ÿèƒ½** (1æ—¥)
   - é€šçŸ¥åˆ°é”ç‡åˆ†æ
   - ç•°è­°ç”³ç«‹ç‡åˆ†æ

5. **ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°** (2æ—¥)
   - çµ±åˆãƒ†ã‚¹ãƒˆ
   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

**æˆæœç‰©**:
- é€šçŸ¥è¨­å®šæ©Ÿèƒ½å®Œæˆ
- é–²è¦§ãƒ­ã‚°è¨˜éŒ²
- çµ±è¨ˆåˆ†æå¯èƒ½

---

## è¦‹ç©ã‚‚ã‚Šã‚µãƒãƒªãƒ¼

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | å†…å®¹ | VoiceDriveå·¥æ•° | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å·¥æ•° | åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é‡‘é¡ |
|---------|------|------|----------------|-----------------|----------------|
| **Phase 1** | 2é€±é–“ | è©•ä¾¡é€šçŸ¥å—ä¿¡ãƒ»è¡¨ç¤º | 10æ—¥ | 4æ—¥ | Â¥320,000 (Webhookå—ä¿¡) |
| **Phase 2** | 2é€±é–“ | ç•°è­°ç”³ç«‹ãƒ»é¢è«‡ | 12æ—¥ | 6æ—¥ | Â¥480,000 (2 Webhooks) |
| **Phase 3** | 1é€±é–“ | é€šçŸ¥è¨­å®šãƒ»åˆ†æ | 7æ—¥ | 0æ—¥ | Â¥0 |
| **åˆè¨ˆ** | **5é€±é–“** | **å…¨æ©Ÿèƒ½** | **29æ—¥** | **10æ—¥** | **Â¥800,000** |

**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ å¿…è¦å·¥æ•°**: 10æ—¥ï¼ˆ1 Webhookå—ä¿¡ + 2 Webhooksé€ä¿¡ï¼‰
**åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ è¦‹ç©é‡‘é¡**: Â¥800,000
**VoiceDriveãƒãƒ¼ãƒ å·¥æ•°**: 29æ—¥

**ç‰¹è¨˜äº‹é …**:
- API-ES-M-1ï¼ˆè·å“¡æƒ…å ±APIï¼‰ã¯PostManagementã¨å…±ç”¨ï¼ˆè¿½åŠ è²»ç”¨ãªã—ï¼‰
- è©•ä¾¡é€šçŸ¥Webhookã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®è©•ä¾¡é–‹ç¤ºå‡¦ç†ã¨å¯†æ¥ã«é€£æº
- ç•°è­°ç”³ç«‹Webhookã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã®å¯©æŸ»ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¨é€£æºãŒå¿…è¦

---

## ç¢ºèªäº‹é …ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¸ï¼‰

### æŠ€è¡“çš„ç¢ºèª

#### 1. V3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…çŠ¶æ³
**Q**: V3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ100ç‚¹æº€ç‚¹åˆ¶ãƒ»3è»¸è©•ä¾¡ï¼‰ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§æ—¢ã«ç¨¼åƒã—ã¦ã„ã¾ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- 100ç‚¹æº€ç‚¹åˆ¶ã®è©•ä¾¡è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- 3è»¸è©•ä¾¡ï¼ˆæ–½è¨­å†…ãƒ»æ³•äººå†…ãƒ»ç·åˆï¼‰ã®ç®—å‡ºæ–¹æ³•
- 7æ®µéšã‚°ãƒ¬ãƒ¼ãƒ‰ï¼ˆS, A+, A, B+, B, C, Dï¼‰ã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

#### 2. è©•ä¾¡é–‹ç¤ºå‡¦ç†
**Q**: è©•ä¾¡é–‹ç¤ºæ™‚ã®Webhooké€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¯è‡ªå‹•åŒ–ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- è©•ä¾¡é–‹ç¤ºãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«è‡ªå‹•é€ä¿¡ã‹
- ãƒãƒƒãƒå‡¦ç†ã§ã®ä¸€æ‹¬é€ä¿¡ã‹
- ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ã®æœ‰ç„¡

#### 3. ç•°è­°ç”³ç«‹å¯©æŸ»ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
**Q**: åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã«ç•°è­°ç”³ç«‹ã®å¯©æŸ»ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯å­˜åœ¨ã—ã¾ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- å¯©æŸ»æ‹…å½“è€…ã®ã‚¢ã‚µã‚¤ãƒ³æ–¹æ³•
- å¯©æŸ»æœŸé™ã®è¨­å®šï¼ˆæ¨™æº–14æ—¥ä»¥å†…ãªã©ï¼‰
- å¯©æŸ»çµæœã®VoiceDriveã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ–¹æ³•

#### 4. è©•ä¾¡æœŸé–“ID
**Q**: è©•ä¾¡æœŸé–“ã‚’ä¸€æ„ã«è­˜åˆ¥ã™ã‚‹IDã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- evaluationPeriodIdã®å‘½åè¦å‰‡
- è¤‡æ•°å¹´åº¦ãƒ»è¤‡æ•°æ–½è¨­ã®ç®¡ç†æ–¹æ³•

#### 5. è¨¼æ‹ æ›¸é¡ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
**Q**: ç•°è­°ç”³ç«‹ã®è¨¼æ‹ æ›¸é¡ï¼ˆPDFç­‰ï¼‰ã¯ã©ã“ã«ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- VoiceDriveå´ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã—ã¦URLã‚’é€ä¿¡ã‹
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ å´ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»ä¿å­˜ã‚’ç®¡ç†ã™ã‚‹ã‹

### é‹ç”¨çš„ç¢ºèª

#### 6. è©•ä¾¡é–‹ç¤ºã‚¿ã‚¤ãƒŸãƒ³ã‚°
**Q**: è©•ä¾¡é–‹ç¤ºã¯å¹´ä½•å›ã€ã„ã¤å®Ÿæ–½ã•ã‚Œã¾ã™ã‹ï¼Ÿ
**æ¤œè¨å†…å®¹**:
- å†¬æœŸè©•ä¾¡ãƒ»å¤æœŸè©•ä¾¡ã®é–‹ç¤ºæ—¥
- ä¸€æ–‰é–‹ç¤ºã‹æ®µéšçš„é–‹ç¤ºã‹
- æ™‚é–“å¸¯ï¼ˆæ¥­å‹™æ™‚é–“å†…ã‹æ™‚é–“å¤–ã‹ï¼‰

#### 7. ç•°è­°ç”³ç«‹æœŸé™
**Q**: ç•°è­°ç”³ç«‹æœŸé™ã¯14æ—¥é–“ã§ç¢ºå®šã§ã™ã‹ï¼Ÿ
**æ¤œè¨å†…å®¹**:
- æ¨™æº–æœŸé™ï¼ˆé–‹ç¤ºã‹ã‚‰14æ—¥å¾Œï¼‰
- å»¶é•·ç”³è«‹ã®æœ‰ç„¡
- æœŸé™è¶…éå¾Œã®ç”³ç«‹å—ä»˜å¯å¦

#### 8. ç•°è­°ç”³ç«‹å¯©æŸ»çµæœã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
**Q**: å¯©æŸ»çµæœã¯VoiceDriveã«ã©ã®ã‚ˆã†ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã—ã¾ã™ã‹ï¼Ÿ
**æ¤œè¨å†…å®¹**:
- Webhooké€šçŸ¥ã§è‡ªå‹•é€ä¿¡ã‹
- æ‰‹å‹•ã§VoiceDriveã«ç™»éŒ²ã‹
- ä¿®æ­£å¾Œã®è©•ä¾¡ç‚¹æ•°ã®åæ˜ æ–¹æ³•

#### 9. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡ã®èª¿æ•´
**Q**: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é¢è«‡äºˆç´„ã¯åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¨VoiceDriveã®ã©ã¡ã‚‰ã§ç®¡ç†ã—ã¾ã™ã‹ï¼Ÿ
**æ¤œè¨å†…å®¹**:
- VoiceDriveã§äºˆç´„ â†’ åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¸é€šçŸ¥ã®ã¿
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†
- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼çµ±åˆã®è¦å¦

#### 10. é€šçŸ¥ãƒãƒ£ãƒãƒ«
**Q**: ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ä»¥å¤–ã®é€šçŸ¥ãƒãƒ£ãƒãƒ«ï¼ˆSMSç­‰ï¼‰ã¯å¿…è¦ã§ã™ã‹ï¼Ÿ
**æ¤œè¨å†…å®¹**:
- SMSé€šçŸ¥ã®è¦å¦ï¼ˆç·Šæ€¥æ™‚ã®ã¿ç­‰ï¼‰
- è·å“¡ã®é€£çµ¡å…ˆæƒ…å ±ã®ç®¡ç†ä¸»ä½“
- é€šçŸ¥å¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

### ãƒ‡ãƒ¼ã‚¿é€£æºç¢ºèª

#### 11. è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã®ä¿æŒæœŸé–“
**Q**: VoiceDriveã§ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã—ãŸè©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã®ä¿æŒæœŸé–“ã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- å…¨å±¥æ­´ã‚’æ°¸ç¶šä¿å­˜ã‹
- ç›´è¿‘3å¹´åˆ†ã®ã¿ä¿å­˜ã‹
- åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã¨ã®åŒæœŸæ–¹æ³•

#### 12. è·å“¡é€€è·æ™‚ã®å‡¦ç†
**Q**: è·å“¡é€€è·æ™‚ã€VoiceDriveã®è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã¯ã©ã†å‡¦ç†ã—ã¾ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- é€€è·å¾Œã‚‚é–²è¦§å¯èƒ½ã«ã™ã‚‹ã‹
- å³åº§ã«å‰Šé™¤ã™ã‚‹ã‹
- åŒ¿ååŒ–ã—ã¦ä¿å­˜ã™ã‚‹ã‹

#### 13. ç•°è­°ç”³ç«‹ã®åŒ¿åæ€§
**Q**: ç•°è­°ç”³ç«‹ã¯åŒ¿åã§æå‡ºå¯èƒ½ã§ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- å®Ÿåã®ã¿ã‹
- åŒ¿åã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æœ‰ç„¡
- å¯©æŸ»æ‹…å½“è€…ã¸ã®æƒ…å ±é–‹ç¤ºç¯„å›²

#### 14. è©•ä¾¡ä¿®æ­£æ™‚ã®é€šçŸ¥
**Q**: ç•°è­°ç”³ç«‹ãŒèªå®¹ã•ã‚Œã¦è©•ä¾¡ãŒä¿®æ­£ã•ã‚ŒãŸå ´åˆã€VoiceDriveã¸ã®é€šçŸ¥ã¯å¿…è¦ã§ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- è‡ªå‹•é€šçŸ¥ã®è¦å¦
- ä¿®æ­£å†…å®¹ã®è©³ç´°è¡¨ç¤º
- ä¿®æ­£å±¥æ­´ã®ä¿å­˜

#### 15. ã‚°ãƒ¬ãƒ¼ãƒ‰å¢ƒç•Œå€¤ã®èª¿æ•´
**Q**: ã‚°ãƒ¬ãƒ¼ãƒ‰åˆ¤å®šã®å¢ƒç•Œå€¤ï¼ˆä¾‹: A+ã¯90-94ç‚¹ï¼‰ã¯å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ
**ç¢ºèªå†…å®¹**:
- å›ºå®šå€¤ã‹å‹•çš„èª¿æ•´ã‹
- å¹´åº¦ã”ã¨ã®å¤‰æ›´ã®æœ‰ç„¡
- VoiceDriveã¸ã®è¨­å®šåŒæœŸæ–¹æ³•

---

## æ·»ä»˜è³‡æ–™

### A. 3è»¸è©•ä¾¡è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯è©³ç´°
ï¼ˆEvaluationNotificationService.ts ã®è©•ä¾¡è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å›³ï¼‰

### B. ç•°è­°ç”³ç«‹ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆè©³ç´°
ï¼ˆAppealServiceV3 ã®ç”³ç«‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å›³ï¼‰

### C. Webhooké€£æºã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³
ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ  â‡” VoiceDrive ã®é€šä¿¡ãƒ•ãƒ­ãƒ¼ï¼‰

### D. V3ã‚°ãƒ¬ãƒ¼ãƒ‰è¡¨ç¤ºãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰
ï¼ˆGradeDisplay, TripleGradeDisplay ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜ï¼‰

---

**ä½œæˆè€…**: Claude (AI Assistant)
**ãƒ¬ãƒ“ãƒ¥ãƒ¼**: VoiceDriveé–‹ç™ºãƒãƒ¼ãƒ 
**æ‰¿èª**: åŒ»ç™‚è·å“¡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ 

**æ¬¡å›ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**:
1. åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ãƒãƒ¼ãƒ ã¸ç¢ºèªäº‹é …å›ç­”ä¾é ¼
2. Phase 1å®Ÿè£…è¨ˆç”»è©³ç´°åŒ–
3. Webhooké€£æºãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰
