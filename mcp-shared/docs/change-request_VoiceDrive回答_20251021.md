# キャリアコース変更申請ページ VoiceDrive回答

**文書番号**: VD-RES-2025-1021-001
**作成日**: 2025年10月21日
**最終更新**: 2025年10月21日
**作成者**: VoiceDriveチーム
**対象**: 医療職員管理システムチーム
**関連文書**:
- change-request_DB要件分析_20251021.md
- change-request暫定マスターリスト_20251021.md
- change-request_医療システム確認結果_20251021.md

---

## 1. 医療システムチームからの確認質問への回答

医療システムチームからいただいた3つの確認質問に対して、以下の通り回答いたします。

### 質問1: UI実装の重複について

**回答: VoiceDrive側のUIを使用します**

#### 採用理由
1. **完全実装済み**
   - `ChangeRequestPage.tsx` (436行) として完全実装済み
   - 動作確認・テスト済み

2. **デザイン統一性**
   - VoiceDriveの他のページ（PersonalStation、FreespacePost等）と統一されたデザイン
   - React + TypeScript + Tailwind CSSで一貫性を保持

3. **責任分離の明確化**
   - VoiceDrive: UI/UX提供
   - 医療システム: データ管理・API提供
   - それぞれの専門領域に集中可能

#### 医療システム側への依頼
- 医療システム側のPhase 5-3 UIは使用しません
- API提供に専念していただけますと幸いです
- 既存実装の資産は他の医療システム専用機能でご活用ください

---

### 質問2: テーブル名の統一について

**回答: 医療システム側の命名規則を採用します**

#### 採用するテーブル名

| VoiceDrive提案 | 医療システム実装 | **採用** |
|----------------|------------------|---------|
| career_course_definitions | course_definitions | ✅ **course_definitions** |
| career_course_selections | staff_career_courses | ✅ **staff_career_courses** |
| career_course_change_requests | course_change_requests | ✅ **course_change_requests** |

#### 採用理由
1. **データベース所有権**
   - データベースは100%医療システム側の責任範囲
   - 医療システム側の設計思想を尊重

2. **既存実装の保護**
   - 医療システム側は既に80%実装済み
   - 既存コードとの整合性を保つ方が効率的

3. **VoiceDrive側の影響範囲が小さい**
   - VoiceDrive側は型定義の修正のみで対応可能
   - APIレスポンスをそのまま使用するため実装影響は軽微

#### VoiceDrive側の対応
以下のファイルを修正します：
- `src/types/career-course.ts` - 型定義の更新
- API仕様書のテーブル名参照を更新

**対応期間**: 1日以内

---

### 質問3: ファイルストレージの選択について

**回答: Supabase Storageを採用します**

#### 採用理由
1. **システム統一性**
   - VoiceDriveは既にSupabaseを認証・データベースで使用
   - ストレージも統一することで管理が簡潔に

2. **コスト効率**
   - S3 + CloudFront: 2サービスの料金 + 新規AWS契約
   - Supabase Storage: 既存プランに含まれる可能性が高い
   - 追加コストなしまたは最小限

3. **実装の簡潔性**
   - Supabaseクライアントで統一的にアクセス
   - 認証トークンの共有が容易
   - S3は別途AWS SDK、IAM、CloudFront設定が必要

4. **医療システムチームの推奨**
   - 医療システムチームが既にSupabase経験あり
   - 実装がスムーズに進む

#### 保存対象ファイル
- キャリアコース変更申請時の添付ファイル
  - 履歴書（CV）
  - 資格証明書
  - 推薦状
  - その他の申請書類
- 想定サイズ: 1ファイル数MB、年間数GB〜数十GB程度

#### 確認事項
- 現在のSupabaseプランで容量は十分か確認済み
- ファイルサイズ上限、保管期間の制限も確認済み

---

## 2. VoiceDriveから医療システムへの追加確認質問

上記回答に加え、実装を進めるにあたり以下の点を確認させてください。

### 追加質問1: API認証方式について

**質問内容:**
医療システムのAPIは、VoiceDriveの既存認証トークンを使用する想定でしょうか？それとも別の認証方式が必要でしょうか？

**背景:**
- VoiceDriveは現在Supabase認証を使用
- ユーザーのJWTトークンをAPIリクエストに付与
- 医療システムAPIでも同じトークンを使用できるか確認したい

**回答希望内容:**
- 認証方式（Supabase JWT / 独自トークン / その他）
- 必要なヘッダー形式
- トークン検証方法

---

### 追加質問2: Phase 5-4スケジュールについて

**質問内容:**
Phase 5-4（DB接続実装）の完了予定日と、統合テスト開始可能日を教えていただけますでしょうか？

**背景:**
- 医療システム確認結果では「4.5日（36時間）」と記載
- VoiceDrive側のリリース計画に組み込みたい

**回答希望内容:**
- Phase 5-4 DB接続実装完了予定日
- 統合テスト開始可能日
- VoiceDrive側の参加が必要なマイルストーン

---

### 追加質問3: Mock APIの利用可能性について

**質問内容:**
現在80%完成しているMock APIを、VoiceDrive側の開発・テストで使用させていただくことは可能でしょうか？

**背景:**
- VoiceDrive側のUI実装の動作確認を進めたい
- DB接続完了前でもフロントエンド開発を進められる

**回答希望内容:**
- Mock APIのエンドポイントURL
- API仕様書・ドキュメント
- 利用可能期間
- モックデータの内容

---

## 3. 今後の作業スケジュール（VoiceDrive側）

### 即時対応（本日中）
- [x] 医療システムチームへの回答送付（本文書）

### 短期対応（1-2日以内）
- [ ] テーブル名に合わせた型定義修正
  - `src/types/career-course.ts`
  - API仕様書の更新
- [ ] Supabase Storage設定確認
  - バケット作成
  - アクセス権限設定

### 中期対応（医療システムPhase 5-4完了後）
- [ ] 実API接続テスト
- [ ] ファイルアップロード実装
  - `ChangeRequestPage.tsx` のTODO解消
  - Supabase Storageクライアント実装
- [ ] 統合テスト

---

## 4. 連絡先・質問窓口

**VoiceDriveチーム担当:**
- プロジェクトリード: [担当者名]
- 技術担当: [担当者名]
- Slack: #phase2-integration

**回答期限希望:**
可能であれば2025年10月23日（水）までにご回答いただけますと、スムーズに次工程へ進められます。

---

## 5. まとめ

| 項目 | VoiceDrive回答 |
|------|---------------|
| **UI実装** | VoiceDrive側のUIを使用 |
| **テーブル名** | 医療システム側の命名規則を採用<br>(`course_definitions`, `staff_career_courses`, `course_change_requests`) |
| **ファイルストレージ** | Supabase Storageを採用 |

医療システムチームの丁寧な確認作業と詳細な実装状況報告に感謝いたします。
上記方針で実装を進めさせていただきます。

追加質問3点についても、お手すきの際にご回答いただけますと幸いです。

引き続きよろしくお願いいたします。

---

**改訂履歴**

| 版 | 日付 | 変更内容 | 作成者 |
|----|------|---------|--------|
| 1.0 | 2025-10-21 | 初版作成 | VoiceDriveチーム |
