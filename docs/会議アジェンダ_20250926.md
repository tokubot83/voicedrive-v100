# 技術仕様レビュー会議アジェンダ

**日時**: 2025年9月26日（木）10:00-11:00
**参加者**: VoiceDrive開発チーム・医療チーム職員カルテシステム開発担当者
**会議形式**: オンライン（Teams）

## 1. 開会（10:00-10:05）

- 参加者確認
- 本日の目的と流れの確認
- 前回からの進捗共有

## 2. リーダー業務フラグの認識合わせ ✅ （10:05-10:15）

### 確認事項
- **更新頻度**: 年1回の形式的確認で合意
- **3ヶ月レビューは不要**（現場負担軽減）
- 一度認定されたら基本的に継続

### 実装仕様の確定
```typescript
interface NursingLeaderCapability {
  staffId: string;
  canPerformLeaderDuty: boolean;
  certificationDate: Date;        // 初回認定日
  lastReviewDate: Date;           // 最終確認日（年次）
  temporaryRestriction?: {        // 例外的な制限のみ管理
    active: boolean;
    reason: string;
    until?: Date;
  };
}
```

## 3. VoiceDrive側実装コードのレビュー（10:15-10:30）

### レビュー対象
1. **18段階権限システム**
   - `src/permissions/types/PermissionTypes.ts`
   - `src/permissions/config/permissionMetadata.ts`

2. **投票重み計算エンジン**
   - `src/services/HybridVotingCalculator.ts`
   - 3層計算ロジックの確認

3. **議題エスカレーションエンジン**
   - `src/services/ProposalEscalationEngine.ts`
   - 部署規模による動的調整の確認

4. **投票権限マトリックス**
   - `src/services/VotingPermissionMatrix.ts`

### デモ実行
- 統合テストの実行デモ
- 計算結果の妥当性確認

## 4. API仕様の最終確認（10:30-10:40）

### 優先順位の確認

#### 最優先APIエンドポイント
1. **`/api/v1/calculate-level`** - 権限レベル計算（投票の核心）
2. **`/webhook/staff-change`** - スタッフ変更通知（リアルタイム性）

#### 標準優先度
3. `/api/v1/staff/:staffId` - スタッフ情報取得
4. `/api/v1/staff/bulk` - バルク取得

### パフォーマンス要件の合意
- **API応答時間**: 95%ile < 200ms
- **同時接続数**: ピーク時100接続（投票締切前を想定）
- **キャッシュ戦略**:
  - 権限レベル: 10分
  - リーダーフラグ: 24時間
  - 組織構造: 1時間

### エラーハンドリング
- 標準エラーフォーマットの確認
- リトライポリシー（3回、指数バックオフ）

## 5. 10月第1週のテスト計画（10:40-10:50）

### Phase 2 Week 1（10/1-10/4）

#### 統合テスト項目
1. **Day 1 (10/1)**: MCPサーバー疎通確認
   - エンドポイント接続テスト
   - 認証フローテスト

2. **Day 2 (10/2)**: データ同期テスト
   - スタッフマスタ同期
   - 権限レベル計算結果の照合

3. **Day 3 (10/3)**: 負荷テスト
   - 100同時接続シミュレーション
   - API応答時間測定

4. **Day 4 (10/4)**: エンドツーエンドテスト
   - 議題投稿→投票→エスカレーション

### テストデータ
- 小原病院の実データ構造に基づくテストデータ
- 全18レベル+Xのスタッフサンプル
- エッジケースの準備

## 6. 今後のスケジュール確認（10:50-10:55）

### 直近のマイルストーン
- **9/27（金）**: 開発環境接続確認
- **10/1（月）**: Phase 2開始
- **10/3（木）**: 定例会議開始（以降、月・木10:00）
- **10/11（金）**: Phase 2完了予定

### 連絡体制
- **Slack**: #phase2-integration
- **緊急連絡**: 各チームリード直通
- **ドキュメント共有**: GitHub/MCPサーバー

## 7. 質疑応答・その他（10:55-11:00）

### 確認事項
- [ ] 両チームの役割分担明確化
- [ ] ブロッカーの有無確認
- [ ] 次回会議日程（10/3予定）

## 会議後のアクション

### VoiceDriveチーム
1. NursingLeaderCapability実装の最終調整
2. API仕様書v1.0のリリース
3. テストシナリオの詳細化

### 医療チーム
1. APIエンドポイントの実装開始
2. テストデータの準備
3. MCPサーバー設定の確認

---

**議事録作成者**: [担当者名]
**配布先**: 両チーム全メンバー