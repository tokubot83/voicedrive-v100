generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id                   String               @id @default(cuid())
  employeeId           String               @unique
  email                String               @unique
  name                 String
  department           String?
  facilityId           String?
  role                 String?
  avatar               String?
  accountType          String
  permissionLevel      Decimal
  canPerformLeaderDuty Boolean              @default(false)
  professionCategory   String?
  parentId             String?
  budgetApprovalLimit  Float?
  stakeholderCategory  String?
  position             String?
  expertise            Int?
  hierarchyLevel       Int?
  isRetired            Boolean              @default(false)
  retirementDate       DateTime?
  anonymizedId         String?
  experienceYears      Float?
  age                  Int? // ProjectTalentAnalyticsçµ±åˆå®Ÿè£…ï¼ˆ2025-10-12ï¼‰
  generation           String? // ProjectTalentAnalyticsçµ±åˆå®Ÿè£…ï¼ˆ2025-10-12ï¼‰
  ageUpdatedAt         DateTime?            @map("age_updated_at") // ProjectTalentAnalyticsçµ±åˆå®Ÿè£…ï¼ˆ2025-10-12ï¼‰
  createdAt            DateTime             @default(now())
  updatedAt            DateTime             @updatedAt
  lastLoginAt          DateTime?
  loginCount           Int                  @default(0)
  auditLogs            AuditLog[]
  evaluations          Evaluation[]
  feedbackReceived     Feedback[]           @relation("FeedbackReceiver")
  feedbackSent         Feedback[]           @relation("FeedbackSender")
  interviews           Interview[]
  notifications        Notification[]
  projects             Project[]
  surveys              Survey[]
  reportsSent          PostReport[]         @relation("ReportSender")
  reportsReviewed      PostReport[]         @relation("ReportReviewer")
  alertsAcknowledged   PostReportAlert[]    @relation("AlertAcknowledger")
  voteHistory          VoteHistory[]
  activitySummary      UserActivitySummary?
  parent               User?                @relation("UserHierarchy", fields: [parentId], references: [id])
  children             User[]               @relation("UserHierarchy")

  // ComposeFormçµ±åˆå®Ÿè£…ï¼ˆ2025-10-09ï¼‰
  posts               Post[]        @relation("PostAuthor")
  postVotes           Vote[]        @relation("PostVote")
  comments            Comment[]     @relation("CommentAuthor")
  pollsCreated        Poll[]        @relation("PollCreator")
  pollVotes           PollVote[]    @relation("PollVoter")
  eventsOrganized     Event[]       @relation("EventOrganizer")
  dateVotes           DateVote[]    @relation("DateVoter")
  eventParticipations Participant[] @relation("EventParticipant")

  // TeamLeaderDashboardçµ±åˆå®Ÿè£…ï¼ˆ2025-10-09ï¼‰
  approvalTasksRequested ApprovalTask[] @relation("ApprovalRequester")
  approvalTasksApproved  ApprovalTask[] @relation("ApprovalApprover")

  // CommitteeManagementçµ±åˆå®Ÿè£…ï¼ˆ2025-10-09ï¼‰
  proposedAgendas            ManagementCommitteeAgenda[]  @relation("AgendaProposer")
  chairmanCommittees         CommitteeInfo[]              @relation("CommitteeChairperson")
  committeeMemberships       CommitteeMember[]            @relation("CommitteeMemberUser")
  submissionRequestsSent     CommitteeSubmissionRequest[] @relation("SubmissionRequester")
  submissionRequestsApproved CommitteeSubmissionRequest[] @relation("SubmissionApprover")

  // DecisionMeetingçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
  proposedDecisionAgendas DecisionMeetingAgenda[] @relation("DecisionProposer")
  decidedAgendas          DecisionMeetingAgenda[] @relation("DecisionDecider")

  // VoiceAnalyticsçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
  acknowledgedAlerts AnalyticsAlert[] @relation("AlertAcknowledger")

  // CultureDevelopmentçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
  ownedInitiatives CultureInitiative[] @relation("InitiativeOwner")

  // ExecutiveReportsçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
  generatedReports     GeneratedReport[]     @relation("ReportGenerator")
  reportCustomizations ReportCustomization[] @relation("ReportCustomizer")
  reportAccessLogs     ReportAccessLog[]     @relation("ReportAccessUser")
  boardPresentations   BoardMeetingAgenda[]  @relation("BoardPresenter")
  approvedInsights     StrategicInsight[]    @relation("InsightApprover")

  // BoardPreparationçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
  createdBoardMeetings     BoardMeeting[]                  @relation("BoardMeetingCreator")
  selectedAgendaCandidates BoardAgendaCandidateSelection[] @relation("AgendaSelector")
  createdProposals         ChairmanProposal[]              @relation("ProposalCreator")
  reviewedProposals        ChairmanProposal[]              @relation("ProposalReviewer")

  // CrossFacilityAnalysisçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
  assignedCommonIssues     CrossFacilityCommonIssue[] @relation("CommonIssueAssignee")
  successCasesFromFacility CrossFacilitySuccessCase[] @relation("SuccessCaseFacility")
  approvedSuccessCases     CrossFacilitySuccessCase[] @relation("SuccessCaseApprover")
  replicationsAtFacility   SuccessCaseReplication[]   @relation("ReplicationTargetFacility")
  responsibleReplications  SuccessCaseReplication[]   @relation("ReplicationResponsible")
  approvedOpportunities    StrategicOpportunity[]     @relation("OpportunityApprover")

  // BoardAgendaReviewçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
  reviewedAgendas BoardMeetingAgenda[] @relation("AgendaChairmanReviewer")

  // ProjectApprovalçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
  projectApprovals ProjectApproval[] @relation("ProjectApprover")

  // ProgressDashboardçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
  projectMemberships  ProjectTeamMember[] @relation("ProjectMemberships")
  completedMilestones ProjectMilestone[]  @relation("MilestoneCompletedBy")

  // OrganizationStructureçµ±åˆå®Ÿè£…ï¼ˆ2025-10-12ï¼‰
  votingGroupsAsPrimaryApprover VotingGroup[] @relation("VotingGroupPrimaryApprover")

  // ProjectParticipationRecommendationçµ±åˆå®Ÿè£…ï¼ˆ2025-10-12ï¼‰
  participationStats StaffProjectParticipationStats?
  recommendationLogs ProjectRecommendationLog[]

  // EvaluationNotificationPageçµ±åˆå®Ÿè£…ï¼ˆ2025-10-13ï¼‰
  evaluationNotifications EvaluationNotification[]
  notificationSettings    NotificationSettings?
}

model Notification {
  id             String    @id @default(cuid())
  category       String
  subcategory    String?
  priority       String
  title          String
  content        String
  target         String
  senderId       String
  status         String    @default("pending")
  sentAt         DateTime?
  recipientCount Int       @default(0)
  readCount      Int       @default(0)
  clickCount     Int       @default(0)
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  sender         User      @relation(fields: [senderId], references: [id])
}

model Interview {
  id               String    @id @default(cuid())
  employeeId       String
  category         String
  type             String
  topic            String
  preferredDate    DateTime
  scheduledDate    DateTime?
  actualDate       DateTime?
  duration         Int?
  interviewerId    String?
  interviewerName  String?
  status           String    @default("pending")
  urgencyLevel     String
  result           String?
  notes            String?
  followUpRequired Boolean   @default(false)
  followUpDate     DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  employee         User      @relation(fields: [employeeId], references: [id])
}

model Evaluation {
  id                String    @id @default(cuid())
  employeeId        String
  period            String
  evaluationType    String
  overallScore      Float?
  categoryScores    Json
  selfAssessment    String?
  achievements      Json?
  challenges        Json?
  managerScore      Float?
  managerComments   String?
  peerScores        Json?
  subordinateScores Json?
  hasObjection      Boolean   @default(false)
  objectionReason   String?
  objectionStatus   String?
  objectionResult   String?
  status            String    @default("draft")
  submittedAt       DateTime?
  completedAt       DateTime?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  employee          User      @relation(fields: [employeeId], references: [id])
}

model Survey {
  id             String           @id @default(cuid())
  title          String
  description    String?
  category       String
  createdById    String
  targetAudience String
  deadline       DateTime
  isAnonymous    Boolean          @default(true)
  questions      Json
  responseCount  Int              @default(0)
  completionRate Float?
  averageScore   Float?
  status         String           @default("draft")
  publishedAt    DateTime?
  closedAt       DateTime?
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  createdBy      User             @relation(fields: [createdById], references: [id])
  responses      SurveyResponse[]
}

model SurveyResponse {
  id           String   @id @default(cuid())
  surveyId     String
  respondentId String?
  answers      Json
  score        Float?
  comments     String?
  submittedAt  DateTime @default(now())
  ipAddress    String?
  userAgent    String?
  survey       Survey   @relation(fields: [surveyId], references: [id])
}

model Project {
  id               String    @id @default(cuid())
  title            String
  description      String
  category         String
  proposerId       String
  objectives       Json
  expectedOutcomes Json
  budget           Float?
  timeline         Json?
  status           String    @default("proposed")
  priority         String?
  approvalLevel    Int       @default(0)
  approvedBy       Json?
  rejectionReason  String?
  progressRate     Float     @default(0)
  milestones       Json?
  deliverables     Json?
  actualOutcomes   Json?
  lessonsLearned   String?
  roi              Float?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  startedAt        DateTime?
  completedAt      DateTime?
  proposer         User      @relation(fields: [proposerId], references: [id])
}

model Feedback {
  id          String    @id @default(cuid())
  senderId    String
  receiverId  String
  type        String
  category    String
  content     String
  importance  String
  isAnonymous Boolean   @default(false)
  response    String?
  respondedAt DateTime?
  status      String    @default("sent")
  readAt      DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  receiver    User      @relation("FeedbackReceiver", fields: [receiverId], references: [id])
  sender      User      @relation("FeedbackSender", fields: [senderId], references: [id])
}

model AuditLog {
  id         String   @id @default(cuid())
  userId     String
  action     String
  entityType String
  entityId   String
  oldValues  Json?
  newValues  Json?
  ipAddress  String?
  userAgent  String?
  createdAt  DateTime @default(now())

  // ç·Šæ€¥åœæ­¢å°‚ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆaccount-deactivationçµ±åˆ 2025-10-10ï¼‰
  executorLevel     Float?  @map("executor_level")
  targetUserId      String? @map("target_user_id")
  reason            String?
  isEmergencyAction Boolean @default(false) @map("is_emergency_action")
  syncPending       Boolean @default(false) @map("sync_pending")

  user User @relation(fields: [userId], references: [id])

  @@index([action, isEmergencyAction])
  @@index([targetUserId])
}

model InterviewResult {
  id                  String    @id @default(cuid())
  requestId           String    @unique
  interviewId         String    @unique
  completedAt         DateTime
  duration            Int
  summary             String
  keyPoints           Json
  actionItems         Json
  followUpRequired    Boolean   @default(false)
  followUpDate        DateTime?
  feedbackToEmployee  String
  nextRecommendations Json
  receivedAt          DateTime  @default(now())
  processedAt         DateTime?
  status              String    @default("received")
  errorMessage        String?
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
}

model ComplianceAcknowledgement {
  id                      String    @id @default(cuid())
  reportId                String    @unique
  medicalSystemCaseNumber String    @unique
  anonymousId             String
  severity                String
  category                String
  receivedAt              DateTime
  estimatedResponseTime   String
  requiresImmediateAction Boolean   @default(false)
  currentStatus           String    @default("received")
  nextSteps               String?
  webhookReceivedAt       DateTime  @default(now())
  processed               Boolean   @default(false)
  processedAt             DateTime?
  createdAt               DateTime  @default(now())
  updatedAt               DateTime  @updatedAt

  @@index([reportId])
  @@index([anonymousId])
  @@index([medicalSystemCaseNumber])
}

model DataConsent {
  id                          String    @id @default(cuid())
  userId                      String    @unique
  analyticsConsent            Boolean   @default(false)
  analyticsConsentDate        DateTime?
  personalFeedbackConsent     Boolean   @default(false)
  personalFeedbackConsentDate DateTime?
  revokeDate                  DateTime?
  dataDeletionRequested       Boolean   @default(false)
  dataDeletionRequestedAt     DateTime?
  dataDeletionCompletedAt     DateTime?
  createdAt                   DateTime  @default(now())
  updatedAt                   DateTime  @updatedAt

  @@index([userId])
  @@index([analyticsConsent])
}

// æŠ•ç¨¿é€šå ±ã‚·ã‚¹ãƒ†ãƒ 
model PostReport {
  id           String    @id @default(cuid())
  postId       String
  alertId      String?
  reporterId   String
  reporterName String?
  reportType   String // personal_attack, defamation, harassment, etc.
  description  String?
  status       String    @default("pending") // pending, reviewing, actioned, dismissed
  reviewedBy   String?
  reviewedAt   DateTime?
  actionTaken  String?
  reviewNotes  String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  reporter User             @relation("ReportSender", fields: [reporterId], references: [id])
  reviewer User?            @relation("ReportReviewer", fields: [reviewedBy], references: [id])
  alert    PostReportAlert? @relation(fields: [alertId], references: [id])

  @@index([postId])
  @@index([reporterId])
  @@index([status])
  @@index([reportType])
  @@index([alertId])
}

// é€šå ±ã‚¢ãƒ©ãƒ¼ãƒˆï¼ˆé–¾å€¤è¶…éæ™‚ã®ç®¡ç†è€…é€šçŸ¥ï¼‰
model PostReportAlert {
  id                 String    @id @default(cuid())
  postId             String    @unique
  severity           String // low, medium, high, critical
  reportCount        Int
  dominantReportType String
  message            String
  acknowledged       Boolean   @default(false)
  acknowledgedBy     String?
  acknowledgedAt     DateTime?
  autoModerated      Boolean   @default(false)
  autoModeratedAt    DateTime?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt

  acknowledger User?        @relation("AlertAcknowledger", fields: [acknowledgedBy], references: [id])
  reports      PostReport[]

  @@index([postId])
  @@index([severity])
  @@index([acknowledged])
}

// Webhooké€šçŸ¥ï¼ˆè·å“¡ã‚«ãƒ«ãƒ†ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®Analyticsãƒãƒƒãƒå‡¦ç†é€šçŸ¥ï¼‰
model WebhookNotification {
  id             String    @id @default(cuid())
  notificationId String    @unique // è·å“¡ã‚«ãƒ«ãƒ†ã‚·ã‚¹ãƒ†ãƒ å´ã®ID
  type           String // success, error, warning, info
  title          String
  message        String
  details        Json? // SuccessDetails ã¾ãŸã¯ ErrorDetails
  accountLevel   Int
  timestamp      DateTime // é€šçŸ¥ç™ºç”Ÿæ™‚åˆ»ï¼ˆè·å“¡ã‚«ãƒ«ãƒ†ã‚·ã‚¹ãƒ†ãƒ å´ï¼‰
  read           Boolean   @default(false)
  readAt         DateTime?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt

  // VoiceAnalyticsçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
  groupAnalytics GroupAnalytics[]

  @@index([notificationId])
  @@index([type])
  @@index([accountLevel])
  @@index([read])
  @@index([timestamp])
}

// æŠ•ç¥¨å±¥æ­´ï¼ˆãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
model VoteHistory {
  id           String   @id @default(cuid())
  userId       String
  postId       String
  voteOption   String // "agree", "disagree", "neutral"
  voteWeight   Float    @default(1.0) // æ¨©é™ãƒ¬ãƒ™ãƒ«ã«ã‚ˆã‚‹é‡ã¿
  votedAt      DateTime @default(now())
  postCategory String? // "æ”¹å–„ææ¡ˆ", "è³ªå•ç›¸è«‡" etc.
  postType     String? // "personal", "department", "organization"
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, postId]) // 1äºº1æŠ•ç¨¿1å›ã®ã¿æŠ•ç¥¨å¯èƒ½
  @@index([userId])
  @@index([postId])
  @@index([votedAt])
}

// ãƒ¦ãƒ¼ã‚¶ãƒ¼æ´»å‹•ã‚µãƒãƒªãƒ¼ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ç”¨ï¼‰
model UserActivitySummary {
  id               String   @id @default(cuid())
  userId           String   @unique
  totalPosts       Int      @default(0)
  totalVotes       Int      @default(0)
  thisMonthVotes   Int      @default(0)
  impactScore      Float    @default(0)
  feedbackReceived Int      @default(0)
  feedbackSent     Int      @default(0)
  projectsProposed Int      @default(0)
  surveysCompleted Int      @default(0)
  loginDays        Int      @default(0)
  lastCalculatedAt DateTime @default(now())
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([impactScore])
}

// ===================================
// ComposeFormçµ±åˆå®Ÿè£…ï¼ˆ2025-10-09ï¼‰
// ===================================

// æŠ•ç¨¿ï¼ˆPostï¼‰- VoiceDriveã®ä¸­æ ¸ãƒ†ãƒ¼ãƒ–ãƒ«
model Post {
  id String @id @default(cuid())

  // åŸºæœ¬æƒ…å ±
  type           String // 'improvement' | 'community' | 'report'
  content        String
  authorId       String
  anonymityLevel String // AnonymityLevel enum
  status         String @default("active") // 'active' | 'archived' | 'deleted'

  // improvementæŠ•ç¨¿å°‚ç”¨
  proposalType String? // 'operational' | 'communication' | 'innovation' | 'strategic'
  priority     String? // 'low' | 'medium' | 'high' | 'urgent'

  // communityæŠ•ç¨¿å°‚ç”¨ï¼ˆãƒ•ãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¹ï¼‰
  freespaceCategory  String? // 'idea_sharing' | 'casual_discussion' | 'event_planning'
  freespaceScope     String? // 'team' | 'department' | 'facility' | 'organization'
  expirationDate     DateTime?
  isExpired          Boolean   @default(false)
  extensionRequested Boolean   @default(false)
  extensionReason    String?

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // è­°é¡Œãƒ¢ãƒ¼ãƒ‰ç”¨ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
  agendaScore Int?    @default(0)
  agendaLevel String? // 'PENDING' | 'DEPT_REVIEW' | 'DEPT_AGENDA' | 'FACILITY_AGENDA'

  // å­£ç¯€æƒ…å ±ï¼ˆã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ç®¡ç†ç”¨ï¼‰
  season String? // 'æ˜¥', 'å¤', 'ç§‹', 'å†¬'

  // ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æƒ…å ±
  moderationStatus String @default("pending") // 'pending' | 'approved' | 'flagged'
  moderationScore  Int? // å»ºè¨­æ€§ã‚¹ã‚³ã‚¢ (0-100)

  // ProjectApprovalçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
  approvalStatus  String?   @default("pending") @map("approval_status")
  // 'pending' | 'approved' | 'rejected' | 'on_hold' | 'team_formation'
  approvedAt      DateTime? @map("approved_at")
  approvedBy      String?   @map("approved_by")
  rejectedAt      DateTime? @map("rejected_at")
  rejectedBy      String?   @map("rejected_by")
  rejectionReason String?   @map("rejection_reason")

  // ProgressDashboardçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
  projectDueDate  DateTime? @map("project_due_date") // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæœŸé™
  projectLevel    String?   @map("project_level") // 'team' | 'department' | 'facility' | 'organization'
  projectProgress Int?      @default(0) @map("project_progress") // é€²æ—ç‡ï¼ˆ0-100ï¼‰

  // ProjectParticipationRecommendationçµ±åˆå®Ÿè£…ï¼ˆ2025-10-12ï¼‰
  requiredSkills    String? @map("required_skills") // JSONæ–‡å­—åˆ—: [{ skillId, skillName, minLevel }]
  projectComplexity String? @map("project_complexity") // 'simple' | 'moderate' | 'complex' | 'advanced'
  targetProfession  String? @map("target_profession") // JSONæ–‡å­—åˆ—: ["çœ‹è­·å¸«", "åŒ»å¸«", "è–¬å‰¤å¸«"]
  targetDepartment  String? @map("target_department") // JSONæ–‡å­—åˆ—: ["å†…ç§‘", "å¤–ç§‘", "äº‹å‹™éƒ¨"]

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  author         User                        @relation("PostAuthor", fields: [authorId], references: [id], onDelete: Cascade)
  votes          Vote[]
  comments       Comment[]
  poll           Poll?
  event          Event?
  relatedAgendas ManagementCommitteeAgenda[] @relation("AgendaRelatedPost")
  approvals      ProjectApproval[]           @relation("PostApprovals")

  // CrossFacilityAnalysisçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
  successCases CrossFacilitySuccessCase[] @relation("SuccessCaseSource")

  // ProgressDashboardçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
  milestones  ProjectMilestone[]  @relation("ProjectMilestones")
  teamMembers ProjectTeamMember[] @relation("ProjectTeamMembers")

  // ProjectParticipationRecommendationçµ±åˆå®Ÿè£…ï¼ˆ2025-10-12ï¼‰
  diversityAnalysis  ProjectDiversityAnalysis?
  recommendationLogs ProjectRecommendationLog[]

  @@index([authorId])
  @@index([type])
  @@index([status])
  @@index([proposalType])
  @@index([freespaceCategory])
  @@index([createdAt])
  @@index([expirationDate])
  @@index([authorId, type, createdAt]) // ProjectTracking: ææ¡ˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé«˜é€Ÿå–å¾—ç”¨ï¼ˆ2025-10-11ï¼‰
  @@index([approvalStatus, createdAt]) // ProjectApproval: æ‰¿èªå¾…ã¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé«˜é€Ÿå–å¾—ç”¨ï¼ˆ2025-10-11ï¼‰
  @@index([approvalStatus]) // ProjectApproval: æ‰¿èªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ç”¨ï¼ˆ2025-10-11ï¼‰
  @@index([type, status, createdAt]) // ProgressDashboard: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§å–å¾—ç”¨ï¼ˆ2025-10-11ï¼‰
  @@index([projectDueDate]) // ProgressDashboard: æœŸé™ã‚½ãƒ¼ãƒˆãƒ»é…å»¶åˆ¤å®šç”¨ï¼ˆ2025-10-11ï¼‰
  @@index([projectLevel]) // ProgressDashboard: ãƒ¬ãƒ™ãƒ«åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç”¨ï¼ˆ2025-10-11ï¼‰
  @@index([projectComplexity]) // ProjectParticipationRecommendation: é›£æ˜“åº¦åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ç”¨ï¼ˆ2025-10-12ï¼‰
}

// æŠ•ç¥¨ï¼ˆVoteï¼‰- æŠ•ç¨¿ã«å¯¾ã™ã‚‹5æ®µéšæŠ•ç¥¨
model Vote {
  id        String   @id @default(cuid())
  postId    String
  userId    String
  option    String // 'strongly-oppose' | 'oppose' | 'neutral' | 'support' | 'strongly-support'
  timestamp DateTime @default(now())

  post Post @relation(fields: [postId], references: [id], onDelete: Cascade)
  user User @relation("PostVote", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([postId, userId])
  @@index([postId])
  @@index([userId])
  @@index([userId, timestamp]) // ProjectTracking: æŠ•ç¥¨ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé«˜é€Ÿå–å¾—ç”¨ï¼ˆ2025-10-11ï¼‰
}

// ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆCommentï¼‰- æŠ•ç¨¿ã«å¯¾ã™ã‚‹ã‚³ãƒ¡ãƒ³ãƒˆ
model Comment {
  id             String   @id @default(cuid())
  postId         String
  parentId       String? // è¿”ä¿¡ã®å ´åˆã€è¦ªã‚³ãƒ¡ãƒ³ãƒˆID
  authorId       String
  content        String
  commentType    String // 'proposal' | 'question' | 'support' | 'concern'
  anonymityLevel String
  privacyLevel   String?
  likes          Int      @default(0)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  post    Post      @relation(fields: [postId], references: [id], onDelete: Cascade)
  parent  Comment?  @relation("CommentReplies", fields: [parentId], references: [id])
  replies Comment[] @relation("CommentReplies")
  author  User      @relation("CommentAuthor", fields: [authorId], references: [id], onDelete: Cascade)

  @@index([postId])
  @@index([parentId])
  @@index([authorId])
}

// æŠ•ç¥¨ï¼ˆPollï¼‰- ãƒ•ãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¹æŠ•ç¥¨æ©Ÿèƒ½
model Poll {
  id            String   @id @default(cuid())
  postId        String   @unique
  question      String
  description   String?
  totalVotes    Int      @default(0)
  deadline      DateTime
  isActive      Boolean  @default(true)
  allowMultiple Boolean  @default(false)
  showResults   String // 'afterVote' | 'afterDeadline' | 'always'
  category      String // 'idea_sharing' | 'casual_discussion' | 'event_planning'
  scope         String // 'team' | 'department' | 'facility' | 'organization'
  createdAt     DateTime @default(now())
  createdById   String

  post      Post         @relation(fields: [postId], references: [id], onDelete: Cascade)
  createdBy User         @relation("PollCreator", fields: [createdById], references: [id])
  options   PollOption[]
  votes     PollVote[]

  @@index([postId])
  @@index([deadline])
  @@index([isActive])
}

// æŠ•ç¥¨é¸æŠè‚¢ï¼ˆPollOptionï¼‰
model PollOption {
  id        String  @id @default(cuid())
  pollId    String
  text      String
  emoji     String?
  votes     Int     @default(0)
  sortOrder Int     @default(0)

  poll      Poll       @relation(fields: [pollId], references: [id], onDelete: Cascade)
  pollVotes PollVote[]

  @@index([pollId])
}

// æŠ•ç¥¨è¨˜éŒ²ï¼ˆPollVoteï¼‰
model PollVote {
  id          String   @id @default(cuid())
  pollId      String
  optionId    String
  userId      String
  isAnonymous Boolean  @default(false)
  timestamp   DateTime @default(now())

  poll   Poll       @relation(fields: [pollId], references: [id], onDelete: Cascade)
  option PollOption @relation(fields: [optionId], references: [id], onDelete: Cascade)
  user   User       @relation("PollVoter", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([pollId, userId, optionId])
  @@index([pollId])
  @@index([userId])
}

// ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆEventï¼‰- ãƒ•ãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆä¼ç”»
model Event {
  id          String @id @default(cuid())
  postId      String @unique
  title       String
  description String
  type        String // EventType enum

  // æ—¥ç¨‹æƒ…å ±
  registrationDeadline DateTime?
  finalDate            DateTime?
  finalStartTime       String?
  finalEndTime         String?

  // å‚åŠ è€…æƒ…å ±
  organizerId     String
  maxParticipants Int?

  // ä¼šå ´ãƒ»è©³ç´°
  venueName    String?
  venueAddress String?
  cost         Float?
  requirements Json? // string[]

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status     String @default("planning") // EventStatus enum
  visibility String // EventVisibility enum

  // æ©Ÿèƒ½è¨­å®š
  allowDateVoting Boolean @default(true)
  allowComments   Boolean @default(true)
  sendReminders   Boolean @default(true)

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  tags      Json? // string[]

  post          Post           @relation(fields: [postId], references: [id], onDelete: Cascade)
  organizer     User           @relation("EventOrganizer", fields: [organizerId], references: [id])
  proposedDates ProposedDate[]
  participants  Participant[]

  @@index([postId])
  @@index([organizerId])
  @@index([status])
}

// ææ¡ˆæ—¥ç¨‹ï¼ˆProposedDateï¼‰
model ProposedDate {
  id         String   @id @default(cuid())
  eventId    String
  date       DateTime
  startTime  String
  endTime    String
  totalVotes Int      @default(0)
  sortOrder  Int      @default(0)

  event Event      @relation(fields: [eventId], references: [id], onDelete: Cascade)
  votes DateVote[]

  @@index([eventId])
}

// æ—¥ç¨‹æŠ•ç¥¨ï¼ˆDateVoteï¼‰
model DateVote {
  id             String   @id @default(cuid())
  proposedDateId String
  userId         String
  response       String // 'available' | 'maybe' | 'unavailable'
  timestamp      DateTime @default(now())

  proposedDate ProposedDate @relation(fields: [proposedDateId], references: [id], onDelete: Cascade)
  user         User         @relation("DateVoter", fields: [userId], references: [id])

  @@unique([proposedDateId, userId])
  @@index([proposedDateId])
  @@index([userId])
}

// ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ è€…ï¼ˆParticipantï¼‰
model Participant {
  id                  String   @id @default(cuid())
  eventId             String
  userId              String
  status              String // 'confirmed' | 'tentative' | 'declined' | 'waitlisted'
  joinedAt            DateTime @default(now())
  note                String?
  dietaryRequirements Json? // string[]

  event Event @relation(fields: [eventId], references: [id], onDelete: Cascade)
  user  User  @relation("EventParticipant", fields: [userId], references: [id])

  @@unique([eventId, userId])
  @@index([eventId])
  @@index([userId])
}

// ===================================
// TeamLeaderDashboardçµ±åˆå®Ÿè£…ï¼ˆ2025-10-09ï¼‰
// ===================================

// æ‰¿èªã‚¿ã‚¹ã‚¯ï¼ˆTeamLeaderDashboardå°‚ç”¨ï¼‰
model ApprovalTask {
  id String @id @default(cuid())

  // ã‚¿ã‚¹ã‚¯åŸºæœ¬æƒ…å ±
  title       String
  description String?
  taskType    String // purchase_request, training_request, leave_request, expense_report, etc.
  amount      Float? // é‡‘é¡ï¼ˆè©²å½“ã™ã‚‹å ´åˆã®ã¿ï¼‰

  // ç”³è«‹è€…æƒ…å ±
  requesterId         String // User.idï¼ˆVoiceDriveå†…éƒ¨IDï¼‰
  requesterName       String? // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨ï¼ˆè¡¨ç¤ºé«˜é€ŸåŒ–ï¼‰
  requesterEmployeeId String? // User.employeeIdï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ IDï¼‰

  // æ‰¿èªè€…æƒ…å ±
  approverId         String? // User.idï¼ˆæ‰¿èªå¾Œã«è¨­å®šï¼‰
  approverName       String? // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨
  approverEmployeeId String? // User.employeeIdï¼ˆæ‰¿èªè€…ã®åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ IDï¼‰

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status   String @default("pending") // pending, approved, rejected, cancelled
  priority String @default("medium") // low, medium, high

  // çµ„ç¹”æƒ…å ±ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç”¨ï¼‰
  department String? // éƒ¨é–€ã‚³ãƒ¼ãƒ‰ï¼ˆä¾‹: "medical_care_ward"ï¼‰
  facilityId String? // æ–½è¨­IDï¼ˆä¾‹: "tategami_hospital"ï¼‰

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  submittedAt DateTime  @default(now()) // ç”³è«‹æ—¥æ™‚
  respondedAt DateTime? // æ‰¿èª/å´ä¸‹æ—¥æ™‚

  // æ‰¿èªã‚³ãƒ¡ãƒ³ãƒˆ
  approverComment String? // æ‰¿èªè€…ã®ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆæ‰¿èªç†ç”±ãƒ»å´ä¸‹ç†ç”±ï¼‰

  // è¿½åŠ æƒ…å ±ï¼ˆJSONå½¢å¼ã§æŸ”è»Ÿã«æ‹¡å¼µå¯èƒ½ï¼‰
  metadata Json? // ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—ã”ã¨ã®è¿½åŠ æƒ…å ±

  // ç›£æŸ»æƒ…å ±
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  requester User  @relation("ApprovalRequester", fields: [requesterId], references: [id], onDelete: Cascade)
  approver  User? @relation("ApprovalApprover", fields: [approverId], references: [id])

  // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼‰
  @@index([requesterId]) // ç”³è«‹è€…ã§æ¤œç´¢
  @@index([approverId]) // æ‰¿èªè€…ã§æ¤œç´¢
  @@index([status]) // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§æ¤œç´¢ï¼ˆpendingä¸€è¦§ãªã©ï¼‰
  @@index([department]) // éƒ¨é–€ã§æ¤œç´¢
  @@index([facilityId]) // æ–½è¨­ã§æ¤œç´¢
  @@index([taskType]) // ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—ã§æ¤œç´¢
  @@index([priority]) // å„ªå…ˆåº¦ã§æ¤œç´¢
  @@index([submittedAt]) // ç”³è«‹æ—¥æ™‚ã§ã‚½ãƒ¼ãƒˆ
  @@index([status, department]) // è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆéƒ¨é–€Ã—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
  @@index([status, approverId]) // è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆæ‰¿èªè€…Ã—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
}

// ===================================
// CommitteeManagementçµ±åˆå®Ÿè£…ï¼ˆ2025-10-09ï¼‰
// ===================================

// é‹å–¶å§”å“¡ä¼šè­°é¡Œ
model ManagementCommitteeAgenda {
  id String @id @default(cuid())

  // åŸºæœ¬æƒ…å ±
  title       String
  agendaType  String // 'committee_proposal' | 'facility_policy' | 'personnel' | 'budget' | 'equipment' | 'other'
  description String
  background  String

  // ææ¡ˆå…ƒæƒ…å ±
  proposedBy         String // ææ¡ˆè€…åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  proposedDate       DateTime
  proposerDepartment String // ææ¡ˆè€…éƒ¨ç½²ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  proposerId         String? // User.id

  // é–¢é€£æŠ•ç¨¿
  relatedPostId    String? // Post.id
  escalationSource String? // 'voting_system' | 'department_proposal' | 'direct_submission'

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status   String @default("pending") // 'pending' | 'in_review' | 'approved' | 'rejected' | 'deferred'
  priority String @default("normal") // 'urgent' | 'high' | 'normal' | 'low'

  // å¯©è­°æƒ…å ±
  scheduledDate    DateTime?
  actualReviewDate DateTime?
  decidedDate      DateTime?
  decidedBy        String? // æ±ºå®šè€…åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  decision         String? // 'approved' | 'rejected' | 'deferred'
  decisionNotes    String?

  // å½±éŸ¿åˆ†æ
  impactDepartments    Json // string[] - éƒ¨ç½²ãƒªã‚¹ãƒˆ
  estimatedCost        Float?
  implementationPeriod String?
  expectedEffect       String

  // ğŸ†• å®Ÿè£…è¿½è·¡ï¼ˆOrganization Analyticsç”¨ï¼‰
  implementationStatus    String?   @default("not_started") @map("implementation_status")
  // 'not_started' | 'in_progress' | 'completed' | 'on_hold' | 'cancelled'
  implementationStartDate DateTime? @map("implementation_start_date")
  implementationEndDate   DateTime? @map("implementation_end_date")
  implementationProgress  Float?    @default(0) @map("implementation_progress") // 0-100
  implementationNotes     String?   @map("implementation_notes")

  // ğŸ†• å½±éŸ¿åº¦è©•ä¾¡ï¼ˆExecutive Reportsç”¨ - 2025-10-10ï¼‰
  impactAssessment String? @map("impact_assessment") // "æ¡ç”¨ç›®æ¨™é”æˆç‡20%å‘ä¸Šè¦‹è¾¼ã¿"
  impactCategory   String? @map("impact_category") // "cost_reduction", "efficiency", "satisfaction"
  estimatedImpact  Float?  @map("estimated_impact") // æ•°å€¤åŒ–ã•ã‚ŒãŸå½±éŸ¿åº¦ï¼ˆ%ï¼‰

  // ãã®ä»–
  tags Json? // string[]

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  proposer                  User?                  @relation("AgendaProposer", fields: [proposerId], references: [id])
  relatedPost               Post?                  @relation("AgendaRelatedPost", fields: [relatedPostId], references: [id])
  escalatedToDecision       DecisionMeetingAgenda? @relation("CommitteeToDecisionEscalation")
  relatedBoardMeetingAgenda BoardMeetingAgenda[]   @relation("BoardRelatedAgenda")

  @@index([proposerId])
  @@index([relatedPostId])
  @@index([implementationStatus])
  @@index([implementationEndDate])
  @@index([impactCategory])
  @@index([status])
  @@index([priority])
  @@index([agendaType])
  @@index([proposedDate])
}

// å§”å“¡ä¼šæƒ…å ±
model CommitteeInfo {
  id String @id @default(cuid())

  // åŸºæœ¬æƒ…å ±
  name        String @unique
  description String

  // çµ±è¨ˆæƒ…å ±
  memberCount   Int @default(0)
  totalMeetings Int @default(0)
  activeAgendas Int @default(0)

  // å§”å“¡é•·æƒ…å ±
  chairperson   String? // å§”å“¡é•·åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  chairpersonId String? // User.id

  // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  nextMeetingDate DateTime?

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  chairpersonUser User?              @relation("CommitteeChairperson", fields: [chairpersonId], references: [id])
  members         CommitteeMember[]
  meetings        CommitteeMeeting[]

  @@index([name])
  @@index([chairpersonId])
}

// å§”å“¡ä¼šãƒ¡ãƒ³ãƒãƒ¼
model CommitteeMember {
  id String @id @default(cuid())

  // å§”å“¡ä¼šæƒ…å ±
  committeeId String

  // è·å“¡æƒ…å ±
  userId     String // User.id
  name       String // è·å“¡åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  department String // éƒ¨ç½²ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  position   String // å½¹è·ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

  // å§”å“¡ä¼šå†…å½¹å‰²
  role String // 'chairman' | 'vice_chairman' | 'secretary' | 'member' | 'observer'

  // ä»»æœŸ
  termStart DateTime
  termEnd   DateTime?
  isActive  Boolean   @default(true)

  // çµ±è¨ˆ
  attendanceRate Float @default(0)

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  committee CommitteeInfo @relation(fields: [committeeId], references: [id], onDelete: Cascade)
  user      User          @relation("CommitteeMemberUser", fields: [userId], references: [id])

  @@unique([committeeId, userId])
  @@index([committeeId])
  @@index([userId])
  @@index([role])
  @@index([isActive])
}

// ä¼šè­°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
model CommitteeMeeting {
  id String @id @default(cuid())

  // å§”å“¡ä¼šæƒ…å ±
  committeeId   String
  committeeName String // å§”å“¡ä¼šåï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

  // æ—¥æ™‚ãƒ»ä¼šå ´
  date  DateTime
  venue String

  // è­°é¡Œæƒ…å ±
  agendaCount Int @default(0)

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status String @default("scheduled") // 'scheduled' | 'in_progress' | 'completed' | 'cancelled'

  // æ‹¡å¼µæƒ…å ±ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
  chairperson    String? // å§”å“¡é•·åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  participants   Json? // string[] - å‚åŠ è€…ãƒªã‚¹ãƒˆ
  meetingMinutes String? // è­°äº‹éŒ²URL

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  committee CommitteeInfo @relation(fields: [committeeId], references: [id], onDelete: Cascade)

  @@index([committeeId])
  @@index([date])
  @@index([status])
}

// æå‡ºæ‰¿èªãƒªã‚¯ã‚¨ã‚¹ãƒˆ
model CommitteeSubmissionRequest {
  id String @id @default(cuid())

  // ææ¡ˆæƒ…å ±
  proposalTitle   String
  targetCommittee String

  // ç”³è«‹è€…æƒ…å ±
  requesterId    String // User.id
  requesterName  String // ç”³è«‹è€…åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  requesterLevel Float // æ¨©é™ãƒ¬ãƒ™ãƒ«ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status String @default("pending") // 'pending' | 'approved' | 'rejected'

  // æ‰¿èªæƒ…å ±
  approvedBy    String? // æ‰¿èªè€…åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  approverId    String? // User.id
  approvedAt    DateTime?
  approvalNotes String?

  // å´ä¸‹æƒ…å ±
  rejectionReason String?

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  requestedAt DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  requester User  @relation("SubmissionRequester", fields: [requesterId], references: [id])
  approver  User? @relation("SubmissionApprover", fields: [approverId], references: [id])

  @@index([requesterId])
  @@index([approverId])
  @@index([status])
  @@index([targetCommittee])
  @@index([requestedAt])
}

// ===================================
// DecisionMeetingçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
// ===================================

// çµŒå–¶ä¼šè­°è­°é¡Œï¼ˆé™¢é•·ãƒ»æ–½è¨­é•·å°‚ç”¨ï¼‰
model DecisionMeetingAgenda {
  id String @id @default(cuid())

  // åŸºæœ¬æƒ…å ±
  title       String
  type        String // 'committee_proposal' | 'facility_policy' | 'personnel' | 'budget' | 'equipment' | 'strategic' | 'other'
  description String
  background  String

  // ææ¡ˆå…ƒæƒ…å ±
  proposedBy         String // ææ¡ˆè€…åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  proposedDate       DateTime
  proposerDepartment String // ææ¡ˆè€…éƒ¨ç½²ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  proposerId         String? // User.id

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status   String @default("pending") // 'pending' | 'in_review' | 'approved' | 'rejected' | 'deferred'
  priority String @default("normal") // 'urgent' | 'high' | 'normal' | 'low'

  // å¯©è­°æƒ…å ±
  scheduledDate DateTime?
  decidedDate   DateTime?
  decidedBy     String? // æ±ºå®šè€…åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  deciderId     String? // User.id
  decision      String? // 'approved' | 'rejected' | 'deferred'
  decisionNotes String?

  // å½±éŸ¿åˆ†æ
  impactDepartments          Json // string[] - å½±éŸ¿éƒ¨ç½²ãƒªã‚¹ãƒˆ
  impactEstimatedCost        Float? // è¦‹ç©ã‚‚ã‚Šè²»ç”¨
  impactImplementationPeriod String? // å®Ÿæ–½æœŸé–“
  impactExpectedEffect       String // æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

  // æ·»ä»˜è³‡æ–™
  attachments Json? // string[] - ãƒ•ã‚¡ã‚¤ãƒ«URL

  // ä¼šè­°æƒ…å ±
  meetingAttendeesRaw Json? // string[] - å‚åŠ è€…åï¼ˆrawï¼‰
  meetingAttendees    Json? // { name, title }[] - æ§‹é€ åŒ–å‚åŠ è€…ãƒªã‚¹ãƒˆ
  meetingDiscussion   String? // è­°è«–å†…å®¹
  meetingConcerns     Json? // string[] - æ‡¸å¿µäº‹é …
  meetingConditions   Json? // string[] - æ‰¿èªæ¡ä»¶

  // ãã®ä»–
  tags Json? // string[] - ã‚¿ã‚°

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  proposerUser User? @relation("DecisionProposer", fields: [proposerId], references: [id])
  deciderUser  User? @relation("DecisionDecider", fields: [deciderId], references: [id])

  // å§”å“¡ä¼šè­°é¡Œã‹ã‚‰ã®ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  relatedCommitteeAgendaId String?                    @unique
  relatedCommitteeAgenda   ManagementCommitteeAgenda? @relation("CommitteeToDecisionEscalation", fields: [relatedCommitteeAgendaId], references: [id])

  @@index([proposerId])
  @@index([deciderId])
  @@index([status])
  @@index([priority])
  @@index([type])
  @@index([proposedDate])
  @@index([decidedDate])
  @@index([relatedCommitteeAgendaId])
}

// ===================================
// VoiceAnalyticsçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
// ===================================

// é›†å›£åˆ†æãƒ‡ãƒ¼ã‚¿ï¼ˆè·å“¡ã‚«ãƒ«ãƒ†ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ãƒãƒƒãƒå—ä¿¡ï¼‰
model GroupAnalytics {
  id String @id @default(cuid())

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  analysisDate    DateTime // åˆ†æå®Ÿæ–½æ—¥
  periodStartDate DateTime // åˆ†ææœŸé–“é–‹å§‹
  periodEndDate   DateTime // åˆ†ææœŸé–“çµ‚äº†
  analysisType    String   @default("monthly") // 'weekly' | 'monthly' | 'quarterly' | 'yearly'

  // æŠ•ç¨¿å‹•å‘ï¼ˆJSON: PostingTrendsï¼‰
  postingTrendsData Json // { totalPosts, totalUsers, participationRate, byCategory, byDepartment, byLevel, monthlyTrend }

  // æ„Ÿæƒ…åˆ†æï¼ˆJSON: SentimentAnalysisï¼‰
  sentimentAnalysisData Json? // { positive, neutral, negative, positiveRate, negativeRate, byDepartment }

  // ãƒˆãƒ”ãƒƒã‚¯åˆ†æï¼ˆJSON: TopicAnalysisï¼‰
  topicAnalysisData Json? // { topKeywords, emergingTopics, byDepartment }

  // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆï¼ˆJSON: EngagementMetricsï¼‰
  engagementMetricsData Json // { averageCommentsPerPost, averageVotesPerIdea, activeUserRate, byDepartment }

  // ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·æƒ…å ±ï¼ˆJSON: PrivacyMetadataï¼‰
  privacyMetadata Json // { totalConsentedUsers, minimumGroupSize, excludedSmallGroupsCount }

  // å—ä¿¡æƒ…å ±
  receivedAt            DateTime @default(now()) // VoiceDriveãŒå—ä¿¡ã—ãŸæ—¥æ™‚
  webhookNotificationId String? // WebhookNotification.id

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  isProcessed Boolean @default(true) // å‡¦ç†å®Œäº†ãƒ•ãƒ©ã‚°
  isActive    Boolean @default(true) // æœ€æ–°ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ©ã‚°ï¼ˆå¤ã„ãƒ‡ãƒ¼ã‚¿ã¯falseï¼‰

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  webhookNotification WebhookNotification? @relation(fields: [webhookNotificationId], references: [id])
  alerts              AnalyticsAlert[]

  @@index([analysisDate])
  @@index([analysisType])
  @@index([isActive])
  @@index([periodStartDate, periodEndDate])
  @@index([webhookNotificationId])
}

// åˆ†æã‚¢ãƒ©ãƒ¼ãƒˆ
model AnalyticsAlert {
  id String @id @default(cuid())

  // åˆ†æãƒ‡ãƒ¼ã‚¿ã¨ã®é–¢é€£
  groupAnalyticsId String // GroupAnalytics.id

  // ã‚¢ãƒ©ãƒ¼ãƒˆæƒ…å ±
  severity            String // 'low' | 'medium' | 'high' | 'critical'
  topic               String // ãƒˆãƒ”ãƒƒã‚¯å
  description         String // è©³ç´°èª¬æ˜
  affectedDepartments Json // string[] - å½±éŸ¿éƒ¨é–€ãƒªã‚¹ãƒˆ
  recommendedAction   String // æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

  // é–¾å€¤æƒ…å ±ï¼ˆåŒ»ç™‚ãƒãƒ¼ãƒ ææ¡ˆï¼‰
  thresholdValue Float? // é–¾å€¤
  actualValue    Float? // å®Ÿæ¸¬å€¤

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  isAcknowledged Boolean   @default(false) // ç¢ºèªæ¸ˆã¿ãƒ•ãƒ©ã‚°
  acknowledgedBy String? // User.idï¼ˆç¢ºèªè€…ï¼‰
  acknowledgedAt DateTime? // ç¢ºèªæ—¥æ™‚

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  groupAnalytics     GroupAnalytics @relation(fields: [groupAnalyticsId], references: [id], onDelete: Cascade)
  acknowledgedByUser User?          @relation("AlertAcknowledger", fields: [acknowledgedBy], references: [id])

  @@index([groupAnalyticsId])
  @@index([severity])
  @@index([isAcknowledged])
  @@index([severity, isAcknowledged])
  @@index([createdAt])
}

// ===================================
// CultureDevelopmentçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
// ===================================

// æ–‡åŒ–è¨ºæ–­
model CultureAssessment {
  id String @id @default(cuid())

  // è¨ºæ–­æœŸé–“ï¼ˆåŒ»ç™‚ãƒãƒ¼ãƒ å›ç­”: å››åŠæœŸã”ã¨å¹´4å›ï¼‰
  assessmentDate  DateTime // è¨ºæ–­å®Ÿæ–½æ—¥
  quarter         String // å››åŠæœŸè­˜åˆ¥å­ï¼ˆä¾‹: 'Q3-2025'ï¼‰
  periodStartDate DateTime // å¯¾è±¡æœŸé–“é–‹å§‹
  periodEndDate   DateTime // å¯¾è±¡æœŸé–“çµ‚äº†

  // ã‚¹ã‚³ã‚¢
  overallScore      Int // ç·åˆã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
  previousScore     Int? // å‰å››åŠæœŸã‚¹ã‚³ã‚¢
  previousYearScore Int? // å‰å¹´åŒæœŸã‚¹ã‚³ã‚¢
  trend             String // 'improving' | 'stable' | 'declining'

  // SWOTåˆ†æ
  strengths     Json // string[] - å¼·ã¿
  weaknesses    Json // string[] - å¼±ã¿
  opportunities Json // string[] - æ©Ÿä¼š

  // å‚åŠ ãƒ‡ãƒ¼ã‚¿
  participantCount Int // å‚åŠ è€…æ•°
  responseRate     Float // å‚åŠ ç‡ï¼ˆ%ï¼‰

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆåŒ»ç™‚ãƒãƒ¼ãƒ å›ç­”: å…¨æœŸé–“ä¿å­˜ã€è«–ç†å‰Šé™¤ã®ã¿ï¼‰
  isActive Boolean @default(true) // è«–ç†å‰Šé™¤ãƒ•ãƒ©ã‚°

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  dimensions       CultureDimension[]
  departmentScores DepartmentCultureScore[]

  @@index([assessmentDate])
  @@index([quarter])
  @@index([isActive])
  @@index([periodStartDate, periodEndDate])
}

// æ–‡åŒ–æ¬¡å…ƒ
model CultureDimension {
  id String @id @default(cuid())

  // è¨ºæ–­ã¨ã®é–¢é€£
  assessmentId String // CultureAssessment.id

  // æ¬¡å…ƒæƒ…å ±
  dimensionType String // 'psychological_safety' | 'collaboration' | 'innovation' | 'learning' | 'work_life_balance' | ...
  name          String // æ¬¡å…ƒåï¼ˆæ—¥æœ¬èªï¼‰
  description   String // èª¬æ˜

  // ã‚¹ã‚³ã‚¢
  score         Int // ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
  previousScore Int? // å‰å›ã‚¹ã‚³ã‚¢
  change        Int // å¤‰åŒ–ï¼ˆå‰å›æ¯”ï¼‰

  // æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  recommendedActions Json // string[]

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  assessment CultureAssessment  @relation(fields: [assessmentId], references: [id], onDelete: Cascade)
  indicators CultureIndicator[]

  @@index([assessmentId])
  @@index([dimensionType])
}

// æ–‡åŒ–æŒ‡æ¨™
model CultureIndicator {
  id String @id @default(cuid())

  // æ¬¡å…ƒã¨ã®é–¢é€£
  dimensionId String // CultureDimension.id

  // æŒ‡æ¨™æƒ…å ±
  name        String // æŒ‡æ¨™å
  value       Int // ç¾åœ¨å€¤ï¼ˆ0-100ï¼‰
  target      Int // ç›®æ¨™å€¤ï¼ˆ0-100ï¼‰
  achievement Float // é”æˆç‡ï¼ˆ%ï¼‰
  trend       String // 'up' | 'down' | 'stable'

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  dimension CultureDimension @relation(fields: [dimensionId], references: [id], onDelete: Cascade)

  @@index([dimensionId])
}

// éƒ¨é–€åˆ¥æ–‡åŒ–ã‚¹ã‚³ã‚¢
model DepartmentCultureScore {
  id String @id @default(cuid())

  // è¨ºæ–­ã¨ã®é–¢é€£
  assessmentId String // CultureAssessment.id

  // éƒ¨é–€æƒ…å ±
  department   String // éƒ¨é–€å
  departmentId String? // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®éƒ¨é–€IDï¼ˆå°†æ¥å®Ÿè£…ï¼‰

  // ã‚¹ã‚³ã‚¢
  overallScore      Int // ç·åˆã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
  dimensionScores   Json // { dimension: string, score: number }[]
  rank              Int // éƒ¨é–€ãƒ©ãƒ³ã‚­ãƒ³ã‚°
  participationRate Float // å‚åŠ ç‡ï¼ˆ%ï¼‰

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  assessment CultureAssessment @relation(fields: [assessmentId], references: [id], onDelete: Cascade)

  @@index([assessmentId])
  @@index([department])
  @@index([rank])
}

// æ–‡åŒ–æ”¹å–„æ–½ç­–
model CultureInitiative {
  id String @id @default(cuid())

  // åŸºæœ¬æƒ…å ±
  title       String // ã‚¿ã‚¤ãƒˆãƒ«
  description String // èª¬æ˜
  objective   String // ç›®æ¨™

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status   String @default("planning") // 'planning' | 'active' | 'completed' | 'on_hold' | 'cancelled'
  priority String @default("medium") // 'low' | 'medium' | 'high' | 'critical'

  // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ
  targetDimensions  Json // string[] - å¯¾è±¡æ–‡åŒ–æ¬¡å…ƒ
  targetDepartments Json // string[] - å¯¾è±¡éƒ¨é–€ï¼ˆç©ºé…åˆ—=å…¨ä½“ï¼‰
  targetAudience    String // å¯¾è±¡è€…ï¼ˆä¾‹: ã€Œå…¨è·å“¡ã€ï¼‰

  // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  startDate DateTime // é–‹å§‹æ—¥
  endDate   DateTime // çµ‚äº†æ—¥

  // è²¬ä»»è€…ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å–å¾—ï¼‰
  ownerId     String? // User.id
  ownerName   String // User.nameï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  teamMembers Json // string[] - User.id[]

  // é€²æ—
  progress     Int     @default(0) // 0-100
  currentPhase String? // ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚º

  // äºˆç®—
  budget         Float? // äºˆç®—
  actualSpending Float? // å®Ÿæ”¯å‡º

  // æˆæœï¼ˆå®Œäº†æ™‚ã®ã¿ï¼‰
  outcomesDescription String? // æˆæœèª¬æ˜
  outcomesMetrics     Json? // { name, before, after, improvement }[]

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  completedAt DateTime? // å®Œäº†æ—¥æ™‚

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  owner      User?                 @relation("InitiativeOwner", fields: [ownerId], references: [id])
  kpis       InitiativeKPI[]
  milestones InitiativeMilestone[]

  @@index([ownerId])
  @@index([status])
  @@index([priority])
  @@index([startDate, endDate])
}

// æ–½ç­–KPI
model InitiativeKPI {
  id String @id @default(cuid())

  // æ–½ç­–ã¨ã®é–¢é€£
  initiativeId String // CultureInitiative.id

  // KPIæƒ…å ±
  name        String // KPIå
  baseline    Float // ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³å€¤
  target      Float // ç›®æ¨™å€¤
  current     Float // ç¾åœ¨å€¤
  unit        String // å˜ä½
  achievement Float // é”æˆç‡ï¼ˆ%ï¼‰

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  initiative CultureInitiative @relation(fields: [initiativeId], references: [id], onDelete: Cascade)

  @@index([initiativeId])
}

// æ–½ç­–ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³
model InitiativeMilestone {
  id String @id @default(cuid())

  // æ–½ç­–ã¨ã®é–¢é€£
  initiativeId String // CultureInitiative.id

  // ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³æƒ…å ±
  name          String // ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³å
  targetDate    DateTime // ç›®æ¨™æ—¥
  completedDate DateTime? // å®Œäº†æ—¥
  status        String    @default("pending") // 'pending' | 'in_progress' | 'completed' | 'delayed'
  deliverables  Json // string[] - æˆæœç‰©ãƒªã‚¹ãƒˆ

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  initiative CultureInitiative @relation(fields: [initiativeId], references: [id], onDelete: Cascade)

  @@index([initiativeId])
  @@index([targetDate])
  @@index([status])
}

// ===================================
// EmergencyAccountDeactivationçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
// ===================================

// ç·Šæ€¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåœæ­¢è¨˜éŒ²
model EmergencyDeactivation {
  id                 String    @id @default(cuid())
  targetUserId       String    @map("target_user_id")
  targetEmployeeId   String?   @map("target_employee_id")
  targetUserName     String?   @map("target_user_name") // User.nameï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  executedBy         String    @map("executed_by")
  executorEmployeeId String?   @map("executor_employee_id")
  executorName       String?   @map("executor_name")
  executorLevel      Float     @map("executor_level")
  reason             String
  timestamp          DateTime  @default(now())
  isEmergency        Boolean   @default(true) @map("is_emergency")
  syncToStaffSystem  Boolean   @default(false) @map("sync_to_staff_system")
  syncedAt           DateTime? @map("synced_at")

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆæ‹¡å¼µï¼‰
  status               String    @default("pending") // 'pending' | 'completed' | 'synced' | 'failed' | 'upgraded_to_formal_retirement'
  deactivationType     String    @default("emergency") @map("deactivation_type") // 'emergency' | 'retirement'
  formalRetirementDate DateTime? @map("formal_retirement_date") // æ­£å¼é€€è·æ—¥ï¼ˆã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰æ™‚ï¼‰
  errorMessage         String?   @map("error_message")
  retryCount           Int       @default(0) @map("retry_count") // ãƒªãƒˆãƒ©ã‚¤å›æ•°

  // ç›£æŸ»æƒ…å ±
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([targetUserId])
  @@index([executedBy])
  @@index([timestamp])
  @@index([status])
  @@index([syncToStaffSystem])
  @@index([deactivationType])
  @@map("emergency_deactivations")
}

// åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ åŒæœŸã‚­ãƒ¥ãƒ¼
model StaffSystemSyncQueue {
  id String @id @default(cuid())

  // åŒæœŸã‚¿ã‚¤ãƒ—
  type      String // 'ACCOUNT_DEACTIVATION' | 'ACCOUNT_REACTIVATION' | 'USER_UPDATE' | 'RETIREMENT_PROCESS'
  eventType String? @map("event_type") // 'emergency_deactivation' | 'retirement_process' | 'account_update'
  eventId   String? @map("event_id") // EmergencyDeactivation.id ã¾ãŸã¯ RetirementProcess.id

  // å¯¾è±¡
  targetUserId     String? @map("target_user_id")
  targetEmployeeId String? @map("target_employee_id")

  // ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰
  payload        Json // åŒæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆtypeåˆ¥ã«å†…å®¹ãŒç•°ãªã‚‹ï¼‰
  targetEndpoint String? @map("target_endpoint") // è·å“¡ã‚«ãƒ«ãƒ†ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  httpMethod     String  @default("POST") @map("http_method") // 'POST' | 'PUT' | 'PATCH'

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status     String @default("queued") // 'queued' | 'pending' | 'processing' | 'completed' | 'failed' | 'cancelled'
  priority   Int    @default(5) @map("priority") // 1-10ï¼ˆé«˜ã„ã»ã©å„ªå…ˆï¼‰
  retryCount Int    @default(0) @map("retry_count")
  maxRetries Int    @default(3) @map("max_retries")

  // å®Ÿè¡Œæƒ…å ±
  queuedAt        DateTime  @default(now()) @map("queued_at")
  processedAt     DateTime? @map("processed_at")
  lastAttemptedAt DateTime? @map("last_attempted_at")
  completedAt     DateTime? @map("completed_at")
  nextRetryAt     DateTime? @map("next_retry_at")
  cancelledAt     DateTime? @map("cancelled_at")
  cancelReason    String?   @map("cancel_reason")

  // ã‚¨ãƒ©ãƒ¼æƒ…å ±ãƒ»ãƒ¬ã‚¹ãƒãƒ³ã‚¹
  responseStatus Int?    @map("response_status") // HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰
  responseBody   String? @map("response_body") // ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…å®¹
  errorMessage   String? @map("error_message")
  errorStack     String? @map("error_stack")

  // é–¢é€£ãƒ¬ã‚³ãƒ¼ãƒ‰
  relatedDeactivationId String? @map("related_deactivation_id")

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([status])
  @@index([type])
  @@index([eventType])
  @@index([priority, status])
  @@index([queuedAt])
  @@index([nextRetryAt])
  @@index([targetUserId])
  @@map("staff_system_sync_queue")
}

// ===================================
// ExecutiveReportsçµ±åˆå®Ÿè£…ï¼ˆ2025-10-10ï¼‰
// ===================================

// ãƒ¬ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®šç¾©
model ReportTemplate {
  id          String  @id @default(cuid())
  templateKey String  @unique @map("template_key") // "monthly_summary", "quarterly_hr"
  title       String
  description String
  category    String // "monthly", "quarterly", "board"
  icon        String? // ã‚¢ã‚¤ã‚³ãƒ³å

  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®š
  defaultPages        Int  @default(10) @map("default_pages")
  requiredDataSources Json @map("required_data_sources") // ["posts", "agendas", "employees"]
  outputFormats       Json @map("output_formats") // ["pdf", "excel", "pptx"]

  // ç”Ÿæˆè¨­å®š
  isActive           Boolean @default(true) @map("is_active")
  permissionLevel    Decimal @map("permission_level") // Level 16+ã®ã¿
  generationSchedule String? @map("generation_schedule") // "monthly", "quarterly", "on_demand"

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  reports        GeneratedReport[]
  customizations ReportCustomization[]

  @@index([category])
  @@index([permissionLevel])
  @@map("report_templates")
}

// ç”Ÿæˆæ¸ˆã¿ãƒ¬ãƒãƒ¼ãƒˆ
model GeneratedReport {
  id         String @id @default(cuid())
  templateId String @map("template_id")
  reportKey  String @unique @map("report_key") // "monthly_2025_10"

  // ãƒ¬ãƒãƒ¼ãƒˆæƒ…å ±
  title       String
  period      String // "2025-10", "2025-Q3", "2025"
  periodStart DateTime @map("period_start")
  periodEnd   DateTime @map("period_end")

  // ç”Ÿæˆæƒ…å ±
  generatedBy String   @map("generated_by") // User ID
  generatedAt DateTime @default(now()) @map("generated_at")
  status      String   @default("generating") // "generating", "ready", "failed"

  // ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±
  fileUrl    String? @map("file_url") // S3 URL
  fileSize   Int?    @map("file_size") // bytes
  fileFormat String? @map("file_format") // "pdf", "excel", "pptx"
  pageCount  Int?    @map("page_count")

  // çµ±è¨ˆæƒ…å ±
  downloadCount  Int       @default(0) @map("download_count")
  viewCount      Int       @default(0) @map("view_count")
  lastAccessedAt DateTime? @map("last_accessed_at")

  // ã‚¨ãƒ©ãƒ¼æƒ…å ±
  errorMessage String? @map("error_message")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  template      ReportTemplate       @relation(fields: [templateId], references: [id], onDelete: Cascade)
  generator     User                 @relation("ReportGenerator", fields: [generatedBy], references: [id])
  accessLogs    ReportAccessLog[]
  sourceAgendas BoardMeetingAgenda[] @relation("AgendaSourceReport")

  @@index([templateId])
  @@index([generatedBy])
  @@index([status])
  @@index([periodStart, periodEnd])
  @@map("generated_reports")
}

// ãƒ¬ãƒãƒ¼ãƒˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¨­å®š
model ReportCustomization {
  id         String @id @default(cuid())
  templateId String @map("template_id")
  userId     String @map("user_id")

  // ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå†…å®¹
  customTitle      String? @map("custom_title")
  includedSections Json    @map("included_sections") // ["kpi", "topics", "insights"]
  excludedSections Json?   @map("excluded_sections")
  customFilters    Json?   @map("custom_filters") // { department: "çœ‹è­·éƒ¨" }

  // è¡¨ç¤ºè¨­å®š
  chartTypes  Json?   @map("chart_types") // { "trend": "line", "distribution": "pie" }
  colorScheme String? @map("color_scheme") // "default", "colorblind"

  isDefault Boolean @default(false) @map("is_default")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  template ReportTemplate @relation(fields: [templateId], references: [id], onDelete: Cascade)
  user     User           @relation("ReportCustomizer", fields: [userId], references: [id])

  @@unique([templateId, userId])
  @@index([userId])
  @@map("report_customizations")
}

// ãƒ¬ãƒãƒ¼ãƒˆã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°
model ReportAccessLog {
  id       String @id @default(cuid())
  reportId String @map("report_id")
  userId   String @map("user_id")

  // ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±
  action     String // "view", "download", "preview"
  accessedAt DateTime @default(now()) @map("accessed_at")

  // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±
  ipAddress String? @map("ip_address")
  userAgent String? @map("user_agent")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  report GeneratedReport @relation(fields: [reportId], references: [id], onDelete: Cascade)
  user   User            @relation("ReportAccessUser", fields: [userId], references: [id])

  @@index([reportId])
  @@index([userId])
  @@index([accessedAt])
  @@map("report_access_logs")
}

// ç†äº‹ä¼šã‚¢ã‚¸ã‚§ãƒ³ãƒ€
model BoardMeetingAgenda {
  id          String   @id @default(cuid())
  meetingDate DateTime @map("meeting_date")
  agendaOrder Int      @map("agenda_order") // è­°é¡Œé †åº

  // è­°é¡Œæƒ…å ±
  item        String
  description String?
  category    String // "hr_strategy", "financial", "operational"

  // ç™ºè¡¨æƒ…å ±
  duration       Int // åˆ†
  presenterId    String @map("presenter_id") // ç™ºè¡¨è€…ï¼ˆUser IDï¼‰
  presenterTitle String @map("presenter_title") // "äººäº‹éƒ¨é–€é•·"

  // é–¢é€£ãƒ‡ãƒ¼ã‚¿
  relatedAgendaId String? @map("related_agenda_id") // å§”å“¡ä¼šè­°é¡ŒID
  attachments     Json? // æ·»ä»˜è³‡æ–™URLé…åˆ—

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status         String @default("scheduled") // "scheduled", "presented", "postponed"
  actualDuration Int?   @map("actual_duration") // å®Ÿéš›ã®æ‰€è¦æ™‚é–“

  // ğŸ†• ç†äº‹ä¼šæº–å‚™ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ2025-10-10ï¼‰
  priority          String? @default("medium") // "high", "medium", "low"
  sourceReport      String? @map("source_report") // "æœˆæ¬¡è­°é¡ŒåŒ–ãƒ—ãƒ­ã‚»ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ"
  sourceReportId    String? @map("source_report_id") // GeneratedReport ID
  preparedBy        String? @map("prepared_by") // "æˆ¦ç•¥ä¼ç”»éƒ¨"
  preparationStatus String? @default("draft") @map("preparation_status") // "draft", "reviewing", "approved", "finalized"
  documentsReady    Boolean @default(false) @map("documents_ready")
  presentationReady Boolean @default(false) @map("presentation_ready")
  documentUrls      Json?   @map("document_urls") // { report: "url", presentation: "url" }

  // ğŸ†• ç†äº‹é•·ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆ2025-10-11ï¼‰
  keyPoints          String?   @map("key_points") // JSONé…åˆ—: ä¸»è¦ãƒã‚¤ãƒ³ãƒˆ
  expectedDiscussion String?   @map("expected_discussion") // æƒ³å®šã•ã‚Œã‚‹è­°è«–
  requiredDecision   String?   @map("required_decision") // æ±‚ã‚ã‚‰ã‚Œã‚‹æ±ºå®š
  chairmanReview     String?   @default("pending") @map("chairman_review") // "pending", "approved", "needs_revision", "rejected"
  chairmanComment    String?   @map("chairman_comment") // ç†äº‹é•·ã‚³ãƒ¡ãƒ³ãƒˆ
  chairmanReviewedBy String?   @map("chairman_reviewed_by") // ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿæ–½è€…ï¼ˆUser IDï¼‰
  chairmanReviewedAt DateTime? @map("chairman_reviewed_at") // ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥æ™‚

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  presenter           User                            @relation("BoardPresenter", fields: [presenterId], references: [id])
  relatedAgenda       ManagementCommitteeAgenda?      @relation("BoardRelatedAgenda", fields: [relatedAgendaId], references: [id])
  sourceReportRef     GeneratedReport?                @relation("AgendaSourceReport", fields: [sourceReportId], references: [id])
  candidateSelections BoardAgendaCandidateSelection[]
  chairmanReviewer    User?                           @relation("AgendaChairmanReviewer", fields: [chairmanReviewedBy], references: [id])

  @@unique([meetingDate, agendaOrder])
  @@index([meetingDate])
  @@index([presenterId])
  @@index([chairmanReview])
  @@index([chairmanReviewedAt])
  @@map("board_meeting_agendas")
}

// æˆ¦ç•¥çš„ã‚¤ãƒ³ã‚µã‚¤ãƒˆ
model StrategicInsight {
  id          String @id @default(cuid())
  insightType String @map("insight_type") // "success_story", "improvement_suggestion"
  category    String // "department", "process", "engagement"

  // ã‚¤ãƒ³ã‚µã‚¤ãƒˆå†…å®¹
  title   String
  summary String
  details String?

  // æ ¹æ‹ ãƒ‡ãƒ¼ã‚¿
  evidenceData       Json  @map("evidence_data") // { avgDays: 35, department: "åŒ»ç™‚ç™‚é¤Šç—…æ£Ÿ" }
  relatedPostIds     Json? @map("related_post_ids") // é–¢é€£æŠ•ç¨¿IDé…åˆ—
  relatedDepartments Json? @map("related_departments") // é–¢é€£éƒ¨é–€é…åˆ—

  // å„ªå…ˆåº¦
  priority   String @default("medium") // "high", "medium", "low"
  confidence Float  @default(0.8) @map("confidence") // AIä¿¡é ¼åº¦ï¼ˆ0-1ï¼‰

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status     String    @default("pending") // "pending", "approved", "implemented", "dismissed"
  approvedBy String?   @map("approved_by") // æ‰¿èªè€…ID
  approvedAt DateTime? @map("approved_at")

  // å®Ÿè£…è¿½è·¡
  actionTaken   String?   @map("action_taken")
  implementedAt DateTime? @map("implemented_at")

  // AIåˆ†ææƒ…å ±
  generatedBy     String   @default("ai") @map("generated_by") // "ai", "manual"
  generationModel String?  @map("generation_model") // "gpt-4", "llama-3.2"
  generatedAt     DateTime @default(now()) @map("generated_at")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  approver User? @relation("InsightApprover", fields: [approvedBy], references: [id])

  @@index([insightType])
  @@index([priority])
  @@index([status])
  @@index([generatedAt])
  @@map("strategic_insights")
}

// ç†äº‹ä¼šãƒã‚¹ã‚¿ï¼ˆBoardPreparationçµ±åˆ - 2025-10-10ï¼‰
model BoardMeeting {
  id String @id @default(cuid())

  // é–‹å‚¬æƒ…å ±
  meetingDate      DateTime @map("meeting_date")
  startTime        String   @map("start_time") // "14:00"
  location         String // "æœ¬éƒ¨ä¼šè­°å®¤A"
  expectedDuration Int      @map("expected_duration") // äºˆå®šæ™‚é–“ï¼ˆåˆ†ï¼‰
  actualDuration   Int?     @map("actual_duration") // å®Ÿéš›ã®æ™‚é–“

  // å‚åŠ è€…
  expectedAttendees Int   @map("expected_attendees") // å‡ºå¸­äºˆå®šè€…æ•°
  actualAttendees   Int?  @map("actual_attendees") // å®Ÿéš›ã®å‡ºå¸­è€…æ•°
  attendeeList      Json? @map("attendee_list") // å‡ºå¸­è€…ãƒªã‚¹ãƒˆ

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status              String @default("planning") // "planning", "agenda_draft", "materials_ready", "confirmed", "completed"
  preparationProgress Int    @default(0) @map("preparation_progress") // 0-100%

  // è³‡æ–™
  agendaDocumentUrl  String? @map("agenda_document_url") // è­°äº‹æ¬¡ç¬¬PDF
  minutesDocumentUrl String? @map("minutes_document_url") // è­°äº‹éŒ²PDF

  // ãƒ¡ã‚¿
  createdBy String   @map("created_by") // User ID
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  creator             User                            @relation("BoardMeetingCreator", fields: [createdBy], references: [id])
  candidateSelections BoardAgendaCandidateSelection[]
  proposals           ChairmanProposal[]
  decisions           BoardDecision[]                 @relation("BoardDecisions")

  @@index([meetingDate])
  @@map("board_meetings")
}

// è­°é¡Œå€™è£œé¸å®šå±¥æ­´ï¼ˆBoardPreparationçµ±åˆ - 2025-10-10ï¼‰
model BoardAgendaCandidateSelection {
  id             String @id @default(cuid())
  boardMeetingId String @map("board_meeting_id")
  agendaId       String @map("agenda_id")

  // é¸å®šæƒ…å ±
  selectedAt      DateTime @default(now()) @map("selected_at")
  selectedBy      String   @map("selected_by") // User ID
  selectionReason String?  @map("selection_reason")
  isFinalized     Boolean  @default(false) @map("is_finalized")

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´å±¥æ­´
  statusHistory Json? @map("status_history") // { timestamp, from, to, by }[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  boardMeeting BoardMeeting       @relation(fields: [boardMeetingId], references: [id], onDelete: Cascade)
  agenda       BoardMeetingAgenda @relation(fields: [agendaId], references: [id], onDelete: Cascade)
  selector     User               @relation("AgendaSelector", fields: [selectedBy], references: [id])

  @@unique([boardMeetingId, agendaId])
  @@index([boardMeetingId])
  @@index([selectedBy])
  @@map("board_agenda_candidate_selections")
}

// ç†äº‹é•·ã¸ã®ææ¡ˆï¼ˆBoardPreparationçµ±åˆ - 2025-10-10ï¼‰
model ChairmanProposal {
  id String @id @default(cuid())

  // ææ¡ˆæƒ…å ±
  title          String
  description    String
  impact         String // æœŸå¾…åŠ¹æœ
  requiredBudget String // "ç´„800ä¸‡å††"
  budgetAmount   Decimal? // æ•°å€¤ï¼ˆé›†è¨ˆç”¨ï¼‰
  timeline       String // "2026å¹´1æœˆæº–å‚™é–‹å§‹ã€4æœˆæœ¬æ ¼é‹ç”¨"

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status         String    @default("draft") // "draft", "pending_review", "approved", "rejected", "implemented"
  submittedAt    DateTime? @map("submitted_at")
  reviewedAt     DateTime? @map("reviewed_at")
  reviewedBy     String?   @map("reviewed_by") // User IDï¼ˆç†äº‹é•·ï¼‰
  reviewComments String?   @map("review_comments")

  // é–¢é€£
  relatedBoardMeetingId String? @map("related_board_meeting_id")
  documentUrl           String? @map("document_url") // ææ¡ˆæ›¸PDF

  // ãƒ¡ã‚¿
  createdBy String   @map("created_by") // User ID
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  creator             User          @relation("ProposalCreator", fields: [createdBy], references: [id])
  reviewer            User?         @relation("ProposalReviewer", fields: [reviewedBy], references: [id])
  relatedBoardMeeting BoardMeeting? @relation(fields: [relatedBoardMeetingId], references: [id])

  @@index([status])
  @@index([createdBy])
  @@index([relatedBoardMeetingId])
  @@map("chairman_proposals")
}

// =============================================================================
// CrossFacilityAnalysisçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
// =============================================================================

// æ–½è¨­æ¨ªæ–­å…±é€šèª²é¡Œ
model CrossFacilityCommonIssue {
  id                    String   @id @default(cuid())
  title                 String // "å¤œå‹¤æ™‚ã®äººæ‰‹ä¸è¶³"
  category              String // "äººæé…ç½®"
  description           String // è©³ç´°èª¬æ˜
  affectedFacilities    String // JSONé…åˆ—: ["FAC001", "FAC002", ...]
  affectedFacilityCount Int      @map("affected_facility_count")
  totalVoices           Int      @map("total_voices") // é–¢é€£æŠ•ç¨¿æ•°
  severity              String   @default("medium") // "high", "medium", "low"
  trend                 String   @default("stable") // "increasing", "stable", "decreasing"
  suggestedAction       String // æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  sourcePostIds         String   @map("source_post_ids") // JSONé…åˆ—: ["POST123", "POST456", ...]
  detectedAt            DateTime @default(now()) @map("detected_at")
  lastUpdatedAt         DateTime @updatedAt @map("last_updated_at")
  status                String   @default("active") // "active", "addressing", "resolved", "archived"
  assignedTo            String?  @map("assigned_to") // æ‹…å½“è€…ï¼ˆLevel 18ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  assignee User? @relation("CommonIssueAssignee", fields: [assignedTo], references: [id])

  @@index([category])
  @@index([severity])
  @@index([detectedAt])
  @@map("cross_facility_common_issue")
}

// æ¨ªå±•é–‹å¯èƒ½ãªæˆåŠŸäº‹ä¾‹
model CrossFacilitySuccessCase {
  id                   String    @id @default(cuid())
  facilityId           String    @map("facility_id") // æˆåŠŸäº‹ä¾‹ã®ç™ºç”Ÿæ–½è¨­
  title                String // "ãƒ¡ãƒ³ã‚¿ãƒ¼åˆ¶åº¦ã«ã‚ˆã‚‹æ–°äººå®šç€ç‡å‘ä¸Š"
  category             String // "äººæè‚²æˆ"
  description          String // è©³ç´°èª¬æ˜
  impact               String // "æ–°äººé›¢è·ç‡ 35% â†’ 8%ï¼ˆ-27ptï¼‰"
  impactMetrics        String?   @map("impact_metrics") // JSON: { before: 35, after: 8, unit: "%" }
  replicability        Int       @default(50) // æ¨ªå±•é–‹å¯èƒ½æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
  implementationCost   String?   @map("implementation_cost") // "ç´„50ä¸‡å††"
  implementationPeriod String?   @map("implementation_period") // "3ãƒ¶æœˆ"
  interestedFacilities String?   @map("interested_facilities") // JSONé…åˆ—: ["FAC002", "FAC003", ...]
  sourcePostId         String    @map("source_post_id") // å…ƒã¨ãªã£ãŸPost ID
  identifiedAt         DateTime  @default(now()) @map("identified_at")
  status               String    @default("proposed") // "proposed", "approved", "replicating", "replicated"
  approvedBy           String?   @map("approved_by") // æ‰¿èªè€…ï¼ˆLevel 18ï¼‰
  approvedAt           DateTime? @map("approved_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  facility     User                     @relation("SuccessCaseFacility", fields: [facilityId], references: [id])
  sourcePost   Post                     @relation("SuccessCaseSource", fields: [sourcePostId], references: [id])
  approver     User?                    @relation("SuccessCaseApprover", fields: [approvedBy], references: [id])
  replications SuccessCaseReplication[]

  @@index([facilityId])
  @@index([category])
  @@index([replicability])
  @@map("cross_facility_success_case")
}

// æˆåŠŸäº‹ä¾‹ã®æ¨ªå±•é–‹çŠ¶æ³
model SuccessCaseReplication {
  id                String    @id @default(cuid())
  successCaseId     String    @map("success_case_id")
  targetFacilityId  String    @map("target_facility_id")
  status            String    @default("planning") // "planning", "implementing", "completed", "failed"
  startedAt         DateTime? @map("started_at")
  completedAt       DateTime? @map("completed_at")
  progress          Int       @default(0) // é€²æ—ç‡ï¼ˆ0-100ï¼‰
  results           String? // å®Ÿæ–½çµæœ
  resultMetrics     String?   @map("result_metrics") // JSON: æˆæœæŒ‡æ¨™
  responsiblePerson String    @map("responsible_person") // å®Ÿæ–½è²¬ä»»è€…
  notes             String? // å‚™è€ƒ

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  successCase    CrossFacilitySuccessCase @relation(fields: [successCaseId], references: [id], onDelete: Cascade)
  targetFacility User                     @relation("ReplicationTargetFacility", fields: [targetFacilityId], references: [id])
  responsible    User                     @relation("ReplicationResponsible", fields: [responsiblePerson], references: [id])

  @@unique([successCaseId, targetFacilityId])
  @@index([targetFacilityId])
  @@index([status])
  @@map("success_case_replication")
}

// æ³•äººå…¨ä½“ã§ã®æˆ¦ç•¥çš„æ©Ÿä¼š
model StrategicOpportunity {
  id                 String    @id @default(cuid())
  title              String // "æ–½è¨­é–“äººæãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶åº¦"
  opportunity        String // æ©Ÿä¼šã®è©³ç´°
  expectedImpact     String    @map("expected_impact") // æœŸå¾…åŠ¹æœ
  requiredInvestment String    @map("required_investment") // "ç´„500ä¸‡å††"
  investmentAmount   Float?    @map("investment_amount")
  timeline           String // å®Ÿæ–½ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  priority           String    @default("medium") // "high", "medium", "low"
  status             String    @default("proposed") // "proposed", "approved", "implementing", "completed", "rejected"
  proposedAt         DateTime  @default(now()) @map("proposed_at")
  approvedAt         DateTime? @map("approved_at")
  approvedBy         String?   @map("approved_by") // æ‰¿èªè€…ï¼ˆç†äº‹é•·ç­‰ï¼‰
  relatedIssueIds    String?   @map("related_issue_ids") // JSONé…åˆ—: é–¢é€£ã™ã‚‹å…±é€šèª²é¡ŒID
  targetFacilities   String?   @map("target_facilities") // JSONé…åˆ—: å¯¾è±¡æ–½è¨­
  kpiTargets         String?   @map("kpi_targets") // JSON: KPIç›®æ¨™å€¤
  actualResults      String?   @map("actual_results") // JSON: å®Ÿç¸¾å€¤
  documentUrl        String?   @map("document_url") // ä¼ç”»æ›¸URL

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  approver User? @relation("OpportunityApprover", fields: [approvedBy], references: [id])

  @@index([priority])
  @@index([status])
  @@index([proposedAt])
  @@map("strategic_opportunity")
}

// =============================================================================
// ProjectApprovalçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
// =============================================================================

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ‰¿èªå±¥æ­´
model ProjectApproval {
  id String @id @default(cuid())

  // å¯¾è±¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
  postId String @map("post_id")

  // æ‰¿èªè€…æƒ…å ±
  approverId    String @map("approver_id") // User.id
  approverName  String @map("approver_name") // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆè¡¨ç¤ºç”¨ï¼‰
  approverLevel Float  @map("approver_level") // æ‰¿èªæ™‚ã®æ¨©é™ãƒ¬ãƒ™ãƒ«

  // æ‰¿èªæƒ…å ±
  action  String // 'approved' | 'rejected' | 'held' | 'emergency_override'
  reason  String? // ç†ç”±ï¼ˆå´ä¸‹ãƒ»ä¿ç•™æ™‚ï¼‰
  comment String? // ã‚³ãƒ¡ãƒ³ãƒˆ

  // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ï¼ˆæ‰¿èªæ™‚ç‚¹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼‰
  projectLevel String @map("project_level") // 'PENDING' | 'TEAM' | 'DEPARTMENT' | 'FACILITY' | 'ORGANIZATION'
  projectScore Int    @map("project_score") // æ‰¿èªæ™‚ã®ã‚¹ã‚³ã‚¢
  totalVotes   Int    @map("total_votes") // æ‰¿èªæ™‚ã®ç·æŠ•ç¥¨æ•°
  supportRate  Float  @map("support_rate") // æ‰¿èªæ™‚ã®æ”¯æŒç‡ï¼ˆ%ï¼‰

  // ç·Šæ€¥ä»‹å…¥ãƒ•ãƒ©ã‚°
  isEmergencyOverride Boolean @default(false) @map("is_emergency_override")

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  post     Post @relation("PostApprovals", fields: [postId], references: [id], onDelete: Cascade)
  approver User @relation("ProjectApprover", fields: [approverId], references: [id])

  // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  @@index([postId])
  @@index([approverId])
  @@index([action])
  @@index([projectLevel])
  @@index([createdAt])
  @@index([postId, createdAt]) // æ‰¿èªå±¥æ­´ã‚’æ™‚ç³»åˆ—ã§å–å¾—
  @@index([approverId, projectLevel]) // æ‰¿èªè€…åˆ¥ãƒ¬ãƒ™ãƒ«åˆ¥çµ±è¨ˆå–å¾—ç”¨
  @@map("project_approvals")
}

// =============================================================================
// BoardDecisionFollowçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
// =============================================================================

// ç†äº‹ä¼šæ±ºå®šäº‹é …
model BoardDecision {
  id String @id @default(cuid())

  // ç†äº‹ä¼šæƒ…å ±
  boardMeetingId String   @map("board_meeting_id")
  meetingDate    DateTime @map("meeting_date")

  // æ±ºå®šäº‹é …æƒ…å ±
  title       String
  category    String // "ã‚·ã‚¹ãƒ†ãƒ å°å…¥", "äººäº‹åˆ¶åº¦", "ITãƒ»ã‚·ã‚¹ãƒ†ãƒ ", "äººæè‚²æˆ"
  description String
  decision    String // ç†äº‹ä¼šæ±ºå®šå†…å®¹

  // å®Ÿæ–½æƒ…å ±
  implementationDeadline DateTime @map("implementation_deadline")
  responsibleDept        String   @map("responsible_dept") // æ‹…å½“éƒ¨é–€åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  responsibleDeptId      String?  @map("responsible_dept_id") // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ éƒ¨é–€ID
  affectedFacilities     Json     @map("affected_facilities") // å½±éŸ¿æ–½è¨­IDé…åˆ—

  // é€²æ—ç®¡ç†
  status     String   @default("on_track") // "completed", "on_track", "at_risk", "delayed"
  progress   Int      @default(0) // 0-100
  lastUpdate DateTime @default(now()) @map("last_update")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  boardMeeting            BoardMeeting                          @relation("BoardDecisions", fields: [boardMeetingId], references: [id], onDelete: Cascade)
  milestones              BoardDecisionMilestone[]
  facilityImplementations BoardDecisionFacilityImplementation[]

  @@index([boardMeetingId])
  @@index([status])
  @@index([implementationDeadline])
  @@index([category])
  @@map("board_decisions")
}

// ç†äº‹ä¼šæ±ºå®šäº‹é …ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³
model BoardDecisionMilestone {
  id              String @id @default(cuid())
  boardDecisionId String @map("board_decision_id")

  // ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³æƒ…å ±
  title      String
  deadline   DateTime
  status     String   @default("pending") // "completed", "in_progress", "pending", "delayed"
  assignee   String // æ‹…å½“è€…åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  assigneeId String?  @map("assignee_id") // User ID
  sortOrder  Int      @default(0) @map("sort_order") // è¡¨ç¤ºé †

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt   DateTime  @default(now()) @map("created_at")
  updatedAt   DateTime  @updatedAt @map("updated_at")
  completedAt DateTime? @map("completed_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  boardDecision BoardDecision @relation(fields: [boardDecisionId], references: [id], onDelete: Cascade)

  @@index([boardDecisionId])
  @@index([status])
  @@index([deadline])
  @@index([sortOrder])
  @@map("board_decision_milestones")
}

// ç†äº‹ä¼šæ±ºå®šäº‹é …ã®æ–½è¨­åˆ¥å®Ÿæ–½çŠ¶æ³
model BoardDecisionFacilityImplementation {
  id              String @id @default(cuid())
  boardDecisionId String @map("board_decision_id")

  // æ–½è¨­æƒ…å ±
  facilityId   String @map("facility_id") // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ æ–½è¨­ID
  facilityName String @map("facility_name") // æ–½è¨­åï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

  // å®Ÿæ–½çŠ¶æ³
  status   String  @default("not_started") // "completed", "in_progress", "not_started"
  progress Int     @default(0) // 0-100
  note     String? // å‚™è€ƒ

  // ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
  startedAt   DateTime? @map("started_at")
  completedAt DateTime? @map("completed_at")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  boardDecision BoardDecision @relation(fields: [boardDecisionId], references: [id], onDelete: Cascade)

  @@unique([boardDecisionId, facilityId])
  @@index([boardDecisionId])
  @@index([facilityId])
  @@index([status])
  @@map("board_decision_facility_implementations")
}

// ===================================
// ProgressDashboardçµ±åˆå®Ÿè£…ï¼ˆ2025-10-11ï¼‰
// ===================================

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­é–“ç›®æ¨™ç®¡ç†
model ProjectMilestone {
  id          String    @id @default(cuid())
  projectId   String    @map("project_id")
  title       String
  description String?
  dueDate     DateTime  @map("due_date")
  completedAt DateTime? @map("completed_at")
  completedBy String?   @map("completed_by")
  status      String    @default("pending") // 'pending' | 'in_progress' | 'completed' | 'cancelled'
  order       Int       @default(0)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  project         Post  @relation("ProjectMilestones", fields: [projectId], references: [id], onDelete: Cascade)
  completedByUser User? @relation("MilestoneCompletedBy", fields: [completedBy], references: [id], onDelete: SetNull)

  @@index([projectId])
  @@index([status])
  @@index([dueDate])
  @@map("project_milestones")
}

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ è€…ç®¡ç†
model ProjectTeamMember {
  id        String    @id @default(cuid())
  projectId String    @map("project_id")
  userId    String    @map("user_id")
  role      String    @default("member") // 'leader' | 'sub_leader' | 'member' | 'observer'
  joinedAt  DateTime  @default(now()) @map("joined_at")
  leftAt    DateTime? @map("left_at")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  project Post @relation("ProjectTeamMembers", fields: [projectId], references: [id], onDelete: Cascade)
  user    User @relation("ProjectMemberships", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([projectId, userId])
  @@index([projectId])
  @@index([userId])
  @@index([role])
  @@map("project_team_members")
}

// ===================================
// çµ„ç¹”æ§‹é€ æ‹¡å¼µï¼ˆ2025-10-12ï¼‰
// è­°é¡Œãƒ¢ãƒ¼ãƒ‰ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ‰å…±é€šåŸºç›¤
// ===================================

// æ–½è¨­ãƒã‚¹ã‚¿ãƒ¼ - ç—…é™¢ãƒ»æ–½è¨­ã®åŸºæœ¬æƒ…å ±ç®¡ç†
model Facility {
  id              String   @id @default(cuid())
  facilityCode    String   @unique
  facilityName    String
  facilityType    String
  totalStaffCount Int      @default(0)
  totalBedCount   Int?
  address         String?
  establishedYear Int?
  corporationId   String
  isActive        Boolean  @default(true)
  metadata        Json?
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")

  // Relations
  organizations OrganizationStructure[]
  votingGroups  VotingGroup[]

  @@index([facilityCode])
  @@index([corporationId])
  @@map("facilities")
}

// çµ„ç¹”æ§‹é€ ãƒã‚¹ã‚¿ãƒ¼ - éƒ¨é–€ãƒ»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®éšå±¤æ§‹é€ ç®¡ç†
model OrganizationStructure {
  id             String   @id @default(cuid())
  facilityCode   String
  departmentId   String   @unique
  departmentName String
  departmentType String
  sectionId      String?
  sectionName    String?
  votingGroupId  String?
  isActive       Boolean  @default(true)
  sortOrder      Int      @default(0)
  metadata       Json?
  createdAt      DateTime @default(now()) @map("created_at")
  updatedAt      DateTime @updatedAt @map("updated_at")

  // Relations
  facility          Facility           @relation(fields: [facilityCode], references: [facilityCode], onDelete: Cascade)
  votingGroup       VotingGroup?       @relation("GroupMembers", fields: [votingGroupId], references: [groupId], onDelete: SetNull)
  agendaModeConfig  AgendaModeConfig?
  projectModeConfig ProjectModeConfig?

  @@index([facilityCode])
  @@index([departmentId])
  @@index([votingGroupId])
  @@map("organization_structures")
}

// æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ— - å°è¦æ¨¡éƒ¨é–€ã®çµ±åˆæŠ•ç¥¨å˜ä½
model VotingGroup {
  id                  String  @id @default(cuid())
  groupId             String  @unique
  groupName           String
  memberDepartmentIds Json
  agendaModeEnabled   Boolean @default(true)
  projectModeEnabled  Boolean @default(true)
  isActive            Boolean @default(true)

  // æ‰¿èªè€…ç®¡ç†ï¼ˆæŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—çµ±åˆæ™‚ã®æ‰¿èªè€…æŒ‡å®šï¼‰
  primaryApproverId String? @map("primary_approver_id") // ä»£è¡¨æ‰¿èªè€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  approverRotation  Json?   @map("approver_rotation") // ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š

  metadata  Json?
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  facility               Facility                @relation(fields: [facilityCode], references: [facilityCode], onDelete: Cascade)
  facilityCode           String
  members                OrganizationStructure[] @relation("GroupMembers")
  agendaModeGroupConfig  AgendaModeGroupConfig?
  projectModeGroupConfig ProjectModeGroupConfig?
  primaryApprover        User?                   @relation("VotingGroupPrimaryApprover", fields: [primaryApproverId], references: [id], onDelete: SetNull)

  @@index([groupId])
  @@index([facilityCode])
  @@index([primaryApproverId])
  @@map("voting_groups")
}

// è­°é¡Œãƒ¢ãƒ¼ãƒ‰è¨­å®š - éƒ¨é–€åˆ¥ã®è­°é¡Œã‚·ã‚¹ãƒ†ãƒ è¨­å®š
model AgendaModeConfig {
  id                           String   @id @default(cuid())
  departmentId                 String   @unique
  pending                      Int      @default(30)
  deptReview                   Int      @default(50)
  deptAgenda                   Int      @default(100)
  facilityAgenda               Int      @default(300)
  corpReview                   Int      @default(600)
  corpAgenda                   Int      @default(1000)
  votingScopeRules             Json
  committeeSubmissionEnabled   Boolean  @default(true)
  committeeSubmissionThreshold Int      @default(100)
  isActive                     Boolean  @default(true)
  metadata                     Json?
  createdAt                    DateTime @default(now()) @map("created_at")
  updatedAt                    DateTime @updatedAt @map("updated_at")

  // Relations
  department OrganizationStructure @relation(fields: [departmentId], references: [departmentId], onDelete: Cascade)

  @@index([departmentId])
  @@map("agenda_mode_configs")
}

// è­°é¡Œãƒ¢ãƒ¼ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š - æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ç”¨ã®è­°é¡Œè¨­å®š
model AgendaModeGroupConfig {
  id                           String   @id @default(cuid())
  groupId                      String   @unique
  pending                      Int      @default(30)
  deptReview                   Int      @default(50)
  deptAgenda                   Int      @default(100)
  facilityAgenda               Int      @default(300)
  corpReview                   Int      @default(600)
  corpAgenda                   Int      @default(1000)
  votingScopeRules             Json
  committeeSubmissionEnabled   Boolean  @default(true)
  committeeSubmissionThreshold Int      @default(100)
  isActive                     Boolean  @default(true)
  metadata                     Json?
  createdAt                    DateTime @default(now()) @map("created_at")
  updatedAt                    DateTime @updatedAt @map("updated_at")

  // Relations
  votingGroup VotingGroup @relation(fields: [groupId], references: [groupId], onDelete: Cascade)

  @@index([groupId])
  @@map("agenda_mode_group_configs")
}

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ‰è¨­å®š - éƒ¨é–€åˆ¥ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŒ–è¨­å®š
model ProjectModeConfig {
  id                      String   @id @default(cuid())
  departmentId            String   @unique
  projectUpgradeThreshold Int      @default(400)
  teamFormationRules      Json
  milestoneRequired       Boolean  @default(true)
  progressReportFrequency String   @default("weekly")
  isActive                Boolean  @default(true)
  metadata                Json?
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  // Relations
  department OrganizationStructure @relation(fields: [departmentId], references: [departmentId], onDelete: Cascade)

  @@index([departmentId])
  @@map("project_mode_configs")
}

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ¼ãƒ‰ã‚°ãƒ«ãƒ¼ãƒ—è¨­å®š - æŠ•ç¥¨ã‚°ãƒ«ãƒ¼ãƒ—ç”¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
model ProjectModeGroupConfig {
  id                      String   @id @default(cuid())
  groupId                 String   @unique
  projectUpgradeThreshold Int      @default(400)
  teamFormationRules      Json
  milestoneRequired       Boolean  @default(true)
  progressReportFrequency String   @default("weekly")
  isActive                Boolean  @default(true)
  metadata                Json?
  createdAt               DateTime @default(now()) @map("created_at")
  updatedAt               DateTime @updatedAt @map("updated_at")

  // Relations
  votingGroup VotingGroup @relation(fields: [groupId], references: [groupId], onDelete: Cascade)

  @@index([groupId])
  @@map("project_mode_group_configs")
}

// è·ç¨®ãƒã‚¹ã‚¿ãƒ¼ - è·ç¨®ãƒ»è³‡æ ¼æƒ…å ±ç®¡ç†
model JobCategory {
  id               String   @id @default(cuid())
  jobCategoryCode  String   @unique
  jobCategoryName  String
  jobCategoryGroup String
  requiresLicense  Boolean  @default(false)
  sortOrder        Int      @default(0)
  isActive         Boolean  @default(true)
  metadata         Json?
  createdAt        DateTime @default(now()) @map("created_at")
  updatedAt        DateTime @updatedAt @map("updated_at")

  @@index([jobCategoryCode])
  @@index([jobCategoryGroup])
  @@map("job_categories")
}

// ===================================
// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆäººæåˆ†æçµ±åˆï¼ˆ2025-10-12ï¼‰
// ProjectTalentAnalyticsPageç”¨é›†è¨ˆãƒ†ãƒ¼ãƒ–ãƒ«
// ===================================

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ çµ±è¨ˆ - å…¨ä½“çµ±è¨ˆï¼ˆç·å‚åŠ è€…æ•°ã€å¤šæ§˜æ€§ã‚¹ã‚³ã‚¢ç­‰ï¼‰
model ProjectParticipationStats {
  id String @id @default(cuid())

  // é›†è¨ˆæœŸé–“
  periodType  String // 'month' | 'quarter' | 'year'
  periodStart DateTime @map("period_start")
  periodEnd   DateTime @map("period_end")

  // å…¨ä½“çµ±è¨ˆ
  totalParticipants        Int   @default(0) @map("total_participants")
  totalProjects            Int   @default(0) @map("total_projects")
  averageProjectsPerPerson Float @default(0) @map("avg_projects_per_person")

  // å¤šæ§˜æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
  diversityScore           Float @default(0) @map("diversity_score")
  professionDiversityScore Float @default(0) @map("profession_diversity_score")
  generationDiversityScore Float @default(0) @map("generation_diversity_score")
  hierarchyDiversityScore  Float @default(0) @map("hierarchy_diversity_score")

  // æˆé•·ç‡ï¼ˆå‰æœŸæ¯”%ï¼‰
  growthRate            Float? @map("growth_rate")
  participantGrowthRate Float? @map("participant_growth_rate")
  projectGrowthRate     Float? @map("project_growth_rate")

  // é›†è¨ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  calculatedAt DateTime @default(now()) @map("calculated_at")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@unique([periodType, periodStart, periodEnd])
  @@index([periodType])
  @@index([periodStart, periodEnd])
  @@map("project_participation_stats")
}

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ çµ±è¨ˆï¼ˆè·ç¨®åˆ¥ï¼‰ - è·ç¨®åˆ¥ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ çŠ¶æ³
model ProjectParticipationByProfession {
  id String @id @default(cuid())

  // é›†è¨ˆæœŸé–“
  periodType  String // 'month' | 'quarter' | 'year'
  periodStart DateTime @map("period_start")
  periodEnd   DateTime @map("period_end")

  // è·ç¨®æƒ…å ±ï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å–å¾—ã—ã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰
  professionCode  String @map("profession_code") // 'nurse' | 'doctor' | ...
  professionName  String @map("profession_name") // 'çœ‹è­·å¸«' | 'åŒ»å¸«' | ...
  professionGroup String @map("profession_group") // 'medical' | 'nursing' | 'allied' | 'admin'

  // çµ±è¨ˆãƒ‡ãƒ¼ã‚¿
  participantCount Int   @default(0) @map("participant_count")
  projectCount     Int   @default(0) @map("project_count")
  averageProjects  Float @default(0) @map("average_projects")
  percentage       Float @default(0) @map("percentage")

  // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  calculatedAt DateTime @default(now()) @map("calculated_at")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@unique([periodType, periodStart, periodEnd, professionCode])
  @@index([periodType])
  @@index([professionCode])
  @@map("project_participation_by_profession")
}

// ===================================
// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ æ¨å¥¨çµ±åˆï¼ˆ2025-10-12ï¼‰
// ProjectParticipationRecommendationPageç”¨ãƒ†ãƒ¼ãƒ–ãƒ«
// ===================================

// è·å“¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ çµ±è¨ˆ - å€‹åˆ¥è·å“¡ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚åŠ çŠ¶æ³
model StaffProjectParticipationStats {
  id     String @id @default(cuid())
  userId String @unique @map("user_id")

  // å‚åŠ çµ±è¨ˆ
  totalProjectsJoined Int @default(0) @map("total_projects_joined")
  activeProjects      Int @default(0) @map("active_projects")
  completedProjects   Int @default(0) @map("completed_projects")

  // æœŸé–“åˆ¥çµ±è¨ˆ
  projectsLast6Months Int @default(0) @map("projects_last_6months")
  projectsThisYear    Int @default(0) @map("projects_this_year")

  // å‚åŠ ç‡æŒ‡æ¨™
  participationRate Float   @default(0) @map("participation_rate")
  departmentAvgRate Float   @default(0) @map("department_avg_rate")
  isBelowAverage    Boolean @default(false) @map("is_below_average")

  // æœ€çµ‚å‚åŠ æ—¥
  lastJoinedAt      DateTime? @map("last_joined_at")
  daysSinceLastJoin Int?      @map("days_since_last_join")

  // æ¨å¥¨é€ä¿¡å±¥æ­´
  recommendationsSent Int       @default(0) @map("recommendations_sent")
  lastRecommendedAt   DateTime? @map("last_recommended_at")

  // æ›´æ–°æ—¥æ™‚
  calculatedAt DateTime @default(now()) @map("calculated_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([participationRate])
  @@index([isBelowAverage])
  @@index([departmentAvgRate])
  @@index([lastJoinedAt])
  @@map("staff_project_participation_stats")
}

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤šæ§˜æ€§åˆ†æ - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒ¼ãƒ ã®å¤šæ§˜æ€§ã‚¹ã‚³ã‚¢
model ProjectDiversityAnalysis {
  id        String @id @default(cuid())
  projectId String @unique @map("project_id")

  // è·ç¨®åˆ¥ã‚«ã‚¦ãƒ³ãƒˆ
  nursesCount      Int @default(0) @map("nurses_count")
  doctorsCount     Int @default(0) @map("doctors_count")
  adminCount       Int @default(0) @map("admin_count")
  rehabCount       Int @default(0) @map("rehab_count")
  pharmacistCount  Int @default(0) @map("pharmacist_count")
  medicalTechCount Int @default(0) @map("medical_tech_count")
  othersCount      Int @default(0) @map("others_count")

  // ä¸–ä»£åˆ¥ã‚«ã‚¦ãƒ³ãƒˆ
  gen20sCount Int @default(0) @map("gen_20s_count")
  gen30sCount Int @default(0) @map("gen_30s_count")
  gen40sCount Int @default(0) @map("gen_40s_count")
  gen50sCount Int @default(0) @map("gen_50s_count")
  gen60sCount Int @default(0) @map("gen_60s_count")

  // éƒ¨ç½²åˆ¥ã‚«ã‚¦ãƒ³ãƒˆ
  departmentsCount Int     @default(0) @map("departments_count")
  departmentList   String? @map("department_list") // JSONæ–‡å­—åˆ—: ["å†…ç§‘", "å¤–ç§‘", "äº‹å‹™éƒ¨"]

  // å¤šæ§˜æ€§ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰
  professionDiversityScore Float @default(0) @map("profession_diversity_score")
  generationDiversityScore Float @default(0) @map("generation_diversity_score")
  departmentDiversityScore Float @default(0) @map("department_diversity_score")
  overallDiversityScore    Float @default(0) @map("overall_diversity_score")

  // ç›®æ¨™ãƒ»æ¨å¥¨
  targetDiversityScore   Float   @default(75) @map("target_diversity_score")
  recommendedProfessions String? @map("recommended_professions") // JSONæ–‡å­—åˆ—: ["è–¬å‰¤å¸«", "åŒ»ç™‚æŠ€è¡“è·"]

  // æ›´æ–°æ—¥æ™‚
  calculatedAt DateTime @default(now()) @map("calculated_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  project Post @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([overallDiversityScore])
  @@index([professionDiversityScore])
  @@map("project_diversity_analysis")
}

// ã‚¹ã‚­ãƒ«ã‚µãƒãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ - åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®ã‚¹ã‚­ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
model SkillSummaryCache {
  id            String @id @default(cuid())
  skillId       String @unique @map("skill_id")
  skillName     String @map("skill_name")
  skillCategory String @map("skill_category")

  // ä¿æœ‰è€…çµ±è¨ˆ
  totalStaff        Int   @default(0) @map("total_staff")
  expertCount       Int   @default(0) @map("expert_count")
  advancedCount     Int   @default(0) @map("advanced_count")
  intermediateCount Int   @default(0) @map("intermediate_count")
  basicCount        Int   @default(0) @map("basic_count")
  averageLevel      Float @default(0) @map("average_level")

  // ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–¢é€£çµ±è¨ˆï¼ˆVoiceDriveå´ã§è¨ˆç®—ï¼‰
  activeProjects  Int @default(0) @map("active_projects")
  recommendations Int @default(0) @map("recommendations")

  // æ›´æ–°æ—¥æ™‚
  lastSyncedAt DateTime @default(now()) @map("last_synced_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@index([skillName])
  @@index([skillCategory])
  @@index([totalStaff])
  @@map("skill_summary_cache")
}

// ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¨å¥¨å±¥æ­´ - æ¨å¥¨é€ä¿¡ãƒ»é–²è¦§ãƒ»å—è«¾å±¥æ­´
model ProjectRecommendationLog {
  id        String @id @default(cuid())
  userId    String @map("user_id")
  projectId String @map("project_id")

  // æ¨å¥¨æƒ…å ±
  matchScore    Int    @map("match_score") // 0-100
  reasons       String @map("reasons") // JSONæ–‡å­—åˆ—: ["ã‚¹ã‚­ãƒ«ãƒãƒƒãƒ", "éƒ¨ç½²é–¢é€£"]
  recommendedBy String @map("recommended_by") // æ¨å¥¨è€…ã®employeeId

  // é€ä¿¡ãƒ»é–²è¦§ãƒ»åå¿œ
  sentAt          DateTime  @default(now()) @map("sent_at")
  viewedAt        DateTime? @map("viewed_at")
  acceptedAt      DateTime? @map("accepted_at")
  rejectedAt      DateTime? @map("rejected_at")
  rejectionReason String?   @map("rejection_reason")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  recommendationType String @default("auto") @map("recommendation_type") // "auto" | "manual"
  priority           String @default("medium") @map("priority") // "high" | "medium" | "low"

  user    User @relation(fields: [userId], references: [id], onDelete: Cascade)
  project Post @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([projectId])
  @@index([sentAt])
  @@index([acceptedAt])
  @@map("project_recommendation_logs")
}

// ===================================
// EvaluationNotificationPageçµ±åˆå®Ÿè£…ï¼ˆ2025-10-13ï¼‰
// ===================================

// è©•ä¾¡é€šçŸ¥ãƒ†ãƒ¼ãƒ–ãƒ« - V3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ å¯¾å¿œ
model EvaluationNotification {
  id String @id @default(cuid())

  // è·å“¡æƒ…å ±
  employeeId   String @map("employee_id")
  employeeName String @map("employee_name")

  // è©•ä¾¡æƒ…å ±
  evaluationPeriod String @map("evaluation_period") // ä¾‹: "2025å¹´åº¦ä¸ŠæœŸ"
  evaluationScore  Int    @map("evaluation_score") // 0-100ç‚¹
  evaluationGrade  String @map("evaluation_grade") // S, A+, A, B+, B, C, D

  // 3è»¸è©•ä¾¡å¯¾å¿œï¼ˆV3è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼‰
  facilityGrade  String? @map("facility_grade") // æ–½è¨­å†…è©•ä¾¡ (S, A, B, C, D ã®5æ®µéš)
  corporateGrade String? @map("corporate_grade") // æ³•äººå†…è©•ä¾¡ (S, A, B, C, D ã®5æ®µéš)
  overallGrade   String? @map("overall_grade") // ç·åˆè©•ä¾¡ (S, A+, A, B+, B, C, D ã®7æ®µéš)
  overallScore   Int?    @map("overall_score") // ç·åˆè©•ä¾¡ç‚¹æ•° (0-100ç‚¹)

  // é–‹ç¤ºãƒ»ç· åˆ‡æƒ…å ±
  disclosureDate    DateTime @map("disclosure_date") // è©•ä¾¡é–‹ç¤ºæ—¥
  appealDeadline    DateTime @map("appeal_deadline") // ç•°è­°ç”³ç«‹ç· åˆ‡æ—¥ï¼ˆé–‹ç¤ºã‹ã‚‰14æ—¥ï¼‰
  daysUntilDeadline Int?     @map("days_until_deadline") // ç· åˆ‡ã¾ã§ã®æ®‹æ—¥æ•°
  isUrgent          Boolean  @default(false) @map("is_urgent") // ç·Šæ€¥ãƒ•ãƒ©ã‚°ï¼ˆ3æ—¥ä»¥å†…ï¼‰

  // é€šçŸ¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  notificationStatus String    @default("pending") @map("notification_status")
  // 'pending' | 'sent' | 'delivered' | 'read' | 'failed'
  notificationSentAt DateTime? @map("notification_sent_at")
  notificationReadAt DateTime? @map("notification_read_at")

  // ç•°è­°ç”³ç«‹çŠ¶æ³
  appealStatus      String    @default("none") @map("appeal_status")
  // 'none' | 'submitted' | 'in_review' | 'resolved'
  appealId          String?   @map("appeal_id") // ç•°è­°ç”³ç«‹IDï¼ˆåŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã§ç®¡ç†ï¼‰
  appealSubmittedAt DateTime? @map("appeal_submitted_at")

  // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ é€£æº
  medicalSystemUrl     String? @map("medical_system_url") // åŒ»ç™‚ã‚·ã‚¹ãƒ†ãƒ ã®è©•ä¾¡è©³ç´°URL
  medicalSystemEventId String? @unique @map("medical_system_event_id") // Webhooké‡è¤‡æ’é™¤ç”¨ID

  // é€šçŸ¥é…ä¿¡æƒ…å ±
  emailSent   Boolean   @default(false) @map("email_sent")
  pushSent    Boolean   @default(false) @map("push_sent")
  smsSent     Boolean   @default(false) @map("sms_sent")
  emailSentAt DateTime? @map("email_sent_at")
  pushSentAt  DateTime? @map("push_sent_at")
  smsSentAt   DateTime? @map("sms_sent_at")

  // é…ä¿¡å¤±æ•—æƒ…å ±
  deliveryFailureCount Int     @default(0) @map("delivery_failure_count")
  lastDeliveryError    String? @map("last_delivery_error")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  priority          String   @default("high") @map("priority") // 'low' | 'medium' | 'high' | 'urgent'
  additionalMessage String?  @map("additional_message") // è¿½åŠ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  employee User @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  @@index([employeeId])
  @@index([notificationStatus])
  @@index([appealStatus])
  @@index([disclosureDate])
  @@index([appealDeadline])
  @@index([daysUntilDeadline])
  @@index([isUrgent])
  @@index([evaluationPeriod])
  @@index([employeeId, evaluationPeriod]) // è·å“¡ã®è©•ä¾¡æœŸé–“åˆ¥é€šçŸ¥å–å¾—ç”¨
  @@index([notificationStatus, disclosureDate]) // æœªèª­é€šçŸ¥ãƒªã‚¹ãƒˆé«˜é€Ÿå–å¾—ç”¨
  @@map("evaluation_notifications")
}

// é€šçŸ¥è¨­å®šãƒ†ãƒ¼ãƒ–ãƒ« - è·å“¡ã”ã¨ã®é€šçŸ¥å—ä¿¡è¨­å®š
model NotificationSettings {
  id     String @id @default(cuid())
  userId String @unique @map("user_id")

  // é€šçŸ¥ãƒãƒ£ãƒãƒ«è¨­å®š
  enableEmailNotifications Boolean @default(true) @map("enable_email_notifications")
  enablePushNotifications  Boolean @default(true) @map("enable_push_notifications")
  enableSmsNotifications   Boolean @default(false) @map("enable_sms_notifications")

  // ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®š
  reminderDaysBefore     Int     @default(3) @map("reminder_days_before") // ç•°è­°ç”³ç«‹ç· åˆ‡ã®ä½•æ—¥å‰ã«ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼
  enableDeadlineReminder Boolean @default(true) @map("enable_deadline_reminder")

  // è‡ªå‹•æ—¢èª­è¨­å®š
  autoMarkAsRead Boolean @default(false) @map("auto_mark_as_read")

  // é€šçŸ¥æ™‚é–“å¸¯è¨­å®š
  quietHoursStart  String? @map("quiet_hours_start") // ä¾‹: "22:00"
  quietHoursEnd    String? @map("quiet_hours_end") // ä¾‹: "08:00"
  enableQuietHours Boolean @default(false) @map("enable_quiet_hours")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("notification_settings")
}

// ===================================================================
// ç·Šæ€¥é€€è·å‡¦ç†é–¢é€£ãƒ¢ãƒ‡ãƒ«ï¼ˆ2025-10-18è¿½åŠ ï¼‰
// ===================================================================

/// é€€è·å‡¦ç†è¨˜éŒ²ãƒ†ãƒ¼ãƒ–ãƒ«
/// ç·Šæ€¥é€€è·å‡¦ç†ã®4ã‚¹ãƒ†ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼ã‚’è¨˜éŒ²
model RetirementProcess {
  id String @id @default(cuid())

  // å¯¾è±¡è·å“¡æƒ…å ±
  targetUserId     String  @map("target_user_id")
  targetEmployeeId String? @map("target_employee_id")
  targetUserName   String? @map("target_user_name")

  // å®Ÿè¡Œè€…æƒ…å ±
  initiatedBy         String  @map("initiated_by") // User.id
  initiatorEmployeeId String? @map("initiator_employee_id")
  initiatorName       String? @map("initiator_name")
  initiatorLevel      Float   @map("initiator_level")

  // å‡¦ç†è¨­å®š
  preserveAnonymousContent Boolean @default(true) @map("preserve_anonymous_content")
  anonymizationLevel       String  @default("department") @map("anonymization_level") // 'full' | 'department' | 'partial'
  retentionPeriod          Int     @default(24) @map("retention_period") // æœˆå˜ä½

  // ãƒ—ãƒ­ã‚»ã‚¹çŠ¶æ…‹
  currentStep Int    @default(1) @map("current_step") // 1-4
  status      String @default("in_progress") @map("status") // 'in_progress' | 'completed' | 'failed' | 'cancelled'

  // ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†çŠ¶æ³
  step1CompletedAt DateTime? @map("step1_completed_at") // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç„¡åŠ¹åŒ–
  step2CompletedAt DateTime? @map("step2_completed_at") // æ¨©é™å‰¥å¥ª
  step3CompletedAt DateTime? @map("step3_completed_at") // æŠ•ç¨¿åŒ¿ååŒ–
  step4CompletedAt DateTime? @map("step4_completed_at") // å®Œäº†é€šçŸ¥

  // åŒæœŸæƒ…å ±
  syncToStaffSystem Boolean   @default(false) @map("sync_to_staff_system")
  syncedAt          DateTime? @map("synced_at")

  // å‡¦ç†çµæœ
  completedAt  DateTime? @map("completed_at")
  errorMessage String?   @map("error_message")

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([targetUserId])
  @@index([initiatedBy])
  @@index([status])
  @@index([currentStep])
  @@index([syncToStaffSystem])
  @@map("retirement_processes")
}

/// ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¨­å®šãƒ†ãƒ¼ãƒ–ãƒ«
/// è­°é¡Œãƒ¢ãƒ¼ãƒ‰ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŒ–ãƒ¢ãƒ¼ãƒ‰ãƒ»å…±é€šãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¡¨ç¤ºè¨­å®šã‚’ç®¡ç†
model SidebarMenuConfig {
  id String @id @default(cuid())

  // ãƒ¡ãƒ‹ãƒ¥ãƒ¼è­˜åˆ¥
  menuItemId      String  @map("menu_item_id") // 'personal_station', 'evaluation_station'ç­‰
  menuCategory    String  @map("menu_category") // 'agenda', 'project', 'common'
  menuSubcategory String? @map("menu_subcategory") // 'station', 'info', 'management'ç­‰

  // åŸºæœ¬æƒ…å ±
  icon        String  @map("icon") // Emoji
  label       String  @map("label")
  path        String  @map("path")
  description String? @map("description") // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ç”¨

  // è¡¨ç¤ºè¨­å®š
  isVisible    Boolean @default(true) @map("is_visible")
  displayOrder Int     @default(0) @map("display_order")

  // ãƒ‡ãƒã‚¤ã‚¹åˆ¥è¡¨ç¤º
  showOnDesktop Boolean @default(true) @map("show_on_desktop")
  showOnMobile  Boolean @default(true) @map("show_on_mobile")
  showOnTablet  Boolean @default(true) @map("show_on_tablet")

  // æ¨©é™ãƒ¬ãƒ™ãƒ«åˆ¥è¡¨ç¤º (JSONå½¢å¼: ["1", "2", "14", "X"] ç­‰)
  visibleForLevels String? @map("visible_for_levels")

  // æ–°æ©Ÿèƒ½ãƒãƒ¼ã‚¯
  showNewBadge  Boolean   @default(false) @map("show_new_badge")
  newBadgeUntil DateTime? @map("new_badge_until")

  // ãƒãƒƒã‚¸è¨­å®š
  showBadge Boolean @default(false) @map("show_badge")
  badgeType String? @map("badge_type") // 'count', 'dot', 'custom'

  // ç®¡ç†è€…ãƒ¡ãƒ¢
  adminNotes String? @map("admin_notes")

  // ãã®ä»–
  isCustom Boolean @default(false) @map("is_custom")
  isSystem Boolean @default(false) @map("is_system") // ã‚·ã‚¹ãƒ†ãƒ é …ç›®ï¼ˆå‰Šé™¤ä¸å¯ï¼‰

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@unique([menuItemId, menuCategory], name: "unique_menu_config")
  @@index([menuCategory])
  @@index([isVisible])
  @@index([displayOrder])
  @@map("sidebar_menu_configs")
}
